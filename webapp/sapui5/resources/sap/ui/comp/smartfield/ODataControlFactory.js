/*
 * SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/core/library","sap/ui/comp/library","sap/m/TextArea","sap/m/Link","sap/m/CheckBox","sap/m/ComboBox","sap/m/DatePicker","sap/m/DateTimePicker","sap/m/FlexItemData","sap/m/HBox","sap/m/Input","sap/m/Select","sap/m/Text","sap/ui/core/Renderer","sap/ui/comp/navpopover/SmartLink","./ControlFactoryBase","./FieldControl","./ODataControlSelector","./ODataHelper","./ODataTypes","sap/m/ObjectNumber","sap/m/ObjectIdentifier","sap/m/ObjectStatus","sap/m/TimePicker","sap/ui/comp/navpopover/SemanticObjectController","sap/ui/comp/util/FormatUtil","sap/ui/comp/smartfield/type/TextArrangementString","sap/ui/comp/smartfield/Configuration","sap/ui/comp/odata/MetadataAnalyser","sap/ui/comp/navpopover/NavigationPopoverHandler","sap/ui/core/InvisibleText","sap/base/Log","sap/base/assert","sap/base/security/URLWhitelist","sap/m/library"],function(q,c,l,T,L,C,a,D,b,F,H,I,S,d,R,e,f,g,O,h,i,j,k,m,o,p,r,s,t,M,N,u,v,w,U,x){"use strict";var V=c.ValueState;var y=c.TextAlign;var z=x.InputType;var A=x.FlexJustifyContent;var B=l.smartfield.TextInEditModeSource;var E=l.smartfield.CriticalityRepresentationType;var G=l.smartfield.ControlContextType;var J=c.TextDirection;var K;var P=f.extend("sap.ui.comp.smartfield.ODataControlFactory",{constructor:function(n,Q,W){f.call(this,n,Q);this.sName="ODataControlFactory";this._oMetaData={annotations:{}};this._oMeta=W;this._oHelper=new h(n,this._oBinding);this._oFieldControl=new g(Q,this._oHelper);this._oTypes=new i(Q);this._oSelector=new O(this._oMetaData,Q,this._oTypes);this._bInitialized=false;this.bPending=false;this._oAmountInputFlexItemData=null;this._oUOMInputFlexItemData=null;this._oUOMTextFlexItemData=null;this.oAmountField=null;this.bTextInEditModeSourceValidMetadata=false;K=sap.ui.require("sap/ui/comp/smartfield/SmartField");if(!K){throw new Error("SmartField module not loaded for "+this);}}});P.prototype._init=function(n){this._oMetaData.model=n.model;this._oMetaData.path=n.path;this._oMetaData.entitySet=n.entitySetObject||this._oHelper.oMeta.getODataEntitySet(n.entitySet);if(this._oHelper.oMeta){w(this._oMetaData.entitySet,'The entity set named "'+n.entitySet+'" was not found in the "'+this._oHelper.oMeta.getODataEntityContainer().name+'" entity container of the service metadata document. - '+this.getMetadata().getName());}this._oMetaData.entityType=n.entityType||this._oHelper.oMeta.getODataEntityType(this._oMetaData.entitySet.entityType);this._oMetaData.navigationPath=n.navigationPath||null;if(this._oModel){this._oHelper.checkNavigationProperty(this._oMetaData,this._oParent);this._oHelper.getProperty(this._oMetaData);var Q=this.getEdmProperty();w(!!Q,'The EDM property "'+n.path+'" was not found in the "'+this._oMetaData.entityType.namespace+"."+this._oMetaData.entityType.name+'" entity type. - '+this.getMetadata().getName());if(Q){if(this._oParent&&this._oParent.getExpandNavigationProperties()){var W=this._oParent.getBindingContext(),X=W&&W.getObject(),Y=X&&X.__metadata.created;if(!Y){var Z=this._oHelper.getAutoExpandProperties(Q);if(Z.length>0){this._oParent.bindElement({path:"",parameters:{expand:Z,select:Z}});}}}this._oMetaData.annotations.text=this._oHelper.getTextProperty2(this._oMetaData);this._oMetaData.annotations.uom=this._oHelper.getUnitOfMeasure2(this._oMetaData);this._oHelper.getValueListData(this._oMetaData);this._oMetaData.annotations.lineitem=this._oHelper.getAnalyzer().getLineItemAnnotation(this._oMetaData.entitySet.entityType);this._oHelper.getUOMValueListAnnotationPath(this._oMetaData);this._oMetaData.annotations.semantic=M.getSemanticObjectsFromProperty(Q);this._oMetaData.annotations.semanticKeys=this._oHelper.getAnalyzer().getSemanticKeyAnnotation(this._oMetaData.entitySet.entityType);if(this._oMetaData.annotations.uom){this._oMetaData.annotations.uom.annotations={};this._oHelper.getValueListData(this._oMetaData.annotations.uom);}this._oHelper.getUOMTextAnnotation(this._oMetaData);}}else{this._oMetaData.modelObject=n.modelObject;this._oMetaData.property=n.property;this._oMetaData.property.valueListAnnotation=null;this._oMetaData.property.valueListKeyProperty=null;this._oMetaData.property.valueListEntitySet=null;this._oMetaData.property.valueListEntityType=null;this._oMetaData.annotations.text=n.annotations.text;this._oMetaData.annotations.uom=n.annotations.uom;if(this._oMetaData.annotations.uom&&!this._oMetaData.annotations.uom.annotations){this._oMetaData.annotations.uom.annotations={};}this._oMetaData.annotations.valuelist=n.annotations.valuelist;this._oMetaData.annotations.valuelistType=n.annotations.valuelistType;this._oMetaData.annotations.lineitem=n.annotations.lineitem;this._oMetaData.annotations.semantic=n.annotations.semantic;this._oMetaData.annotations.valuelistuom=n.annotations.valuelistuom;}};P.prototype._initValueList=function(n){var Q=this._oMetaData.property,W=n.primaryValueListAnnotation;this._oMetaData.annotations.valueListData=W;Q.valueListAnnotation=W;Q.valueListKeyProperty=this._oHelper.getODataValueListKeyProperty(W);Q.valueListEntitySet=this._oHelper.oMeta.getODataEntitySet(W.valueListEntitySetName);Q.valueListEntityType=this._oHelper.oMeta.getODataEntityType(this._oHelper.oMeta.getODataEntitySet(W.valueListEntitySetName).entityType);};P.prototype._createEdmDisplay=function(){var n,Q,W,X,Y=this,Z={width:true,textAlign:true},$=this.getEdmProperty();if($){X=this._oHelper.oAnnotation.getText($);}var _=this._oParent.data("configdata");var a1=((_&&(_.isInnerControl!==true))||this._oParent.isContextTable());var b1=this._oSelector.checkComboBox(a1);if(b1.combobox&&(this._oParent.getFetchValueListReadOnly()||(X===undefined))){return this._createComboBox({valueHelp:{annotation:b1.annotation,noDialog:true,noTypeAhead:true},edit:false});}if(this._checkLink()&&!this._oSelector.useObjectIdentifier()){return this._createLink();}var c1=this.createAttributes(null,this._oMetaData.property,Z);var d1=this._oSelector.checkDatePicker()||((this._oMetaData.property&&this._oMetaData.property.property)?this._oMetaData.property.property.type.startsWith("Edm.Date"):false);if(d1){var e1=this.getFormatSettings("dateFormatSettings");c1.text={model:this._oMetaData.model,path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property,e1,{displayFormat:"Date"})};}else{c1.text={model:this._oMetaData.model,path:this._oHelper.getEdmDisplayPath(this._oMetaData),type:this._oTypes.getType(this._oMetaData.property)};}if($){Q=this._oHelper.oAnnotation.isMasked($);if(Q){c1.text.formatter=i.maskValue;}if(X){W=this._oSelector.useObjectIdentifier(d1,Q);if(W){delete c1.width;delete c1.textAlign;c1.text={path:this._oMetaData.path};c1.title={path:this._oHelper.getEdmDisplayPath(this._oMetaData)};if(this._oParent.hasListeners("press")){c1.titleActive=true;c1.titlePress=function(i1){Y._oParent.firePress(i1);};}else if(this._oMetaData.annotations.semantic&&this._oMetaData.annotations.semantic.defaultSemanticObject){var f1;var g1;var h1=this._oMetaData.annotations.semantic.additionalSemanticObjects.concat(this._oMetaData.annotations.semantic.defaultSemanticObject);p.getDistinctSemanticObjects().then(function(i1){f1=p.hasDistinctSemanticObject(h1,i1);if(f1){var j1=Y._oParent.getBindingInfo("value");var k1=j1.parts[0].path;var l1=Y._oHelper.oAnnotation.getLabel(Y._oMetaData.property.property);if(Y._oMetaData.annotations.lineitem&&Y._oMetaData.annotations.lineitem.labels&&Y._oMetaData.annotations.lineitem.labels[k1]){l1=Y._oMetaData.annotations.lineitem.labels[k1];}g1=new N({semanticObject:Y._oMetaData.annotations.semantic.defaultSemanticObject,additionalSemanticObjects:Y._oMetaData.annotations.semantic.additionalSemanticObjects,semanticObjectLabel:l1,fieldName:k1,navigationTargetsObtained:function(m1){var n1=sap.ui.getCore().byId(m1.getSource().getControl());var o1=m1.getParameters().mainNavigation;if(o1){o1.setDescription(n1.getText());}m1.getParameters().show(n1.getTitle(),o1,undefined,undefined);}});}});c1.titleActive={path:"$sapuicompsmartfield_distinctSO>/distinctSemanticObjects",formatter:function(i1){return p.hasDistinctSemanticObject(h1,i1);}};c1.titlePress=function(i1){if(f1&&g1){g1.setControl(i1.getSource(i1.getParameter("domRef")));g1.openPopover();}};}}else if(!(_&&(_.isInnerControl===true))){c1.text={};c1.text.parts=[];c1.text.parts.push(this._oMetaData.path);c1.text.parts.push(this._oHelper.getEdmDisplayPath(this._oMetaData));c1.text.formatter=function(i1,j1){if(b1.combobox){return Y._formatDisplayBehaviour("defaultComboBoxReadOnlyDisplayBehaviour",i1,j1);}return Y._formatDisplayBehaviour("defaultInputFieldDisplayBehaviour",i1,j1);};}}else if(this._oSelector.checkCheckBox()){c1.text.formatter=function(i1){return Y._formatDisplayBehaviour("defaultCheckBoxDisplayBehaviour",i1);};}}if(W){n=new k(this._oParent.getId()+"-objIdentifier",c1);if(this._oMetaData.annotations.semantic){n.setModel(p.getJSONModel(),"$sapuicompsmartfield_distinctSO");}}else{if(c1.text.type&&c1.text.type.isA("sap.ui.comp.smartfield.type.DateTime")&&c1.text.type.oConstraints&&c1.text.type.oConstraints.isDateOnly){c1.wrapping=false;}if(this._oParent.isContextTable()&&sap.ui.getCore().getConfiguration().getRTL()){c1.textDirection="LTR";}n=new d(this._oParent.getId()+"-text",c1);}if(!W&&_&&_.configdata&&_.configdata.onText){_.configdata.onText(n);}return{control:n,onCreate:"_onCreate",params:{noValidations:true}};};P.prototype._createEdmTime=function(){var n={width:true,placeholder:true,valueState:true,valueStateText:true};var Q=P.getBoundPropertiesMapInfoForInnerControl(o.getMetadata().getName(),{propertyName:"value"})[0];var W={valueFormat:"HH:mm:ss"};W=Object.assign(W,this.createAttributes(Q,this._oMetaData.property,n,{event:"change"}));if(W.width===""){W.width="100%";}var X=new o(this._oParent.getId()+"-timePicker",W);return{control:X,onCreate:"_onCreate",params:{getValue:"getValue",type:{type:W.value.type,property:this._oMetaData.property}}};};P.prototype._createObjectStatus=function(){var n=this.createAttributes(null,this._oMetaData.property,null),Q=this._oHelper.oAnnotation.getText(this.getEdmProperty());var W=P.getBoundPropertiesMapInfoForInnerControl(m.getMetadata().getName(),{propertyName:"value"})[0];if(Q){n[W]={parts:[this._oHelper.getEdmDisplayPath(this._oMetaData)]};}else{n[W]={model:this._oMetaData.model,path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)};}this._addObjectStatusAttributes(n);var X=new m(this._oParent.getId()+"-objStatus",n);return{control:X,onCreate:"_onCreate",params:{getValue:"getText",noValidation:true}};};P.prototype._addObjectStatusAttributes=function(n){var Q,W=this._oParent.getControlProposal(),X=W.getObjectStatus();if(X){Q=X.getBindingInfo("criticality");}var Y=function($){var _={0:V.None,1:V.Error,2:V.Warning,3:V.Success};var a1={"com.sap.vocabularies.UI.v1.CriticalityType/Neutral":V.Neutral,"com.sap.vocabularies.UI.v1.CriticalityType/Negative":V.Warning,"com.sap.vocabularies.UI.v1.CriticalityType/Critical":V.Error,"com.sap.vocabularies.UI.v1.CriticalityType/Positive":V.Success};return a1[$]||_[$]||V.None;};var Z=function(){var $,_={"Error":"sap-icon://status-negative","Warning":"sap-icon://status-critical","Success":"sap-icon://status-positive","None":"sap-icon://status-inactive"};if(Q){if(Q.formatter){$=Q.formatter.apply(null,arguments);}else{$=arguments[0];}}else{$=X.getCriticality();}if(($===undefined)||($===null)){return null;}return _[Y($)];};if(Q){n.state={formatter:function(){var $;if(Q.formatter){$=Q.formatter.apply(null,arguments);}else{$=arguments[0];}return Y($);},parts:Q.parts};if(X.getCriticalityRepresentationType()!==E.WithoutIcon){n.icon={formatter:Z,parts:Q.parts};}}else{if(X){n.state=Y(X.getCriticality());if(X.getCriticalityRepresentationType()!==E.WithoutIcon){n.icon=Z();}}else{n.icon=Z();}}};P.prototype._createEdmString=function(){if(this._oSelector.checkCheckBox()){return this._createCheckBox();}var n=this._oSelector.checkSelection();if(n.selection){return this._createSelect({valueHelp:P.getValueHelpDropdownSettings(n)});}n=this._oSelector.checkComboBox();if(n.combobox){return this._createComboBox({valueHelp:P.getValueHelpDropdownSettings(n),edit:true});}var Q={width:true,textAlign:true,placeholder:true,tooltip:true,name:true,valueState:true,valueStateText:true};var W=this.getEdmProperty();if(this._oHelper.oAnnotation.isMultiLineText(W)){delete Q["width"];return this._createMultiLineText({attributesNamesMap:Q});}var X=this._oParent.isTextInEditModeSourceNotNone(),Y=/Edm.String|Edm.Guid/.test(W.type);if(X){w(Y,"The ValueList and NavigationProperty"+"members of the sap.ui.comp.smartfield.TextInEditModeSource enumeration are only supported for OData "+"EDM Properties typed as Edm.String or Edm.Guid. - "+this.getMetadata().getName());}var Z=P.getBoundPropertiesMapInfoForInnerControl(I.getMetadata().getName(),{propertyName:"value"})[0];var $=this._oParent.getTextInEditModeSource(),_;this.bTextInEditModeSourceValidMetadata=Y&&this._checkTextInEditModeSourceRequiredMetadata($);if(this.bTextInEditModeSourceValidMetadata){_=this.createAttributes("",this._oMetaData.property,Q);_[Z]=this.getTextArrangementBindingInfo();}else{_=this.createAttributes(Z,this._oMetaData.property,Q);}var a1=new I(this._oParent.getId()+"-input",_);if(this.bTextInEditModeSourceValidMetadata&&($===B.ValueList)){var b1="__sap.ui.comp.smartfield.type.TextArrangementModel",c1=_.value.parts[1].path.split("/")[1];a1.setModel(this._oModel,b1);a1.bindElement(b1+">/"+c1);}if(this._oHelper.oAnnotation.isMasked(W)){a1.setType(z.Password);}this._handleEventingForEdmString(a1,this._oMetaData.property);var d1=this.getCustomDataConfiguration();if(d1&&(typeof d1.onInput==="function")){d1.onInput(a1);}return{control:a1,onCreate:"_onCreate",params:{valuehelp:{annotation:n.annotation,noDialog:!this._oParent.getShowValueHelp(),noTypeAhead:!this._oParent.getShowSuggestion(),aggregation:"suggestionRows"},getValue:"getValue",type:{type:_.value.type,property:this._oMetaData.property}}};};P.getValueHelpDropdownSettings=function(n){return{annotation:n.annotation,noDialog:true,noTypeAhead:true};};P.prototype.getCustomDataConfiguration=function(){var n=this._oParent.data("configdata");return n&&n.configdata?n.configdata:null;};P.prototype._checkTextInEditModeSourceRequiredMetadata=function(n){switch(n){case B.None:return false;case B.NavigationProperty:var Q=this._oMetaData.annotations.text,W;if(Q){W=Q.entityType;}return this._oHelper.checkNavigationPropertyRequiredMetadata({propertyName:this._oMetaData.property.property.name,entityType:this._oMetaData.entityType,entityTypeOfNavigationProperty:W,textAnnotation:this._oMetaData.property.property["com.sap.vocabularies.Common.v1.Text"]});case B.ValueList:return this._oHelper.checkValueListRequiredMetadataForTextArrangment({propertyName:this._oMetaData.property.property.name,entityType:this._oMetaData.entityType,valueListAnnotation:this._oMetaData.property.valueListAnnotation});default:return false;}};P.getTextArrangementPaths=function(n,Q){switch(n){case B.NavigationProperty:var W=Q.annotations.text;return{keyField:W.entityType.key.propertyRef[0].name,descriptionField:W.property.typePath,entitySetName:W.entitySet.name};case B.ValueList:var X=Q.property.valueListAnnotation;return{keyField:X.keyField,descriptionField:X.descriptionField,entitySetName:Q.property.valueListEntitySet.name};}};P.prototype.getTextArrangementBindingInfo=function(n){var Q=n&&n.type,W=this._oMetaData;if(!Q){var X=this._oParent.getBindingInfo("value");Q=(X&&X.type)||{};var Y=P.getTextArrangementPaths(this._oParent.getTextInEditModeSource(),W);Q=this._oTypes.getType(W.property,Q.oFormatOptions,Q.oConstraints,{composite:true,keyField:Y.keyField,descriptionField:Y.descriptionField});}return{model:W.model,type:Q,parts:[{path:W.path},{path:this._getTextAnnotationPropertyPath(this._oParent.getTextInEditModeSource())}]};};P.prototype._getTextAnnotationPropertyPath=function(n){switch(n){case B.NavigationProperty:return this._oHelper.getTextAnnotationPropertyPath(this._oMetaData);case B.ValueList:var Q=this._oParent.getBinding("value"),W=this._oMetaData.property;return this._oHelper.getAbsolutePropertyPathToValueListEntity({entitySet:W.valueListEntitySet,entityID:Q&&Q.getValue(),property:W.valueListKeyProperty});case B.None:return"";default:return"";}};P.prototype._getMaxLength=function(){return this._oTypes.getMaxLength(this._oMetaData.property,this._oParent.getBindingInfo("value"));};P.prototype._addAriaLabelledBy=function(n){var Q,W,X;if((this._oParent.getControlContext()===G.None)||(this._oParent.getControlContext()===G.Form)||(this._oParent.getControlContext()===G.SmartFormGrid)){f.prototype._addAriaLabelledBy.apply(this,arguments);X=this._oParent.data("configdata");if(X&&X.configdata.isInnerControl&&X.configdata.isUOM){if(n){W=n.control;if(W instanceof H){if(W.getItems().length>0){W=W.getItems()[0];}}}if(W&&W.getAriaLabelledBy&&W.getAriaLabelledBy().length===0){var Y=this.getEdmProperty();if(this._oHelper.oAnnotation.getLabel(Y)){Q=new u({text:this._oHelper.oAnnotation.getLabel(Y)});W.addAriaLabelledBy(Q);this._oParent.addAggregation("_ariaLabelInvisibleText",Q);}}}}};P.prototype._handleEventingForEdmString=function(n,Q){if(!n){return;}var W=this._oHelper.oAnnotation.isUpperCase(Q.property),X=this;n.attachChange(function onTextInputFieldChange(Y){var Z={},$=Y&&Y.getParameters();if($){var _=$.value;if(W&&_){_=_.toUpperCase();n.setValue(_);}Z.value=_;Z.newValue=_;if($.validated){Z.validated=$.validated;}if(n._oSuggestionPopup&&n._oSuggestionPopup.isOpen()){if(!$.validated){if(n._iPopupListSelectedIndex>=0){return;}}}try{X._oParent.fireChange(Z);}catch(a1){v.error(a1);}}});};P.prototype._createComboBox=function(n){var Q=null,W=this._oParent.data("configdata"),X={width:true,textAlign:true,placeholder:true,tooltip:true,name:true,valueState:true};var Y=P.getBoundPropertiesMapInfoForInnerControl(a.getMetadata().getName(),{propertyName:"value"})[0];var Z={change:function($){if($.getParameter("itemPressed")){return;}var _=$.getSource().getSelectedKey();this._oParent.fireChange({value:_,newValue:_});}.bind(this),selectionChange:this._oHelper.getSelectionChangeHandler(this._oParent)};Z=Object.assign(Z,this.createAttributes(Y,this._oMetaData.property,X));if(Z.width===""){Z.width="100%";}if(n.edit){Q=new a(this._oParent.getId()+"-comboBoxEdit",Z);}else{Q=this._createDisplayedComboBox(Z);}if(W&&W.configdata&&W.configdata.onText){W.configdata.onText(Q);}return{control:Q,onCreate:"_onCreate",params:{valuehelp:{annotation:n.valueHelp.annotation,aggregation:"items",noDialog:n.valueHelp.noDialog,noTypeAhead:n.valueHelp.noTypeAhead},getValue:"getSelectedKey",type:{type:Z.selectedKey.type,property:this._oMetaData.property}}};};P.prototype._createDisplayedComboBox=function(n){var Q=a.extend("sap.ui.comp.smartfield.DisplayComboBox",{metadata:{library:"sap.ui.comp",properties:{wrapping:{type:"boolean",group:"Appearance",defaultValue:true}}},renderer:function(W,X){var Y=X.getWidth(),Z=X.getValue(),$=X.getTextDirection(),_=X.getTextAlign(),a1=X.getTooltip_AsString(),b1=X.getWrapping();W.write("<span");W.writeControlData(X);W.addClass("sapMText");W.addClass("sapUiSelectable");if(b1){if(Z&&(Z.length>0)&&!/\s/.test(Z)){W.addClass("sapMTextBreakWord");}}else{W.addClass("sapMTextNoWrap");}if(Y){W.addStyle("width",Y);}else{W.addClass("sapMTextMaxWidth");}if($!==J.Inherit){W.writeAttribute("dir",$.toLowerCase());}if(a1){W.writeAttributeEscaped("title",a1);}if(_){_=R.getTextAlign(_,$);if(_){W.addStyle("text-align",_);}}var c1=b1?"sapMTextRenderWhitespaceWrap":"sapMTextRenderWhitespace";W.addClass(c1);W.writeClasses();W.writeStyles();W.write(">");Z.replace(/\r\n|\n\r|\r/g,"\n");W.writeEscaped(Z);W.write("</span>");},updateDomValue:function(W){if(!this.isActive()){return this;}W=this._getInputValue(W);if(this.$().text()!==W){this.$().text(W);this._bCheckDomValue=true;}return this;},getValue:function(){return this.getProperty("value");},getFocusDomRef:function(){return this.getDomRef();},getEditable:function(){return false;}});return new Q(this._oParent.getId()+"-comboBoxDisp",n);};P.prototype._createSelect=function(n){var Q={width:true,name:true,valueState:true};var W=P.getBoundPropertiesMapInfoForInnerControl(S.getMetadata().getName(),{propertyName:"value"})[0];var X={change:this._oHelper.getSelectionChangeHandler(this._oParent),forceSelection:false};X=Object.assign(X,this.createAttributes(W,this._oMetaData.property,Q));if(X.width===""){X.width="100%";}return{control:new S(this._oParent.getId()+"-select",X),onCreate:"_onCreate",params:{valuehelp:{annotation:n.valueHelp.annotation,aggregation:"items",noDialog:n.valueHelp.noDialog,noTypeAhead:n.valueHelp.noTypeAhead},getValue:"getSelectedKey",type:{type:X.selectedKey.type,property:this._oMetaData.property}}};};P.prototype._createCheckBox=function(){var n=P.getBoundPropertiesMapInfoForInnerControl(C.getMetadata().getName(),{propertyName:"value"})[0];var Q=this.createAttributes(n,null,{},{event:"select",parameter:"selected"});Q.editable=(this._oParent.getEditable()&&this._oParent.getEnabled()&&this._oParent.getContextEditable());Q.selected.type=this._oTypes.getAbapBoolean();return{control:new C(this._oParent.getId()+"-cBox",Q),onCreate:"_onCreate",params:{getValue:"getSelected"}};};P.prototype._createEdmDateTime=function(){var n=this.getFormatSettings("dateFormatSettings"),Q;var W={width:true,textAlign:true,placeholder:true,name:true,valueState:true};var X=this.createAttributes(null,this._oMetaData.property,W,{event:"change",parameter:"value"});if(this._oSelector.checkDatePicker()){Q=P.getBoundPropertiesMapInfoForInnerControl(D.getMetadata().getName(),{propertyName:"value"})[0];X[Q]={path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property,n,{displayFormat:"Date"}),model:this._oMetaData.model};if(n&&n.style){X.displayFormat=n.style;}return{control:new D(this._oParent.getId()+"-datePicker",X),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:X.value.type,property:this._oMetaData.property}}};}Q=P.getBoundPropertiesMapInfoForInnerControl(b.getMetadata().getName(),{propertyName:"value"})[0];X[Q]={path:this._oMetaData.path,model:this._oMetaData.model,type:this._oTypes.getType(this._oMetaData.property,n)};return{control:new b(this._oParent.getId()+"-input",X),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:X.value.type,property:this._oMetaData.property}}};};P.prototype._createEdmDateTimeOffset=function(){var n=this.getFormatSettings("dateFormatSettings");if(n){n.UTC=false;}var Q=P.getBoundPropertiesMapInfoForInnerControl(b.getMetadata().getName(),{propertyName:"value"})[0];var W={width:true,textAlign:true,placeholder:true,name:true,valueState:true};var X=this.createAttributes(null,this._oMetaData.property,W,{event:"change",parameter:"value"});X[Q]={model:this._oMetaData.model,path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property,n)};return{control:new b(this._oParent.getId()+"-input",X),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:X.value.type,property:this._oMetaData.property}}};};P.prototype._createEdmNumeric=function(){var n=this._oSelector.checkComboBox();if(n.combobox){return this._createComboBox({valueHelp:{annotation:n.annotation,noDialog:true,noTypeAhead:true},edit:true});}var Q={width:true,textAlign:true,placeholder:true,name:true,valueState:true};var W=P.getBoundPropertiesMapInfoForInnerControl(I.getMetadata().getName(),{propertyName:"value"})[0];var X=this.createAttributes(W,this._oMetaData.property,Q,{event:"change",parameter:"value"});if(this._oParent.isContextTable()&&sap.ui.getCore().getConfiguration().getRTL()){X.textDirection="LTR";}return{control:new I(this._oParent.getId()+"-input",X),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:X.value.type,property:this._oMetaData.property}}};};P.prototype._createEdmUOM=function(){var n=this._oMetaData.annotations.uom&&this._oHelper.oAnnotation.isCurrency(this._oMetaData.annotations.uom.property.property),Q=this._createEdmUOMAttributes({currency:n}),W=this._oParent.getObjectBinding(this._oMetaData.model),X=sap.ui.getCore().getConfiguration().getRTL(),Y=X&&this._oParent.isContextTable(),Z=this._oParent.getId(),$;this.addObjectBinding(Q,W);if(Y){Q.textDirection="LTR";}var _=new I(Z+"-input",Q);this.oAmountField=_;if(this._oParent.data("suppressUnit")==="true"){var a1={getValue:"getValue"};if(!n){a1.type={type:Q.value.type,property:this._oMetaData.property};}return{control:_,onCreate:"_onCreate",params:a1};}if(!n){$={type:Q.value.type,property:this._oMetaData.property};}var b1={change:this._oHelper.getUOMChangeHandler(this._oParent,true),textAlign:this._getEdmUOMTextAlignment()};var c1=P.getBoundPropertiesMapInfoForInnerControl(K.getMetadata().getName(),{propertyName:"value"})[0];var d1=this._oHelper.getUOMPath(this._oMetaData);b1[c1]={model:this._oMetaData.model,path:d1};this.addObjectBinding(b1,W);this.mapBindings(b1,P._getEmbeddedSmartFieldMapSettings());if(this._oParent.getConfiguration()){b1.configuration=new t({preventInitialDataFetchInValueHelpDialog:this._getPreventInitialDataFetchInVHDialog()});}var e1=new K(Z+"-sfEdit",b1),f1=this;e1.data("configdata",{"configdata":{isInnerControl:true,isUOM:!this._oParent.data("configdata"),model:this._oMetaData.model,navigationPath:this._oMetaData.annotations.uom.navigationPath||null,path:d1,entitySetObject:this._oMetaData.annotations.uom.entitySet,entityType:this._oMetaData.annotations.uom.entityType,property:this._oMetaData.annotations.uom.property,annotations:{valuelist:this._oMetaData.annotations.valuelistuom,valuelistType:this._oMetaData.annotations.uom.annotations.valuelistType,text:this._oMetaData.annotations.textuom},modelObject:this._oMetaData.modelObject||this._oModel,onText:function(h1){_.setLayoutData(new F({growFactor:1}));e1.setLayoutData(f1._getStaticUOMTextFlexItemData({shrinkFactor:0,styleClass:"sapUiCompSmartFieldFlexItemUnitDisplay"}));e1.addStyleClass("sapUiCompSmartFieldUOMDisplayText");if(h1){if(Y&&(typeof h1.setTextDirection==="function")){h1.setTextDirection("LTR");}h1.addStyleClass("sapUiCompSmartFieldUnit");}},onInput:function(h1){_.setLayoutData(f1._getDynamicAmountInputFlexItemData({control:e1}));e1.setLayoutData(f1._getStaticUOMInputFlexItemData({growFactor:0,styleClass:"sapUiCompSmartFieldFlexItemUnitEdit",minWidth:""}));if(h1){if(Y&&(typeof h1.setTextDirection==="function")){h1.setTextDirection("LTR");}h1.addStyleClass("sapUiCompSmartFieldUnit");}}}});e1.data("errorCheck","setComplexClientErrorSecondOperandNested");_.addAriaLabelledBy(e1);if(e1.getVisible()){_.addStyleClass("smartFieldPaddingRight");}_.addStyleClass("sapUiCompSmartFieldValue");var g1=new H({justifyContent:A.End,items:[_,e1],fitContainer:true,width:this._oParent.getWidth()});g1.addStyleClass("sapUiCompUOM");g1.enhanceAccessibilityState=function(h1,i1){this._oParent.enhanceAccessibilityState(h1,i1);}.bind(this);if(this._oParent.isContextTable()){if(Y){g1.addStyleClass("sapUiCompDirectionLTR");}g1.addStyleClass("sapUiCompUOMInTable");if(this._oParent.getMode()!=="edit"){g1.addStyleClass("sapUiCompUOMInTableDisplay");}}return{control:g1,onCreate:"_onCreateUOM",params:{getValue:true,valuehelp:true,type:$}};};P.prototype._createEdmUOMAttributes=function(n){n=n||{};var Q=this.createUOMDefaultAttributes();var W=P.getBoundPropertiesMapInfoForInnerControl(I.getMetadata().getName(),{propertyName:"value"})[0];var X=n.currency||(this._oMetaData.annotations.uom&&this._oHelper.oAnnotation.isCurrency(this._oMetaData.annotations.uom.property.property));if(X){Q[W]={parts:[{path:this._oMetaData.path},{path:this._oHelper.getUOMPath(this._oMetaData)}],model:this._oMetaData.model,type:this._oTypes.getCurrencyType(this._oMetaData.property)};}else{Q[W]={model:this._oMetaData.model,path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)};}return Q;};P.prototype.createUOMDefaultAttributes=function(){return{textAlign:this._getEdmUOMTextAlignment(),placeholder:this.getAttribute("placeholder"),name:this.getAttribute("name"),change:this._oHelper.getUOMChangeHandler(this._oParent),valueState:this.getValueStateBindingInfoForRecommendationStateAnnotation()};};P.prototype._getEdmUOMTextAlignment=function(){var n=this.getAttribute("textAlign");if(!n){n=y.Initial;}if(n===y.Initial){if(this._oParent.isContextTable()){return y.End;}return y.Begin;}return n;};P.prototype._createEdmUOMDisplay=function(){var n=this,Q=this._oHelper.getUOMPath(this._oMetaData),W=this._getEdmUOMTextAlignment(),X=null,Y=this.getEdmProperty(),Z=sap.ui.getCore().getConfiguration().getRTL(),$=Z&&this._oParent.isContextTable();var _=P.getBoundPropertiesMapInfoForInnerControl(d.getMetadata().getName(),{propertyName:"value"})[0];var a1={textAlign:W};a1[_]={parts:[{path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)},{path:Q}],model:this._oMetaData.model,formatter:this._oTypes.getDisplayFormatter(Y,{currency:this._oHelper.oAnnotation.isCurrency(Y),mask:this._oHelper.oAnnotation.isMasked(Y)}),useRawValues:true};if($){a1.textDirection="LTR";}var b1=this._oParent.getObjectBinding(this._oMetaData.model);this.addObjectBinding(a1,b1);var c1=new d(this._oParent.getId()+"-text",a1);Q=this._oHelper.getUOMPath(this._oMetaData);a1={change:this._oHelper.getUOMChangeHandler(this._oParent,true),textAlign:this._getEdmUOMTextAlignment()};_=P.getBoundPropertiesMapInfoForInnerControl(K.getMetadata().getName(),{propertyName:"value"})[0];a1[_]={model:this._oMetaData.model,path:Q};this.addObjectBinding(a1,b1);this.mapBindings(a1,P._getEmbeddedSmartFieldMapSettings());c1.addStyleClass("smartFieldPaddingRight");c1.addStyleClass("sapUiCompSmartFieldValue");if(this._checkSuppressUnit()){return{control:c1};}X=new K(this._oParent.getId()+"-sfDisp",a1);X.data("configdata",{"configdata":{isInnerControl:true,isUOM:!this._oParent.data("configdata"),model:this._oMetaData.model,navigationPath:this._oMetaData.annotations.uom.navigationPath||null,path:Q,entitySetObject:this._oMetaData.annotations.uom.entitySet,entityType:this._oMetaData.annotations.uom.entityType,property:this._oMetaData.annotations.uom.property,annotations:{valuelist:this._oMetaData.annotations.valuelistuom,text:this._oMetaData.annotations.textuom},modelObject:this._oMetaData.modelObject||this._oModel,onText:function(e1){if(e1){if(e1.setWrapping){e1.setWrapping(false);}if($&&(typeof e1.setTextDirection==="function")){e1.setTextDirection("LTR");}e1.addStyleClass("sapUiCompSmartFieldUnit");}},onInput:function(e1){c1.setLayoutData(new F({growFactor:0}));X.setLayoutData(new F({growFactor:0}));if(e1){if($&&(typeof e1.setTextDirection==="function")){e1.setTextDirection("LTR");}e1.addStyleClass("sapUiCompSmartFieldUnit");}},getContextEditable:function(){return n._oParent.getContextEditable();}}});X.data("errorCheck","setComplexClientErrorSecondOperandNested");var d1=new H({items:[c1,X],fitContainer:true,width:this._oParent.getWidth()});d1.enhanceAccessibilityState=function(e1,f1){this._oParent.enhanceAccessibilityState(e1,f1);}.bind(this);if(this._oParent.isContextTable()){d1.setJustifyContent("End");this._oParent.addStyleClass("sapUiCompUOMInTable");if($){d1.addStyleClass("sapUiCompDirectionLTR");}d1.addStyleClass("sapUiCompUOMInTable");}return{control:d1};};P.prototype._createEdmUOMObjectStatus=function(){var n,Q,W=this.getEdmProperty(),X=this._oTypes.getDisplayFormatter(W,{currency:this._oHelper.oAnnotation.isCurrency(W)}),Y=this._oHelper.getUOMPath(this._oMetaData),Z={};var $=P.getBoundPropertiesMapInfoForInnerControl(m.getMetadata().getName(),{propertyName:"value"})[0];Z[$]={parts:[{path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)},{path:Y}],formatter:function(){var _=X.apply(this,arguments);return _+arguments[1];},useRawValues:true};this._addObjectStatusAttributes(Z);n=this._oParent.getObjectBinding(this._oMetaData.model);this.addObjectBinding(Z,n);Q=new m(this._oParent.getId()+"-objStatus",Z);Q.addStyleClass("sapUiCompUOM");return{control:Q};};P.prototype._createEdmUOMObjectNumber=function(){var n,Q,W,X=this._getEdmUOMTextAlignment();var Y=P.getBoundPropertiesMapInfoForInnerControl(j.getMetadata().getName(),{propertyName:"value"});if(this._oMetaData.annotations.uom&&this._oHelper.oAnnotation.isCurrency(this._oMetaData.annotations.uom.property.property)){n={model:this._oMetaData.model,textAlign:X};n[Y[0]]={parts:[{path:this._oMetaData.path},{path:this._oHelper.getUOMPath(this._oMetaData)}],type:this._oTypes.getCurrencyType(this._oMetaData.property)};n[Y[1]]={path:this._oHelper.getUOMPath(this._oMetaData)};}else{n={model:this._oMetaData.model,textAlign:X};n[Y[0]]={path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)};n[Y[1]]={path:this._oHelper.getUOMPath(this._oMetaData)};}Q=this._oParent.getObjectBinding(this._oMetaData.model);this.addObjectBinding(n,Q);W=new j(this._oParent.getId()+"-objNumber",n);W.addStyleClass("sapUiCompUOM");return{control:W};};P.prototype._createEdmSemantic=function(){var n,Q=this,W=this._oParent.getBindingInfo("value"),X=W.parts[0].path,Y=this.getEdmProperty(),Z=this._oHelper.oAnnotation.getLabel(Y);if(this._oMetaData.annotations.lineitem&&this._oMetaData.annotations.lineitem.labels&&this._oMetaData.annotations.lineitem.labels[X]){Z=this._oMetaData.annotations.lineitem.labels[X];}var $={semanticObject:this._oMetaData.annotations.semantic.defaultSemanticObject,additionalSemanticObjects:this._oMetaData.annotations.semantic.additionalSemanticObjects,semanticObjectLabel:Z,fieldName:X,width:this.getAttribute("width"),createControlCallback:function(){var a1=this.createControl(true);if(a1){return a1.control;}return null;}.bind(this)};var _=this._oHelper.oAnnotation.getText(Y);if(_){$.text={parts:[this._oMetaData.path,this._oHelper.getEdmDisplayPath(this._oMetaData)],model:this._oMetaData.model,formatter:function(a1,b1){if(a1&&b1){return Q._formatDisplayBehaviour("defaultInputFieldDisplayBehaviour",a1,b1);}return a1?a1:"";}};$.navigationTargetsObtained=function(a1){var b1=this.getBinding("text");if(!Array.isArray(b1.getValue())){a1.getParameters().show();return;}var c1=b1.getValue();var d1=Q._getDisplayBehaviourConfiguration("defaultInputFieldDisplayBehaviour")||"idOnly";var e1=r.getTextsFromDisplayBehaviour(d1,c1[0],c1[1]);var f1=a1.getParameters().mainNavigation;if(f1){f1.setDescription(e1.secondText);}a1.getParameters().show(e1.firstText,f1,undefined,undefined);};}else{n=this._oHelper.getUOMPath(this._oMetaData);if(n){$.text={parts:[{path:X},{path:n}],model:this._oMetaData.model,formatter:this._oHelper.oAnnotation.isCurrency(this._oMetaData.annotations.uom.property.property)?r.getAmountCurrencyFormatter():r.getMeasureUnitFormatter(),useRawValues:true};$.uom={path:n};}else{$.text={path:X,model:this._oMetaData.model};}}return{control:new e(this._oParent.getId()+"-sl",$),onCreate:"_onCreate",params:{getValue:"getInnerControlValue"}};};P.prototype._createMultiLineText=function(n){var Q=P.getBoundPropertiesMapInfoForInnerControl(T.getMetadata().getName(),{propertyName:"value"})[0];var W=this.createAttributes(Q,this._oMetaData.property,n.attributesNamesMap);var X=this.getFormatSettings("multiLineSettings");W=q.extend(true,W,X);if(this._oParent.isContextTable()){W.width="100%";}var Y=new T(this._oParent.getId()+"-textArea",W);this._handleEventingForEdmString(Y,this._oMetaData.property);return{control:Y,onCreate:"_onCreate",params:{type:{type:W.value.type,property:this._oMetaData.property},getValue:"getValue"}};};P.prototype._createLink=function(){var n=this,Q=this._oParent,W=Q.getBindingInfo("url");var X={text:"",href:""};var Y=P.getBoundPropertiesMapInfoForInnerControl(L.getMetadata().getName(),{propertyName:"url"})[0];if(W){X[Y]=this._oBinding.toBinding(W);}else{X[Y]=Q.getUrl();}if(Q.hasListeners("press")){X.press=function(d1){d1.preventDefault();Q.firePress(d1);};}var Z=Q.getBindingInfo("value");var $=P.getBoundPropertiesMapInfoForInnerControl(L.getMetadata().getName(),{propertyName:"value"});if(Z){var _=this._oMetaData,a1=_.path,b1=_.property.property;if(_.annotations.text&&(b1.type==="Edm.String")){X[$[0]]={parts:[_.path,this._oHelper.getEdmDisplayPath(_)],formatter:this._formatText.bind(n)};}else if(P.isSpecialLink(b1)){var c1=P[P._getLinkFormatterFunctionName(b1)];X[$[0]]={path:a1};X[$[1]]={path:a1,formatter:null};if(typeof c1==="function"){X[$[1]].formatter=c1;}}else{X[$[0]]=this._oBinding.toBinding(Z);}}else{X[$[0]]=Q.getValue();}return{control:new L(Q.getId()+"-link",X),onCreate:"_onCreate",params:{noValidation:true}};};P.prototype._createEdmBoolean=function(){var n=this._oSelector.checkComboBox(),Q=this._oParent.getEditable()&&this._oParent.getEnabled()&&this._oParent.getContextEditable(),W=this,X=null,Y;if(n.combobox){if(Q||this._oParent.getFetchValueListReadOnly()){return this._createComboBox({valueHelp:{annotation:n.annotation,noDialog:true,noTypeAhead:true},edit:Q});}}var Z,$;if(Q){$=P.getBoundPropertiesMapInfoForInnerControl(C.getMetadata().getName(),{propertyName:"value"})[0];Z=this.createAttributes($,this._oMetaData.property,{},{event:"select",parameter:"selected"});Y=new C(this._oParent.getId()+"-cBoxBool",Z);X={getValue:"getSelected"};}else{$=P.getBoundPropertiesMapInfoForInnerControl(d.getMetadata().getName(),{propertyName:"value"})[0];Z=this.createAttributes($,this._oMetaData.property,{width:true,textAlign:true});Z[$]={model:this._oMetaData.model,path:this._oMetaData.path,formatter:function(_){return W._formatDisplayBehaviour("defaultCheckBoxDisplayBehaviour",_);}};Y=new d(this._oParent.getId()+"-text",Z);}return{control:Y,onCreate:"_onCreate",params:X};};P.prototype._createValueHelp=function(){var n=this._oParent.getContent();if(!n){return;}var Q={annotation:this._oMetaData.annotations.valuelist,noDialog:!this._oParent.getShowValueHelp(),noTypeAhead:!this._oParent.getShowSuggestion(),aggregation:"suggestionRows"};this._getValueHelpDialogTitle(Q);Q.analyser=this._oHelper.getAnalyzer(this._oModel||this._oMetaData.modelObject);this.createValueHelp({control:n,edmProperty:this.getEdmProperty(),valueHelp:Q,model:this._oModel||this._oMetaData.modelObject,onValueListChange:function(W){this._oParent.fireValueListChanged({changes:W.mParameters.changes});}.bind(this)});};P.prototype._checkSuppressUnit=function(){if(this._oParent.data("suppressUnit")==="true"){return true;}var n=this._oParent.getBindingInfo("uomVisible");return(!n&&!this._oParent.getUomVisible());};P.prototype.getEdmProperty=function(){var n=this._oHelper;if(n){return n.getEdmProperty(this._oMetaData);}return null;};P.prototype.getEntityType=function(){if(this._oMetaData){return this._oMetaData.entityType;}return null;};P.prototype._checkLink=function(){var n=this._oParent.getBindingInfo("url"),Q=this.getEdmProperty();if(n||this._oParent.getUrl()||P.isSpecialLink(Q)){return true;}return this._oParent.hasListeners("press");};P._getEmbeddedSmartFieldMapSettings=function(){return{"uomEditable":"editable","uomEnabled":"enabled","uomVisible":"visible","mandatory":"mandatory"};};P.getBoundPropertiesMapInfoForInnerControl=function(n,Q){Q=Q||{};var W=null;switch(n){case"sap.m.Input":case"sap.m.TimePicker":case"sap.m.DatePicker":case"sap.m.DateTimePicker":case"sap.m.TextArea":W={value:["value"]};break;case"sap.m.Text":case"sap.m.ObjectIdentifier":case"sap.ui.comp.navpopover.SmartLink":W={value:["text"]};break;case"sap.m.Link":W={url:["href"],value:["text","href"]};break;case"sap.m.ObjectStatus":W={value:["text","state","icon"]};break;case"sap.m.ObjectNumber":W={value:["number","unit"]};break;case"sap.m.Select":case"sap.m.ComboBox":case"sap.ui.comp.smartfield.DisplayComboBox":W={value:["selectedKey"]};break;case"sap.m.CheckBox":W={value:["selected"]};break;case"sap.ui.comp.smartfield.SmartField":var X=Object.keys(K.getMetadata().getProperties());W={};X.forEach(function(Y,Z,$){W[Y]=[$[Z]];});break;}if(W&&Q.propertyName){return W[Q.propertyName]||null;}return W;};P.isSpecialLink=function(n){return M.isEmailAddress(n)||M.isPhoneNumber(n)||M.isURL(n);};P._getLinkFormatterFunctionName=function(n){return"_format"+M.getLinkDisplayFormat(n);};P._formatEmailAddress=function(n){return"mailto:"+n;};P._formatPhoneNumber=function(n){return"tel:"+n;};P._formatURL=function(n){return U.validate(n)?n:"";};P.prototype._formatText=function(n,Q){if(n&&Q){return this._formatDisplayBehaviour("defaultInputFieldDisplayBehaviour",n,Q);}return n||"";};P.prototype._getCreator=function(n){return this._oSelector.getCreator(n);};P.prototype._onCreate=function(n,Q){var W,X,Y=true,Z=this;if(Q){if(Q.noValidation){Y=false;}if(Q.valuehelp&&this.shouldCreateValueHelpForControl(n)){this._getValueHelpDialogTitle(Q.valuehelp);Q.valuehelp.analyser=this._oHelper.getAnalyzer(this._oModel||this._oMetaData.modelObject);this.createValueHelp({control:n,edmProperty:this.getEdmProperty(),valueHelp:Q.valuehelp,model:this._oModel||this._oMetaData.modelObject,onValueListChange:function($){Z._oParent.fireValueListChanged({changes:$.mParameters.changes});}});}if(Q.getValue){W=Q.getValue;Q.getValue=function(){return n[W]();};}if(Q.type){X=this._oFieldControl.getMandatoryCheck(Q.type.property);if(X){Q.type.type.oFieldControl=X;}}}if(Y){this.addValidations(n,this._oParent.data("errorCheck")||"setSimpleClientError");}if(!this._checkUOM()){n.addStyleClass("sapUiCompSmartFieldValue");}};P.prototype._checkUOM=function(){var n=this._oParent.data("configdata");if(n&&n.configdata){if(n.configdata.onInput||n.configdata.onText){return true;}}return false;};P.prototype.getValueStateBindingInfoForRecommendationStateAnnotation=function(n,Q,W){n=n||this.getEdmProperty();var X=n&&n["com.sap.vocabularies.UI.v1.RecommendationState"];if(!X){return null;}w(!(X.Path===undefined),'Missing "Path" attribute of the "com.sap.vocabularies.UI.v1.RecommendationState" annotation for "'+n.name+'" EDM property of "'+this._oMetaData.entityType.name+'" entity type. - '+this.getMetadata().getName());w(!(X.Path===""),'Missing path name of "com.sap.vocabularies.UI.v1.RecommendationState" annotation for "'+n.name+'" EDM property of "'+this._oMetaData.entityType.name+'" entity type. - '+this.getMetadata().getName());Q=Q||this._oHelper.findProperty(this._oMetaData.entityType.property,X.Path);w(!!Q,'The EDM property was not found in the "'+this._oMetaData.entityType.name+'" entity type. - '+this.getMetadata().getName());if(Q&&(Q.type==="Edm.Byte")){return{model:W||this._oMetaData.model,path:X.Path,formatter:P.formatRecommendationState};}w(Q&&(Q.type==="Edm.Byte"),'The EDM property "'+Q.name+'" of "'+this._oMetaData.entityType.name+'" entity type must be typed as Edm.Byte. - '+this.getMetadata().getName());return null;};P.formatRecommendationState=function(n){switch(n){case 0:return V.None;case 1:return V.Information;case 2:return V.Warning;default:return V.None;}};P.prototype._getDynamicAmountInputFlexItemData=function(n){var Q="sapUiCompSmartFieldFlexItemAmountEdit",W="",X=n.control;if(X&&!X.getVisible()){Q="sapUiCompSmartFieldFlexItemAmountNoUnitEdit";W="100%";}var Y=this._oAmountInputFlexItemData;if(Y&&!Y.bIsDestroyed){Y.setMaxWidth(W);Y.setStyleClass(Q);return Y;}this._oAmountInputFlexItemData=new F({growFactor:1,maxWidth:W,styleClass:Q});return this._oAmountInputFlexItemData;};P.prototype._getStaticUOMInputFlexItemData=function(n){var Q=this._oUOMInputFlexItemData;if(Q&&!Q.bIsDestroyed){return Q;}this._oUOMInputFlexItemData=new F(n);return this._oUOMInputFlexItemData;};P.prototype._getStaticUOMTextFlexItemData=function(n){var Q=this._oUOMTextFlexItemData;if(Q&&!Q.bIsDestroyed){return Q;}this._oUOMTextFlexItemData=new F(n);return this._oUOMTextFlexItemData;};P.prototype._getValueHelpDialogTitle=function(n){n.dialogtitle=this._oParent.getTextLabel();if(!n.dialogtitle){var Q=this.getEdmProperty();n.dialogtitle=this._oHelper.oAnnotation.getLabel(Q)||Q.name;}};P.prototype._onCreateUOM=function(n,Q){var W=n.getItems(),X;this.addValidations(W[0],"setComplexClientErrorFirstOperand");if(Q&&Q.getValue){Q.getValue=function(){return W[0].getValue();};}Q.uom=function(){return W[1].getValue();};Q.uomset=function(Y){W[1].setValue(Y);};if(Q.type){X=this._oFieldControl.getMandatoryCheck(Q.type.property);if(X){Q.type.type.oFieldControl=X;}}};P.prototype.triggerCreationOfInnerControls=function(n,Q){try{this._init(n);this._setUOMEditState();this._bind(Q);}catch(W){v.error(W,null,this.getMetadata().getName());}};P.prototype.bind=function(){if(!(!this._bInitialized&&!this.bPending)){return Promise.resolve();}this._bInitialized=true;var n=this._oFieldControl.getBindablePropertiesNames(),Q=this._oParent.data("configdata");if(Q&&Q.configdata){this.triggerCreationOfInnerControls(this._oMeta,n);return Promise.resolve();}if(!this._oModel){return Promise.resolve();}var W=this._oParent&&this._oParent.isTextInEditModeSourceNotNone();this.bPending=true;var X=this._oModel.getMetaModel().loaded();var Y=X.then(function onMetaModelLoaded(){if(!this._oParent){this.bPending=false;return Promise.reject();}if(W){this._init(this._oMeta);var Z=this._oMetaData.annotations.valuelist;if(typeof Z==="string"){return this._oHelper.loadValueListAnnotation(Z);}else{this.bPending=false;this._setUOMEditState();this._bind(n);return Promise.reject();}}this.bPending=false;this.triggerCreationOfInnerControls(this._oMeta,n);}.bind(this));X.catch(function(Z){v.error("The meta model could not be loaded.",Z,this.getMetadata().getName());}.bind(this));if(W){Y.then(function(Z){if(!this._oParent){return;}this.bPending=false;if(Z){this._initValueList(Z);}this._setUOMEditState();this._bind(n);}.bind(this));}Y.catch(function(Z){if(Z){v.error(Z,null,this.getMetadata().getName()+".onMetaModelLoaded");}}.bind(this));return Y;};P.prototype._bind=function(n){var Q,W=this._oFieldControl.getControlProperties(this._oMetaData,n);for(var X in W){Q=this._oBinding.fromFormatter(this._oMetaData.model,W[X]);this._oParent.bindProperty(X,Q);}this._addLabelAndQuickInfo();this._oParent.fireInitialise();};P.prototype._addLabelAndQuickInfo=function(){var n=this.getDataProperty();n=n.property;var Q=this._oHelper.oAnnotation.getLabel(n);var W=this._oHelper.oAnnotation.getQuickInfo(n);if(Q&&this._oParent.isPropertyInitial("textLabel")){this._oParent.setTextLabel(Q);}if(W&&this._oParent.isPropertyInitial("tooltipLabel")){this._oParent.setTooltipLabel(W);}};P.prototype.rebindOnCreated=function(){var Q,W=this._oFieldControl.getControlProperties(this._oMetaData,["editable"]);for(var n in W){Q=this._oBinding.fromFormatter(this._oMetaData.model,W[n]);this._oParent.bindProperty(n,Q);}};P.prototype._setUOMEditState=function(){if(this._oFieldControl.hasUomEditState(this._oMetaData)){var n=this._oFieldControl.getUOMEditState(this._oMetaData);if(n){var Q=this._oBinding.fromFormatter(this._oMetaData.model,n);this._oParent.bindProperty("uomEditState",Q);}}};P.prototype.getDataProperty=function(){return this._oMetaData.property;};P.prototype.getDropdownItemKeyType=function(n){var Q=n.getMetadata().getName();if((Q==="sap.ui.comp.smartfield.DisplayComboBox")||(Q==="sap.m.ComboBox")||(Q==="sap.m.Select")){var W=P.getBoundPropertiesMapInfoForInnerControl(Q,{propertyName:"value"})[0];var X=n.getBindingInfo(W);return(X&&X.type)||null;}return null;};P.prototype.getMetaData=function(){return this._oMetaData;};P.prototype.getODataHelper=function(){return this._oHelper;};P.prototype.destroy=function(){if(this._oFieldControl){this._oFieldControl.destroy();}if(this._oSelector){this._oSelector.destroy();}if(this._oTypes){this._oTypes.destroy();}if(this._oHelper){this._oHelper.destroy();}this._oHelper=null;this._oFieldControl=null;this._oTypes=null;this._oSelector=null;this._oMetaData=null;this._oAmountInputFlexItemData=null;this._oUOMInputFlexItemData=null;this._oUOMTextFlexItemData=null;this.oAmountField=null;this.bTextInEditModeSourceValidMetadata=false;f.prototype.destroy.apply(this,arguments);};return P;},true);
