/*
 * ! SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/m/List","sap/m/ResponsivePopover","sap/m/CustomListItem","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/syncStyleClass"],function(q,L,R,C,F,a,s){"use strict";var M={isMultiCurrency:function(c){return c==="*";},openMultiCurrencyPopover:function(e,A){var S=sap.ui.getCore().byId(A.smartTableId);var o=S.getTable();var b=o.getBinding("rows");var c=A.currency;var d=A.unit;var f=A.template;var g,D;if(!b||!c||!d){return;}var l=e.getSource();var h=l.getParent();if(A.additionalParent){h=h.getParent();}var j=o.getAnalyticalInfoOfRow(o.getRowForCell(h));if(!j){return;}var i,k=[],m=[c,d],t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_TOTAL_TITLE")||"Total";if(b.aApplicationFilter){k=[].concat(b.aApplicationFilter);}var B=o.getBindingInfo("rows");var n=(B&&B.parameters&&B.parameters.custom)?q.extend(true,{},B.parameters.custom):undefined;if(j.groupTotal||j.group){var G=j.groupedColumns;for(i=0;i<G.length;i++){D=sap.ui.getCore().byId(G[i]).getLeadingProperty();if(!D){continue;}g=b.getAnalyticalInfoForColumn(D);if(g){D=g.dimensionPropertyName;}if(D){k.push(new F(D,a.EQ,j.context.getProperty(D)));}}t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_GROUP_TITLE")||"Subtotal";}else if(!j.grandTotal){var p=Object.getOwnPropertyNames(b.getDimensionDetails());for(i=0;i<p.length;i++){k.push(new F(p[i],a.EQ,j.context.getProperty(p[i])));}t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_GROUP_TITLE")||"Subtotal";}var r=f.clone();r.unbindProperty("visible");var P=A.smartTableId+"-multiUnitPopover",u,v;u=sap.ui.getCore().byId(P);if(!u){v=new L(P+"-detailsList",{showSeparators:"None",ariaLabelledBy:P+"-title"});v.addStyleClass("sapUiContentPadding sapUiCompMultiCurrency");u=new R(P,{content:v});s("sapUiSizeCompact",o,u);o.addDependent(u);}if(!v){v=sap.ui.getCore().byId(P+"-detailsList");}u.setTitle(t);u.setPlacement(j.grandTotal?"VerticalPreferredTop":"VerticalPreferredBottom");v.bindItems({path:b.getPath(),filters:k,parameters:{select:m.join(","),custom:n},templateShareable:false,template:new C({content:[r]})});u.openBy(l);}};return M;},true);
