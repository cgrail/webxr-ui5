/*
 * ! SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(['sap/ui/core/Element','sap/ui/comp/library','./ColumnWrapper','sap/ui/core/CustomData'],function(E,l,C,a){"use strict";var A=l.personalization.AggregationRole;var b=E.extend("sap.ui.comp.personalization.ChartWrapper",{constructor:function(i,s){E.apply(this,arguments);},metadata:{library:"sap.ui.comp",properties:{externalFilters:{type:"sap.m.P13nFilterItem[]",defaultValue:[]}},aggregations:{columns:{type:"sap.ui.comp.personalization.ColumnWrapper",multiple:true,singularName:"column"}},associations:{chart:{type:"sap.chart.Chart",multiple:false}},events:{externalFiltersSet:{parameters:{filters:{type:"sap.m.P13nFilterItem[]"}}}}}});b.prototype.getChartObject=function(){var c=this.getAssociation("chart");if(typeof c==="string"){c=sap.ui.getCore().byId(c);}return c;};b.prototype.getDomRef=function(){var c=this.getChartObject();return c.getDomRef();};b.createChartWrapper=function(c,d,e){var p;var o={};c.getDimensions().forEach(function(D){p=D.data("p13nData");o[p.columnKey]=new C({label:D.getLabel(),tooltip:D.getTooltip(),selected:c.getVisibleDimensions().indexOf(D.getName())>-1,aggregationRole:A.Dimension,role:D.getRole()?D.getRole():D.getMetadata().getProperty("role").getDefaultValue(),sorted:p.sorted,sortOrder:p.sortOrder,customData:new a({key:"p13nData",value:p}),hierarchyLevel:p.hierarchyLevel,chart:c});});c.getMeasures().forEach(function(m){p=m.data("p13nData");o[p.columnKey]=new C({label:m.getLabel(),tooltip:m.getTooltip(),selected:c.getVisibleMeasures().indexOf(m.getName())>-1,aggregationRole:A.Measure,role:m.getRole()?m.getRole():m.getMetadata().getProperty("role").getDefaultValue(),sorted:p.sorted,sortOrder:p.sortOrder,customData:new a({key:"p13nData",value:p}),chart:c});});if(d){d.forEach(function(p){o[p.columnKey]=new C({label:p.label,tooltip:p.tooltip,selected:false,aggregationRole:A.NotDimeasure,sorted:p.sorted,sortOrder:p.sortOrder,customData:new a({key:"p13nData",value:p}),chart:c});if(!o[p.columnKey].getParent()){c.addDependent(o[p.columnKey]);}});}return new b({chart:c,columns:e.map(function(s){return o[s];})});};return b;},true);
