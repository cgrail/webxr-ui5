/*
 * ! SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/comp/library","sap/suite/ui/microchart/library","sap/ui/core/Control","sap/ui/model/odata/CountMode","sap/ui/core/format/DateFormat","sap/m/library","sap/base/Log","sap/ui/comp/smartmicrochart/SmartMicroChartBase"],function(C,M,a,b,D,m,L,S){"use strict";var c=S.extend("sap.ui.comp.smartmicrochart.SmartStackedBarMicroChart",{metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartStackedBarMicroChart.designtime"},renderer:"sap.ui.comp.smartmicrochart.SmartMicroChartRenderer"});c.prototype._CHART_TYPE=["BarStacked"];c.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","BarStacked",true);this.setAggregation("_chart",new M.StackedBarMicroChart(),true);};c.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");o.setSize(this.getSize(),true);o.setWidth(this.getWidth(),true);o.setHeight(this.getHeight(),true);};c.prototype._createAndBindInnerChart=function(){if(!(this._oDataPointAnnotations.Value&&this._oDataPointAnnotations.Value.Path)){L.error("Value DataPoint annotation missing! Cannot create the SmartStackedBarMicroChart");return;}var o=this.getAggregation("_chart"),B=new M.StackedBarMicroChartBar({value:{path:this._oDataPointAnnotations.Value.Path,type:"sap.ui.model.odata.type.Decimal"}});if(this._oDataPointAnnotations.Criticality&&this._oDataPointAnnotations.Criticality.Path){B.bindProperty("valueColor",{path:this._oDataPointAnnotations.Criticality.Path,formatter:this._mapCriticalityTypeWithColor.bind(this)});}var A=this._getPropertyAnnotation.call(this,this._oDataPointAnnotations.Value.Path);var d=A["com.sap.vocabularies.Common.v1.Text"];if(d&&d.Path){B.bindProperty("displayValue",d.Path);}o.bindAggregation("bars",{path:this._getBindingPath(),template:B,events:{change:this._onBindingDataChange.bind(this)}});};c.prototype._onBindingDataChange=function(){var B=this.getAggregation("_chart").getBinding("bars");this._updateAssociations(B);};return c;});
