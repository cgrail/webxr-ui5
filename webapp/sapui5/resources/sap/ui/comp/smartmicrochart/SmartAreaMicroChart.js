/*
 * ! SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/comp/library","sap/suite/ui/microchart/library","sap/ui/core/Control","sap/m/library","sap/ui/model/odata/CountMode","sap/ui/comp/smartmicrochart/SmartMicroChartBase"],function(C,M,a,b,c,S){"use strict";var V=b.ValueColor;var d=S.extend("sap.ui.comp.smartmicrochart.SmartAreaMicroChart",{metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartAreaMicroChart.designtime",properties:{enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:true}}},renderer:"sap.ui.comp.smartmicrochart.SmartMicroChartRenderer"});d.prototype._CHART_TYPE=["Area","Line"];d.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","Area",true);this.setAggregation("_chart",new M.AreaMicroChart(),true);};d.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");o.setWidth(this.getWidth(),true);o.setHeight(this.getHeight(),true);o.setSize(this.getSize(),true);};d.prototype.setShowLabel=function(s){if(this.getShowLabel()!==s){this.setProperty("showLabel",s,true);this.getAggregation("_chart").setProperty("showLabel",s,true);this.invalidate();}return this;};d.prototype.setEnableAutoBinding=function(){return this.setProperty("enableAutoBinding",true,true);};d.prototype.bindElement=function(){return this;};d.prototype._createAndBindInnerChart=function(){this._createChartLabels();this._createChartItem("chart",this._oDataPointAnnotations.Value.Path);this._createChartItem("target",this._oDataPointAnnotations.TargetValue.Path);this._buildThreshold();};d.prototype._buildThreshold=function(){var o=this._oDataPointAnnotations.CriticalityCalculation;if(this._hasMember(o,"ImprovementDirection.EnumMember")){switch(o.ImprovementDirection.EnumMember){case S._MINIMIZE:this._createChartItem("minThreshold",o.ToleranceRangeHighValue.Path,V.Good);this._createChartItem("maxThreshold",o.DeviationRangeHighValue.Path,V.Error);break;case S._MAXIMIZE:this._createChartItem("minThreshold",o.DeviationRangeLowValue.Path,V.Error);this._createChartItem("maxThreshold",o.ToleranceRangeLowValue.Path,V.Good);break;case S._TARGET:this._createChartItem("minThreshold",o.DeviationRangeLowValue.Path,V.Error);this._createChartItem("maxThreshold",o.DeviationRangeHighValue.Path,V.Error);this._createChartItem("innerMinThreshold",o.ToleranceRangeLowValue.Path,V.Good);this._createChartItem("innerMaxThreshold",o.ToleranceRangeHighValue.Path,V.Good);break;default:break;}}};d.prototype._createChartLabels=function(){var l,m=this._getLabelsMap();for(var k in m){l=new M.AreaMicroChartLabel();this.getAggregation("_chart").setAggregation(m[k],l,true);}};d.prototype._createChartItem=function(e,p,f){var P,i;P=new M.AreaMicroChartPoint({x:{path:this._oChartViewMetadata.dimensionFields[0],formatter:this._formatDimension.bind(this)},y:{path:p,type:"sap.ui.model.odata.type.Decimal"}});i=new M.AreaMicroChartItem({points:{path:this._getBindingPath(),template:P,parameters:{countMode:c.None},events:{change:this._onBindingDataChange.bind(this)}},color:f});this.getAggregation("_chart").setAggregation(e,i,true);};d.prototype._onBindingDataChange=function(){var p=this.getAggregation("_chart").getAggregation("chart").getBinding("points");this._updateAssociations(p);this.updateChartLabels.call(this,p);};d.prototype._updateLabel=function(n,D){var l=this.getAggregation("_chart").getAggregation(n);l.setProperty("label",D.text,true);if(D.color){l.setProperty("color",D.color,true);}};d.prototype._getLabelsMap=function(){return{"leftTop":"firstYLabel","rightTop":"lastYLabel","leftBottom":"firstXLabel","rightBottom":"lastXLabel"};};return d;});
