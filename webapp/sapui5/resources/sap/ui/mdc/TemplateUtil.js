/*
 * ! SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/base/ManagedObject","sap/ui/core/XMLTemplateProcessor","sap/ui/model/base/XMLNodeUtils","sap/ui/model/json/JSONModel"],function(M,X,a,J){"use strict";function r(m){var R=m.replace(/\./g,"/");var o=sap.ui.require(R);if(!o){o=sap.ui.requireSync(R);}return o;}function b(C,v,m){if(!m){return;}var o=M.bindingParser(m);if(!o.parts){o={parts:[o]};}for(var j=0;j<o.parts.length;j++){c(C,v,o.parts[j],o);v=v["with"](C,false);}var d=new J(o);C["metadataContexts"]=d.getContext("/");}function c(C,v,o,m){var k=o.name||o.model||undefined;if(m[k]){return;}try{C[k]=v.getContext(o.model+">"+o.path);m[k]=C[k];}catch(e){if(!C["_$error"]){C["_$error"]={};}C["_$error"].sKey=e;}}function t(p,m,C,A){var d=[],l=m.getLibraryName(),e;if(A){Object.keys(A).forEach(function(s){var o=m.getAggregation(s);if(!o){return true;}var f=p.getElementsByTagNameNS(l,s)[0];if(!f){f=document.createElementNS(l,s);p.appendChild(f);e=false;}else{e=true;}if(e&&!o.multiple){return true;}var F=X.loadTemplate(A[s],"aggregation");if(F){var g=F.getAttribute("template:require");if(g){var h=g.split(" ");h.forEach(r);}d.push(C.visitChildNodes(F).then(function(){var i=a.getChildren(F);var P=p.getAttribute("id"),k;if(P){for(var j=0;j<i.length;j++){k=i[j].getAttribute("id");if(k){i[j].setAttribute("id",P+"--"+k);}f.appendChild(i[j]);}}}));}});}return Promise.all(d);}var T={initialTemplating:function(e,v,m,A){var i=r(m),C={},o=i&&i.getMetadata();if(!e.getAttribute("id")){e.setAttribute("id",o.uid());}b(C,v,e.getAttribute("metadataContexts"));var d=v["with"](C,true);return d.visitChildNodes(e).then(function(){return t(e,o,d,A);});}};return T;},false);
