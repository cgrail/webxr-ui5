/*
 * ! SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/mdc/experimental/adapter/odata/ODataBaseAdapter","./ODataPropertyAdapter"],function(O,a){"use strict";var b=O.extend("sap.ui.mdc.experimental.adapter.odata.v2.ODataObjectAdapter",{constructor:function(m){if(!m.path.endsWith("/")){throw Error("Invalid path has to end with /");}m.path=m.path.substring(0,m.path.length-1);O.prototype.constructor.apply(this,[m,{keys:function(){var k=this.schema.key.propertyRef,K=[];for(var i=0;i<k.length;i++){K.push(k[i].name);}if(K.length==1){return K[0];}return K;},properties:function(){var i,p,P={};if(this.schema.property){for(i=0;i<this.schema.property.length;i++){p=this.schema.property[i];P[p.name]=this.child(p.name);}}if(this.schema.navigationProperty){for(i=0;i<this.schema.navigationProperty.length;i++){p=this.schema.navigationProperty[i];P[p.name]=P[p.name]=this.child(p.name);}}return P;},parent:function(){return this.parentPromise("sap/ui/mdc/experimental/adapter/odata/v2/ODataListAdapter",m);},contact:function(){var c=this.getAnnotation("com.sap.vocabularies.Communication.v1.Contact");if(!c){return undefined;}var C={"com.sap.vocabularies.Communication.v1.ContactInformationType/work":"work","com.sap.vocabularies.Communication.v1.ContactInformationType/home":"home","com.sap.vocabularies.Communication.v1.ContactInformationType/preferred":"preferred"};var P={"com.sap.vocabularies.Communication.v1.PhoneType/work":"work","com.sap.vocabularies.Communication.v1.PhoneType/home":"home","com.sap.vocabularies.Communication.v1.PhoneType/preferred":"preferred","com.sap.vocabularies.Communication.v1.PhoneType/voice":"voice","com.sap.vocabularies.Communication.v1.PhoneType/cell":"cell","com.sap.vocabularies.Communication.v1.PhoneType/fax":"fax","com.sap.vocabularies.Communication.v1.PhoneType/video":"video"};var f=function(A,h){return A["EnumMember"].split(" ").map(function(t){return h[t];});};var g=function(A){if(this.getAttribute(A,"String")){return Promise.resolve(this.getAttribute(A,"String"));}var p=this.getAttribute(A,"Path");if(p){var o=this.child(p);return o.visible.then(function(v){return v?o.value:"";});}jQuery.sap.log.warning("Attribute of annotation '"+A+"' is not supported yet.");}.bind(this);var G=function(A){return A.map(function(o){var s={types:f(o["type"],C)};for(var p in o){switch(p){case"street":case"code":case"locality":case"region":case"country":s[this.constants.AddressType[p]]=g(o[p]);break;default:jQuery.sap.log.warning("Attribute '"+p+"' of contact annotation's substructure 'adr' is not supported yet.");}}return s;}.bind(this));}.bind(this);var d=function(A){return A.map(function(o){var s={types:f(o["type"],C)};for(var p in o){switch(p){case"address":s[this.constants.EmailAddressType[p]]=g(o[p]);break;default:jQuery.sap.log.warning("Attribute '"+p+"' of contact annotation's substructure 'email' is not supported yet.");}}return s;}.bind(this));}.bind(this);var e=function(A){return A.map(function(o){var s={types:f(o["type"],P)};for(var p in o){switch(p){case"uri":s[this.constants.PhoneNumberType[p]]=g(o[p]);break;default:jQuery.sap.log.warning("Attribute '"+p+"' of contact annotation's substructure 'tel' is not supported yet.");}}return s;}.bind(this));}.bind(this);return new Promise(function(r){var R={};for(var p in c){switch(p){case"fn":case"photo":case"role":case"title":case"org":R[this.constants.ContactType[p]]=g(c[p]);break;case"adr":R[this.constants.ContactType[p]]=G(c[p]);break;case"email":R[this.constants.ContactType[p]]=d(c[p]);break;case"tel":R[this.constants.ContactType[p]]=e(c[p]);break;default:jQuery.sap.log.warning("Attribute '"+p+"' of contact annotation is not supported yet.");}}r(R);}.bind(this));}}]);this.path=this.path+"/";}});O.prototype.child=function(p){var P={model:this.mMetadataContext.model};P.path=this.path+p;return new a(P);};return b;});
