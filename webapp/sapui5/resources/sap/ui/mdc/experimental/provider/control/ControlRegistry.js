/*!
 * SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(["./Utils","sap/ui/mdc/experimental/provider/BaseControlProvider","sap/ui/mdc/experimental/provider/control/DefaultKnowledgeBase","sap/base/util/ObjectPath","jquery.sap.global"],function(U,C,D,O,q){"use strict";var a={_DefaultProvider:"sap/ui/mdc/experimental/provider/control/DefaultProvider",ControlProvider:C,Utils:U,_aTemplatingNodes:["sap.m.Label","sap.ui.mdc.base.FilterField"],mProviderCache:{},mProviderPromiseCache:{}};a.visitControl=function(m){a._aTemplatingNodes.push(m._sClassName);var p=a.getProviderPath(m);var P=p.replace(new RegExp("[/]","g"),".");q.sap.require(P);var b=O.get(P||"");a.mProviderCache[m._sClassName]=b?new b():null;};a.getTemplateNodes=function(){return a._aTemplatingNodes;};a.setDefaultProvider=function(d){a._DefaultProvider=d;};a.getProvider=function(c){return a.mProviderCache[c];};a.requestProvider=function(c){if(!a.mProviderPromiseCache[c]){a.mProviderPromiseCache[c]=new Promise(function(r,b){if(a.mProviderCache[c]){r(a.mProviderCache[c]);}else{var s=c.replace(new RegExp("[.]","g"),"/");sap.ui.require([s],function(o){var m=o.getMetadata(),p=a.getProviderPath(m);sap.ui.require([p],function(P){a.mProviderCache[c]=new P();r(a.mProviderCache[c]);});});}});}return a.mProviderPromiseCache[c];};a.getProviderPath=function(m){var p;if(m._mSpecialSettings.metadataContexts&&m._mSpecialSettings.metadataContexts.appData&&m._mSpecialSettings.metadataContexts.appData.provider){p=m._mSpecialSettings.metadataContexts.appData.provider;}else{p=a._DefaultProvider;}return p;};a.getTemplatingFunction=function(n){var N="";if(typeof n==='string'){N=n;}else{N=U.className(n);}var v=a._mTemplatingFunctions[N];if(v!=null){return v;}else{return a._mTemplatingFunctions["sap.ui.mdc.Base"];}};a.cleanRegistry=function(p,t){p=(p==null)?true:p;if(p){a._mProviderFunctions={};}t=(t==null)?true:t;if(t){a._mTemplatingFunctions={};}};a.resolveMetadataContextsDeep=function(n,c,A,m){var b=n.children,i=0;for(i=0;i<b.length;i++){var s=U.className(b[i]);if(s&&!b[i].getAttribute("metadataContexts")&&a._mTemplatingFunctions[s]){b[i].setAttribute("metadataContexts",m);}else{a.resolveMetadataContextsDeep(b[i],c,A,m);}}};a.determineWithModel=function(n){var p=n;while(p&&!p.hasAttribute("var")){p=p.parentElement;}if(p){return p.getAttribute("var");}return null;};return a;});
