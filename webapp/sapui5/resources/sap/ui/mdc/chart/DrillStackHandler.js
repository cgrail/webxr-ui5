/*
 * ! SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(['sap/m/ResponsivePopover','sap/m/List','sap/m/Bar','sap/m/SearchField','sap/m/StandardListItem',"sap/ui/core/InvisibleText",'sap/m/library','sap/ui/Device','sap/ui/mdc/chart/DimensionItem'],function(R,L,B,S,c,I,M,D,d){"use strict";var P=M.PlacementType;var e=M.ListType;var f=M.ListMode;var g=function(){};g.createDrillDownPopover=function(C){var l=new L({mode:f.SingleSelectMaster,selectionChange:function(E){if(E&&E.mParameters&&E.mParameters.listItem){if(E.mParameters.listItem.getType()===e.Inactive){return;}var o=E.mParameters.listItem.data("dim");if(o){var m=C.DELEGATE.retrieveAggregationItem("items",o);var a=new d(m.settings);C.addItem(a);}}p.close();}});var s=new B();var p=new R({contentWidth:"25rem",contentHeight:"20rem",placement:P.Bottom,subHeader:s});if(D.system.desktop){var i=new I({});p.setShowHeader(false);p.addContent(i);p.addAriaLabelledBy(i);}else{p.setTitle("View By");}p.addContent(l);C._oDrillDownPopover=p;};g.createDrillBreadcrumbs=function(C){};g.showDrillDownPopover=function(C,m){sap.ui.require([m],function(o){var h=C._oDrillDownPopover.getContent()[1],j,s,k,l;o.retrieveAllMetadata(C).then(function(n){h.removeAllItems();function _(C){var a=C.getAggregation("_chart").getDrillStack();var b=[];a.forEach(function(q){q.dimension.forEach(function(r){if(r!=null&&r!=""&&b.indexOf(r)==-1){b.push(r);}});});return b;}function p(n){var q=n.items.filter(function(a){return a.kind=="Dimension";});if(q){q.sort(function(a,b){if(a.label&&b.label){return a.label.localeCompare(b.label);}});}return q;}j=_(C);s=p(n);for(var i=0;i<s.length;i++){k=s[i];if(j.indexOf(k.name)>-1){continue;}l=new c({title:k.label,type:e.Active});l.data("dim",k);h.addItem(l);}C._oDrillDownPopover.openBy(C._oDrillDownBtn);});});};g.updateDrillBreadcrumbs=function(C){};return g;},true);
