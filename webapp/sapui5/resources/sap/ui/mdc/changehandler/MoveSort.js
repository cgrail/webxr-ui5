/*!
 * SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(['sap/ui/fl/changeHandler/Base'],function(B){"use strict";var M={};M.createChange=function(p){if(!p.control){throw new Error("Invalid control. The existing control object is mandatory");}return{selectorControl:p.control,changeSpecificData:{changeType:"moveSort",content:{path:p.key,relativePosition:p.relativePosition}}};};M.completeChangeContent=function(c,s,p){};M.applyChange=function(c,C,p){if(!C.getUiState){return B.markAsNotApplicable("We can apply the 'moveSort' change only during runtime, therefore the change can not be applied during XML processing.",true);}var u=p.modifier.getAggregation(C,"uiState");if(!u){u=p.modifier.createControl("sap.ui.mdc.base.state.UiState",p.appComponent,p.view,undefined);p.modifier.insertAggregation(C,"uiState",u);}var s=p.modifier.getAggregation(u,"sortOrders");var S=s.filter(function(o){return o.getPropertyName()===c.getContent().path;});var i=S[0]?p.modifier.findIndexInParentAggregation(S[0]):s.length;c.setRevertData({relativePosition:i});p.modifier.removeAggregation(u,"sortOrders",S[0]);p.modifier.insertAggregation(u,"sortOrders",S[0],c.getContent().relativePosition);if(C.applyFiltersAfterChangesApplied){C.applyFiltersAfterChangesApplied();}};M.revertChange=function(c,C,p){if(!C.getUiState){return B.markAsNotApplicable("We can apply the 'moveSort' change only during runtime, therefore the change can not be applied during XML processing.",true);}var u=p.modifier.getAggregation(C,"uiState");if(!u){u=p.modifier.createControl("sap.ui.mdc.base.state.UiState",p.appComponent,p.view,undefined);p.modifier.insertAggregation(C,"uiState",u);}var s=p.modifier.getAggregation(u,"sortOrders").filter(function(S){return S.getPropertyName()===c.getContent().path;});p.modifier.removeAggregation(u,"sortOrders",s[0]);p.modifier.insertAggregation(u,"sortOrders",s[0],c.getRevertData().relativePosition);c.resetRevertData();if(C.applyFiltersAfterChangesApplied){C.applyFiltersAfterChangesApplied();}};return M;},true);
