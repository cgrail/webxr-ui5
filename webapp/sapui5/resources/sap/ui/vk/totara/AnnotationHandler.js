sap.ui.define(["jquery.sap.global","./TotaraUtils"],function(q,T){"use strict";var A=function(){};function a(s,b,c,l,m){l.material=m;s.sceneBuilder.insertLeaderLine(b,c,l);}A.setAnnotation=function(s,c){if(T.checkError(c)){return c;}c.annotations.forEach(function(b){var v=s.contextMap.values();var d=v.next();while(!d.done){var e=d.value;d=v.next();var n=e.annotationNodeMap.get(b.id);if(n){s.sceneBuilder.createAnnotation(e.sceneId,n,b);for(var i=0,l=b.leaderLines.length;i<l;i++){var f=b.leaderLines[i];var m=s.sceneBuilder.getMaterial(f.materialId);if(m){a(s,e.sceneId,b.id,f,m);}else{var g=s.leaderLineMaterialIdMap.get(f.materialId);if(!g){g=[];s.leaderLineMaterialIdMap.set(f.materialId,g);}g.push({sceneId:e.sceneId,annotationId:b.id,leaderLine:f});s.materialIdsToRequest.add(f.materialId);}}}}});};A.updateMaterials=function(s,c){c.materials.forEach(function(m){var l=s.leaderLineMaterialIdMap.get(m.id);if(l){s.leaderLineMaterialIdMap.delete(m.id);m=s.sceneBuilder.getMaterial(m.id);l.forEach(function(i){a(s,i.sceneId,i.annotationId,i.leaderLine,m);});}});};return A;});
