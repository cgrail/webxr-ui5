sap.ui.define(["jquery.sap.global","./IndexCompressor"],function(q,I){"use strict";var a=1;var H=2;var b=4;var V=0;var c=3;var P=Math.PI*2;var G=function(){};G.getGeometryInfo=function(g,f){var h=new DataView(f.buffer,f.byteOffset,f.byteLength);var o=0;var k=(g.flags&H)>0;var l=(g.flags&b)>0;var m=(g.flags&a)>0;var n=false;var p=[];var r=[];var u=[];var s=[];var t=1;var v=1;var w=1;var x=new THREE.Vector3(0,0,0);var y=[x.x-t/2,x.y-v/2,x.z-w/2,x.x+t/2,x.y+v/2,x.z+w/2];var z=new I(f,f.length);z.setCurByte(o);if(!z.ReadCommand()){throw"buffer over flow";}var A=z.rvalue;var B;if(A){B=U(z,g.pointCount,A,y,p);if(B.isOk){p=B.array;n=true;}else{return false;}}var C=1;if(k){if(!z.ReadCommand()){return false;}C=z.rvalue;if(C){B=d(z,g.pointCount,C);if(B.isOk){r=B.array;}else{return false;}}}var D=1;var N=false;if(l){if(!z.ReadCommand()){return false;}D=z.rvalue;if(D){B=e(z,g.pointCount,D);if(B.isOk){N=true;u=B.array;}else{return false;}}}if(!A||!C||!D||N){if(N){o=z.getCurByte();var E=h.getFloat32(o,true);var F=h.getFloat32(o+4,true);z.moveCurByte(8);if((E!==0.0)||(F!==1.0)){var J=F-E;for(var K=0;K<g.pointCount*2;K++){u[K]=u[K]*J+E;}}}var L;if(!A){o=z.getCurByte();for(L=0;L<g.pointCount;L++){p.push(h.getFloat32(o+L*4,true));p.push(h.getFloat32(o+(L+g.pointCount)*4,true));p.push(h.getFloat32(o+(L+g.pointCount*2)*4,true));}z.moveCurByte(g.pointCount*3*4);}if(!C){o=z.getCurByte();for(L=0;L<g.pointCount;L++){r.push(h.getFloat32(o+(L)*4,true));r.push(h.getFloat32(o+(L+g.pointCount*1)*4,true));r.push(h.getFloat32(o+(L+g.pointCount*2)*4,true));}z.moveCurByte(g.pointCount*3*4);}if(!D){if(l){o=z.getCurByte();for(L=0;L<g.pointCount;L++){u.push(h.getFloat32(o+(L)*4,true));u.push(h.getFloat32(o+(L+g.pointCount*1)*4,true));}z.moveCurByte(g.pointCount*2*4);}}}var M=z.getCurByte();z.Reset();z.setCurByte(M);var O=[0,0,0];var Q=m?2:3;for(var i=0;i<g.elementCount;i++){for(var j=0;j<Q;j++){if(!z.ReadCommand(O[j])){throw"UIC1 Decompression error!!!";}else{s.push(z.rvalue);O[j]=z.rvalue;}}}var R={};R.isPolyline=m;R.isPositionQuantized=n;R.data={};R.data.indices=s;R.data.points=p;R.data.normals=r;R.data.uvs=u;R.id=g.id;return R;};function U(f,p,n,g){var r={array:new Array(p*3),isOk:false};for(var x=0;x<3;x++){var v=g[V+x];var h=(g[c+x]-v)/n;for(var i=0;i<p;i++){if(!f.ReadCommand()){return r;}r.array[i*3+x]=h*f.rvalue+v;}}r.isOk=true;return r;}function d(i,p,n){var r={array:[],isOk:false};var t=[];var f;for(f=0;f<p;f++){if(!i.ReadCommand()){return r;}t.push(i.rvalue);}var g=P/n;var h;var j;var k;for(f=0;f<p;f++){if(!i.ReadCommand()){return r;}h=g*t[f];j=g*i.rvalue;k=Math.sin(j);r.array.push(k*Math.cos(h));r.array.push(k*Math.sin(h));r.array.push(Math.cos(j));}r.isOk=true;return r;}function e(f,p,n){var r={array:new Array(p*2),isOk:false};var g=1.0/n;for(var u=0;u<2;u++){for(var i=0;i<p;i++){if(!f.ReadCommand()){return false;}r.array[i*2+u]=g*f.rvalue;}}r.isOk=true;return r;}return G;});
