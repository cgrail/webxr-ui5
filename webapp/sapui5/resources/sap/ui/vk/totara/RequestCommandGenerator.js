sap.ui.define(["jquery.sap.global","./Generator","./Coder","./Commands"],function(q,G,C,c){"use strict";var R=function(){var m=128;var d=128;var e=128;var s=128;var t=128;var g=32;var f;var h;var i;var j;var k;var l;var n;var o;var v;var p;var r;this.init=function(){f=new Set();h=new Set();i=new Set();k=new Map();j=[];l=[];n=new Set();o=new Set();v=new Set();p=null;r=null;};this.init();this.setSceneIdAndContext=function(a,b){p=a;r=b;};this.pushMeshIds=function(a){u(f,a);};this.pushMaterialIds=function(a){u(h,a);};this.pushImageIds=function(a){u(i,a);};this.pushGeometryIds=function(x){x.forEach(function(a,b){k.set(b,a);j.push(b);});j.sort(function(a,b){return k.get(a)-k.get(b);});};this.pushAnnotationIds=function(a){l=l.concat(a);};this.pushTrackIds=function(a){u(n,a);};this.pushSequenceIds=function(a,p){u(o,a);};this.pushViewIds=function(a,p){u(v,a);};this.canGenerateCommand=function(){return f.size>0||h.size>0||i.size>0||j.length>0||n.size>0||o.size>0||v.size>0;};this.clearContent=function(){f.clear();h.clear();i.clear();j=[];n.clear();o.clear();v.clear();};this.generateRequestCommand=function(a,b,x){var y;var z;if(f.size>0){y=w(f,m);z=G.createGetContentCommand(c.getMesh,y,x);}else if(l.length>0){y=l.splice(0,d);z=G.createGetContentCommand(c.getAnnotation,y,x,p);}else if(h.size>0){y=w(h,e);z=G.createGetContentCommand(c.getMaterial,y,x);}else if(j.length>0){y=j.splice(j.length-g);z=G.createGetContentCommand(c.getGeometry,y,x);z.resources=y;y.forEach(function(B){k.delete(B);});}else if(i.size>0){y=w(i,1);z=G.createGetContentCommand(c.getImage,y,x);z.resources=y;}else if(o.size>0){y=w(o,s);z=G.createRequestContentCommandWtihScenId(c.getSequence,y,p,x);}else if(n.size>0){y=w(n,t);z=G.createGetContentCommand(c.getTrack,y,x);}else if(v.size>0){var A=v.values(),B=A.next().value;if(B!=undefined){var D=r.includeHidden!==undefined?r.includeHidden:false;var E=r.includeAnimation!==undefined?r.includeAnimation:true;var F={sceneId:p,id:B,token:x,includeHidden:D,includeAnimation:E};var H=G.createGetViewCommand(F);z={command:H,method:c.getView};v.delete(B);}}if(z){if(!a){z.command=C.encode(z.command);}return z;}return null;};function u(a,b){b.forEach(function(x){a.add(x);});}function w(a,b){var x=[];for(var y=a.values(),z=y.next().value;z!=undefined&&x.length<b;z=y.next().value){x.push(z);a.delete(z);}return x;}};return R;});
