/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/ui/base/EventProvider"],function(q,E){"use strict";var I=E.extend("sap.ui.vk.InputDeviceTouch",{metadata:{publicMethods:["isSupported","enable","disable"]},constructor:function(L){this._loco=L;this._points=0;this._touchdownProxy=this._ontouchdown.bind(this);this._touchupProxy=this._ontouchup.bind(this);this._touchmoveProxy=this._ontouchmove.bind(this);}});I.prototype._eventToInput=function(e){var a={x:0,y:0,z:0,d:0,n:e.touches.length,buttons:0,scroll:0,points:[],handled:false,jqueryEvent:e};for(var i=0;i<a.n;i++){var b=e.touches[i];a.points.push({x:b.pageX,y:b.pageY,z:0});}return a;};I.prototype._ontouchdown=function(e){var i=this._eventToInput(e);if(this._points!=0&&this._points!=i.n){this._loco.endGesture(i,this._control);}this._points=i.n;i.handled=false;this._loco.beginGesture(i,this._control);if(i.handled){e["_sapui_handledByControl"]=true;e.preventDefault();}};I.prototype._ontouchup=function(e){var i=this._eventToInput(e);this._loco.endGesture(i,this._control);this._points=0;if(i.handled){e["_sapui_handledByControl"]=true;e.preventDefault();}};I.prototype._ontouchmove=function(e){var i=this._eventToInput(e);if(this._points!=i.n){this._loco.endGesture(i,this._control);i.handled=false;this._loco.beginGesture(i,this._control);this._points=i.n;}else{this._loco.move(i,this._control);}if(i.handled){e["_sapui_handledByControl"]=true;e.preventDefault();}};I.prototype.isSupported=function(){return typeof window.ontouchstart!=="undefined";};I.prototype.enable=function(c){this._points=0;this._control=c;var f=this._control?this._control.attachBrowserEvent.bind(this._control):window.document.addEventListener;f("touchstart",this._touchdownProxy);f("touchend",this._touchupProxy);f("touchmove",this._touchmoveProxy);};I.prototype.disable=function(){var f=this._control?this._control.detachBrowserEvent.bind(this._control):window.document.removeEventListener;f("touchstart",this._touchdownProxy);f("touchend",this._touchupProxy);f("touchmove",this._touchmoveProxy);};return I;},true);
