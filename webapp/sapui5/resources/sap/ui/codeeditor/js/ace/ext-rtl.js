ace.define("ace/ext/rtl",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/editor","ace/config"],function(r,a,m){"use strict";var d=r("ace/lib/dom");var l=r("ace/lib/lang");var c=[{name:"leftToRight",bindKey:{win:"Ctrl-Alt-Shift-L",mac:"Command-Alt-Shift-L"},exec:function(e){e.session.$bidiHandler.setRtlDirection(e,false);},readOnly:true},{name:"rightToLeft",bindKey:{win:"Ctrl-Alt-Shift-R",mac:"Command-Alt-Shift-R"},exec:function(e){e.session.$bidiHandler.setRtlDirection(e,true);},readOnly:true}];var E=r("../editor").Editor;r("../config").defineOptions(E.prototype,"editor",{rtlText:{set:function(v){if(v){this.on("session",f);this.on("changeSelection",o);this.renderer.on("afterRender",u);this.commands.on("exec",b);this.commands.addCommands(c);}else{this.off("session",f);this.off("changeSelection",o);this.renderer.off("afterRender",u);this.commands.off("exec",b);this.commands.removeCommands(c);g(this.renderer);}this.renderer.updateFull();}}});function o(e,h){var i=h.getSelection().lead;if(h.session.$bidiHandler.isRtlLine(i.row)){if(i.column===0){if(h.session.$bidiHandler.isMoveLeftOperation&&i.row>0){h.getSelection().moveCursorTo(i.row-1,h.session.getLine(i.row-1).length);}else{if(h.getSelection().isEmpty())i.column+=1;else i.setPosition(i.row,i.column+1);}}}}function b(e){e.editor.session.$bidiHandler.isMoveLeftOperation=/gotoleft|selectleft|backspace|removewordleft/.test(e.command.name);}function f(e,s){s.$bidiHandler.currentRow=null;if(s.$bidiHandler.isRtlLine(e.start.row)&&e.action==='insert'&&e.lines.length>1){for(var h=e.start.row;h<e.end.row;h++){if(s.getLine(h+1).charAt(0)!==s.$bidiHandler.RLE)s.getDocument().$lines[h+1]=s.$bidiHandler.RLE+s.getLine(h+1);}}}function u(e,h){var s=h.session;var $=s.$bidiHandler;var i=h.$textLayer.$lines.cells;var w=h.layerConfig.width-h.layerConfig.padding+"px";i.forEach(function(j){var k=j.element.style;if($&&$.isRtlLine(j.row)){k.direction="rtl";k.textAlign="right";k.width=w;}else{k.direction="";k.textAlign="";k.width="";}});}function g(e){var h=e.$textLayer.$lines;h.cells.forEach(i);h.cellCache.forEach(i);function i(j){var s=j.element.style;s.direction=s.textAlign=s.width="";}}});(function(){ace.require(["ace/ext/rtl"],function(m){if(typeof module=="object"&&typeof exports=="object"&&module){module.exports=m;}});})();
