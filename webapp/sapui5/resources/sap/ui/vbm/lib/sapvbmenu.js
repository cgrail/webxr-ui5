VBI.Menus=
function(){"use strict";var m={};m.m_menus=[];m.clear=function(){for(var n=m.m_menus.length-1;n>=0;--n){m.m_menus[n].destroy();m.m_menus.pop();}m.m_menus=[];};m.loadMainMenu=function(d,c){var M=new sap.ui.unified.Menu();m.loadMenu(M,d,c,M.getId());M.vbi_data={};M.vbi_data.menuRef=d.id;M.vbi_data.VBIName=d.name;M.attachItemSelect(function(e){var r={};r.refid=e.mParameters.item.vbi_data.refid;r.menu=M;m.OnSelected(r);});m.m_menus.push(M);return M;};m.loadMenu=function(M,d,c,i){var a=jQuery.type(d.MenuItem)=='object';var b=(a?1:d.MenuItem.length);for(var e=0;e<b;++e){var s=(a?d.MenuItem:d.MenuItem[e]);if(s.active=="false"){continue;}var f;f=i+"_"+e;var t=s.Separator==undefined?s.text:"---------------------------";var o=new sap.ui.unified.MenuItem("vbimi_"+f,{text:t});o.vbi_data={};if((s.disabled=="true")||(s.Separator!=undefined)){o.setEnabled(false);}M.addItem(o);if(s.icon){o.setIcon(s.icon);}if(VBI.m_bTrace){VBI.Trace("Adding Menuitem: menuitem_"+f+" with text "+t);}if(s.MenuItem!=undefined){var S=new sap.ui.unified.Menu("vbim_"+f);o.setSubmenu(S);m.loadMenu(S,s,c,f);}else if(s.id!=""){o.vbi_data.refid=s.id;}}};m.deleteMenu=function(a){var i=m.findMenuIdxByName(a);if(i>=0){var l=m.m_menus.length-1;m.m_menus[i].destroy();if(i!=l){m.m_menus[i]=m.m_menus[l];}m.m_menus.pop();return i;}return-1;};m.getMainScene=function(c){if(c.m_SceneManager.m_SceneArray.length==1){return c.m_SceneManager.m_SceneArray[0].m_ID;}return undefined;};m.load=function(d,c){sap.ui.getCore().loadLibrary("sap.ui.unified");m.m_context=c;if(d.Set){if(d.Set.name!=undefined){m.deleteMenu(d.Set.name);}else{m.clear();}if(jQuery.type(d.Set)=='object'){if(d.Set.Menu){m.loadMainMenu(d.Set.Menu,c);}}else if(jQuery.type(d.Set)=='array'){for(var n=0;n<d.Set.length;++n){if(d.Set[n].Menu){m.loadMainMenu(d.Set[n].Menu,c);}}}}};m.findMenuByID=function(a){if(m.m_menus){for(var i=0;i<m.m_menus.length;++i){if(m.m_menus[i].vbi_data.menuRef==a){return m.m_menus[i];}}}return null;};m.findMenuIdxByName=function(a){if(m.m_menus){for(var i=0;i<m.m_menus.length;++i){if(m.m_menus[i].vbi_data.VBIName==a){return i;}}}return-1;};m.OnSelected=function(r){var a=r.menu.vbi_data.object;if(r.refid==undefined){return;}var s=m.m_context.m_SceneManager.GetSceneByName(r.menu.vbi_data.scene);var b=m.m_context.m_Actions;if(b){if(b.findAction("ContextMenu",s,a)){var c=new VBI.Actions.Action();c.m_name="FCODE_SELECT";c.m_id=r.refid;s.m_Ctx.FireAction(c,s,a,null,null,r.menu.vbi_data.instance);}}};return m;}
;
