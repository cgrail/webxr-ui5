/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
sap.ui.define(['./VoAggregation','./library'],function(V,l){"use strict";var C=V.extend("sap.ui.vbm.Containers",{metadata:{library:"sap.ui.vbm",defaultAggregation:"items",aggregations:{items:{type:"sap.ui.vbm.Container",multiple:true,singularName:"item"}},events:{}}});C.prototype.getBindInfo=function(){var b=V.prototype.getBindInfo.apply(this,arguments);var t=this.getTemplateBindingInfo();b.P=(t)?t.hasOwnProperty("position"):true;b.AL=(t)?t.hasOwnProperty("alignment"):true;return b;};C.prototype.getTemplateObject=function(){var t=V.prototype.getTemplateObject.apply(this,arguments);var b=this.mBindInfo=this.getBindInfo();var v=(b.hasTemplate)?this.getBindingInfo("items").template:null;t["type"]="{00100000-2012-0004-B001-2297943F0CE6}";t["key.bind"]=t.id+".IK";if(b.P){t["pos.bind"]=t.id+".P";}else{t.pos=v.getPosition();}if(b.AL){t["alignment.bind"]=t.id+".AL";}else{t.alignment=v.getAlignment();}return t;};C.prototype.getTypeObject=function(){var t=V.prototype.getTypeObject.apply(this,arguments);var b=this.mBindInfo;t.A.push({"name":"IK","alias":"IK","type":"key"});if(b.P){t.A.push({"changeable":"true","name":"P","alias":"P","type":"vector"});}if(b.AL){t.A.push({"name":"AL","alias":"AL","type":"string"});}return t;};C.prototype.getActionArray=function(){var a=V.prototype.getActionArray.apply(this,arguments);var i=this.getId();if(this.mEventRegistry["click"]||this.isEventRegistered("click")){a.push({"id":i+"1","name":"click","refScene":"MainScene","refVO":i,"refEvent":"Click","AddActionProperty":[{"name":"pos"}]});}if(this.mEventRegistry["contextMenu"]||this.isEventRegistered("contextMenu")){a.push({"id":i+"2","name":"contextMenu","refScene":"MainScene","refVO":i,"refEvent":"ContextMenu"});}return a;};C.prototype.handleContainerCreated=function(e){var c=this.findInstance(e.mParameters.id);var i=c.getItem();if(i){var d=e.getParameter("contentarea");d.addEventListener("click",this,false);d.addEventListener("contextmenu",this,false);var p;if((p=this.getParent())){var a=d.id;p.addRenderItem(i,a);}}};C.prototype.handleContainerDestroyed=function(e){var d=e.getParameter("contentarea");d.removeEventListener("click",this,false);d.removeEventListener("contextmenu",this,false);};C.prototype.findInstance=function(k){var v=this.getItems();if(!v){return false;}for(var n=0,a=this.aUniqueIdx.length;n<a;++n){if(this.aUniqueIdx[n]===k){return v[n];}}return null;};C.prototype.handleEvent=function(E){var c=E.currentTarget.m_Key;var o=this.findInstance(c);switch(E.type){case"click":o.fireClick();this.fireClick({instance:o});break;case"contextmenu":var a={};var m=this.oParent.getDomRef().getBoundingClientRect();o.mClickPos=[E.clientX-m.left,E.clientY-m.top];sap.ui.getCore().loadLibrary("sap.ui.unified");try{if(this.oParent.mVBIContext.m_Menus){this.oParent.mVBIContext.m_Menus.deleteMenu("DynContextMenu");}var M=new sap.ui.unified.Menu();M.vbi_data={};M.vbi_data.menuRef="CTM";M.vbi_data.VBIName="DynContextMenu";a.menu=M;E.preventDefault();o.fireContextMenu(a);a.instance=o;this.fireContextMenu(a);}catch(e){}break;}};return C;});
