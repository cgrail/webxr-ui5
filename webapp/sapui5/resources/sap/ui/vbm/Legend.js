/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
sap.ui.define(['sap/ui/core/Element','./library'],function(E,l){"use strict";var L=E.extend("sap.ui.vbm.Legend",{metadata:{library:"sap.ui.vbm",properties:{caption:{type:"string",group:"Misc",defaultValue:sap.ui.getCore().getLibraryResourceBundle("sap.ui.vbm.i18n").getText("CAPTION_LEGEND")}},defaultAggregation:"items",aggregations:{items:{type:"sap.ui.vbm.LegendItem",multiple:true,singularName:"item"}},events:{click:{parameters:{data:{type:"object"},row:{type:"int"},ctrlKey:{type:"boolean"},shiftKey:{type:"boolean"},metaKey:{type:"boolean"},altKey:{type:"boolean"}}}}}});L.prototype.init=function(){};L.prototype.getTemplateObject=function(){var i=this.getId();var w={};if(this.getParent().getLegendVisible()){w={"Set":[{"name":i,"Window":{"id":i,"type":"legend","caption":this.getCaption(),"refParent":"Main","refScene":"","modal":"true","datasource":i,"colors.bind":i+".C","images.bind":i+".I","texts.bind":i+".T","tooltips.bind":i+".TT"}}]};if(this.getParent().m_curLegendPos){w.Set[0].Window.right=this.getParent().m_curLegendPos.right.toString();w.Set[0].Window.top=this.getParent().m_curLegendPos.top.toString();}}else{w={"Remove":[{"name":i}]};}return w;};L.prototype.getTypeObject=function(){return{"name":this.getId(),"A":[{"name":"C","alias":"C","type":"color"},{"name":"I","alias":"I","type":"string"},{"name":"T","alias":"T","type":"string"},{"name":"TT","alias":"TT","type":"string"}]};};L.prototype.getDataObject=function(){var d={};d['name']=this.getId();d.E=[];var v=this.getItems();for(var n=0,a=v.length;n<a;++n){d.E.push(v[n].getDataElement());}return d;};L.prototype.handleEvent=function(e){var s=e.Action.name;var f="fire"+s[0].toUpperCase()+s.slice(1);var p={data:e,ctrlKey:e.Action.Params.Param[1]['#'],shiftKey:e.Action.Params.Param[2]['#'],metaKey:e.Action.Params.Param[3]['#'],altKey:e.Action.Params.Param[4]['#']};var a;if((a=this.findInstance(e.Action.Params.Param[0]['#']))){if(a.mEventRegistry[s]){if(s=="click"){a[f](p);}}}p.row=parseInt(e.Action.Params.Param[0]['#'],10);this[f](p);};L.prototype.getActionArray=function(){var i=this.getId();var a=[];if(this.mEventRegistry["click"]||this.isEventRegistered("click")){a.push({"id":i+"1","name":"click","refScene":"MainScene","refVO":i,"refEvent":"Click"});}return a;};L.prototype.isEventRegistered=function(n){var v=this.getItems();if(!v){return false;}for(var a=0,b=v.length;a<b;++a){var i=v[a];if(i.mEventRegistry[n]){return true;}}return false;};L.prototype.findInstance=function(k){var v=this.getItems();(v[0].sId).lastIndexOf('-');v=this.getItems();if(!v){return false;}for(var n=0,a=v.length;n<a;++n){var i=v[n].sId;var b=i.lastIndexOf('-');var r=i.substring(b+1);if(r===k){return v[n];}}return null;};return L;});
