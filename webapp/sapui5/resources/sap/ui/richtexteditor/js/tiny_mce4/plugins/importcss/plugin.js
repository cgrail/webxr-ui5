(function(){var i=(function(){'use strict';var g=tinymce.util.Tools.resolve('tinymce.PluginManager');var a=tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');var b=tinymce.util.Tools.resolve('tinymce.EditorManager');var c=tinymce.util.Tools.resolve('tinymce.Env');var d=tinymce.util.Tools.resolve('tinymce.util.Tools');var s=function(e){return e.getParam('importcss_merge_classes');};var f=function(e){return e.getParam('importcss_exclusive');};var h=function(e){return e.getParam('importcss_selector_converter');};var j=function(e){return e.getParam('importcss_selector_filter');};var k=function(e){return e.getParam('importcss_groups');};var l=function(e){return e.getParam('importcss_append');};var m=function(e){return e.getParam('importcss_file_filter');};var $={shouldMergeClasses:s,shouldImportExclusive:f,getSelectorConverter:h,getSelectorFilter:j,getCssGroups:k,shouldAppend:l,getFileFilter:m};var r=function(e){var D=c.cacheSuffix;if(typeof e==='string'){e=e.replace('?'+D,'').replace('&'+D,'');}return e;};var n=function(e,D){var E=e.settings,F=E.skin!==false?E.skin||'lightgray':false;if(F){var G=E.skin_url?e.documentBaseURI.toAbsolute(E.skin_url):b.baseURL+'/skins/'+F;return D===G+'/content'+(e.inline?'.inline':'')+'.min.css';}return false;};var o=function(e){if(typeof e==='string'){return function(D){return D.indexOf(e)!==-1;};}else if(e instanceof RegExp){return function(D){return e.test(D);};}return e;};var p=function(D,E,F){var G=[],H={};function I(J,K){var L=J.href,M;L=r(L);if(!L||!F(L,K)||n(D,L)){return;}d.each(J.imports,function(J){I(J,true);});try{M=J.cssRules||J.rules;}catch(e){}d.each(M,function(N){if(N.styleSheet){I(N.styleSheet,true);}else if(N.selectorText){d.each(N.selectorText.split(','),function(O){G.push(d.trim(O));});}});}d.each(D.contentCSS,function(J){H[J]=true;});if(!F){F=function(J,K){return K||H[J];};}try{d.each(E.styleSheets,function(J){I(J);});}catch(e){}return G;};var q=function(e,D){var E;var F=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(D);if(!F){return;}var G=F[1];var H=F[2].substr(1).split('.').join(' ');var I=d.makeMap('a,img');if(F[1]){E={title:D};if(e.schema.getTextBlockElements()[G]){E.block=G;}else if(e.schema.getBlockElements()[G]||I[G.toLowerCase()]){E.selector=G;}else{E.inline=G;}}else if(F[2]){E={inline:'span',title:D.substr(1),classes:H};}if($.shouldMergeClasses(e)!==false){E.classes=H;}else{E.attributes={class:H};}return E;};var t=function(e,D){return d.grep(e,function(E){return!E.filter||E.filter(D);});};var u=function(e){return d.map(e,function(D){return d.extend({},D,{original:D,selectors:{},filter:o(D.filter),item:{text:D.title,menu:[]}});});};var v=function(e,D){return D===null||$.shouldImportExclusive(e)!==false;};var w=function(e,D,E,F){return!(v(e,E)?D in F:D in E.selectors);};var x=function(e,D,E,F){if(v(e,E)){F[D]=true;}else{E.selectors[D]=true;}};var y=function(e,D,E,F){var G;if(F&&F.selector_converter){G=F.selector_converter;}else if($.getSelectorConverter(e)){G=$.getSelectorConverter(e);}else{G=function(){return q(e,E);};}return G.call(D,E,F);};var z=function(D){D.on('renderFormatsMenu',function(e){var E={};var F=o($.getSelectorFilter(D)),G=e.control;var H=u($.getCssGroups(D));var I=function(J,K){if(w(D,J,K,E)){x(D,J,K,E);var L=y(D,D.plugins.importcss,J,K);if(L){var M=L.name||a.DOM.uniqueId();D.formatter.register(M,L);return d.extend({},G.settings.itemDefaults,{text:L.title,format:M});}}return null;};if(!$.shouldAppend(D)){G.items().remove();}d.each(p(D,e.doc||D.getDoc(),o($.getFileFilter(D))),function(J){if(J.indexOf('.mce-')===-1){if(!F||F(J)){var K=t(H,J);if(K.length>0){d.each(K,function(M){var L=I(J,M);if(L){M.item.menu.push(L);}});}else{var L=I(J,null);if(L){G.add(L);}}}}});d.each(H,function(J){if(J.item.menu.length>0){G.add(J.item);}});e.control.renderNew();});};var A={defaultConvertSelectorToFormat:q,setup:z};var B=function(e){var y=function(D){return A.defaultConvertSelectorToFormat(e,D);};return{convertSelectorToFormat:y};};var C={get:B};g.add('importcss',function(e){A.setup(e);return C.get(e);});function P(){}return P;}());})();
