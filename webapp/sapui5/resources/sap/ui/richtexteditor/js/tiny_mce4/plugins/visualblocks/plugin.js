(function(){var a=(function(){'use strict';var C=function(e){var w=e;var x=function(){return w;};var y=function(v){w=v;};var z=function(){return C(x());};return{get:x,set:y,clone:z};};var g=tinymce.util.Tools.resolve('tinymce.PluginManager');var f=function(e,v){e.fire('VisualBlocks',{state:v});};var $={fireVisualBlocks:f};var i=function(e){return e.getParam('visualblocks_default_state',false);};var b=function(e){return e.settings.visualblocks_content_css;};var c={isEnabledByDefault:i,getContentCss:b};var d=tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');var h=tinymce.util.Tools.resolve('tinymce.util.Tools');var j=d.DOM.uniqueId();var l=function(e,v){var w=h.toArray(e.getElementsByTagName('link'));var x=h.grep(w,function(z){return z.id===j;});if(x.length===0){var y=d.DOM.create('link',{id:j,rel:'stylesheet',href:v});e.getElementsByTagName('head')[0].appendChild(y);}};var k={load:l};var t=function(e,v,w){var x=e.dom;var y=c.getContentCss(e);k.load(e.getDoc(),y?y:v+'/css/visualblocks.css');x.toggleClass(e.getBody(),'mce-visualblocks');w.set(!w.get());$.fireVisualBlocks(e,w.get());};var m={toggleVisualBlocks:t};var r=function(e,v,w){e.addCommand('mceVisualBlocks',function(){m.toggleVisualBlocks(e,v,w);});};var n={register:r};var s=function(v,w,x){v.on('PreviewFormats AfterPreviewFormats',function(e){if(x.get()){v.dom.toggleClass(v.getBody(),'mce-visualblocks',e.type==='afterpreviewformats');}});v.on('init',function(){if(c.isEnabledByDefault(v)){m.toggleVisualBlocks(v,w,x);}});v.on('remove',function(){v.dom.removeClass(v.getBody(),'mce-visualblocks');});};var o={setup:s};var p=function(v,w){return function(e){var x=e.control;x.active(w.get());v.on('VisualBlocks',function(e){x.active(e.state);});};};var q=function(e,v){e.addButton('visualblocks',{active:false,title:'Show blocks',cmd:'mceVisualBlocks',onPostRender:p(e,v)});e.addMenuItem('visualblocks',{text:'Show blocks',cmd:'mceVisualBlocks',onPostRender:p(e,v),selectable:true,context:'view',prependToContext:true});};var u={register:q};g.add('visualblocks',function(e,v){var w=C(false);n.register(e,v,w);u.register(e,w);o.setup(e,v,w);});function P(){}return P;}());})();
