(function(){var a=(function(){'use strict';var C=function(i){var y=i;var z=function(){return y;};var A=function(v){y=v;};var B=function(){return C(z());};return{get:z,set:A,clone:B};};var g=tinymce.util.Tools.resolve('tinymce.PluginManager');var b=function(i){return i.getParam('insertdatetime_dateformat',i.translate('%Y-%m-%d'));};var c=function(i){return i.getParam('insertdatetime_timeformat',i.translate('%H:%M:%S'));};var d=function(i){return i.getParam('insertdatetime_formats',['%H:%M:%S','%Y-%m-%d','%I:%M:%S %p','%D']);};var e=function(i){var v=d(i);return v.length>0?v[0]:c(i);};var s=function(i){return i.getParam('insertdatetime_element',false);};var $={getDateFormat:b,getTimeFormat:c,getFormats:d,getDefaultDateTime:e,shouldInsertTimeElement:s};var f='Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');var h='Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ');var m='Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');var j='January February March April May June July August September October November December'.split(' ');var k=function(v,y){v=''+v;if(v.length<y){for(var i=0;i<y-v.length;i++){v='0'+v;}}return v;};var l=function(i,v,y){y=y||new Date();v=v.replace('%D','%m/%d/%Y');v=v.replace('%r','%I:%M:%S %p');v=v.replace('%Y',''+y.getFullYear());v=v.replace('%y',''+y.getYear());v=v.replace('%m',k(y.getMonth()+1,2));v=v.replace('%d',k(y.getDate(),2));v=v.replace('%H',''+k(y.getHours(),2));v=v.replace('%M',''+k(y.getMinutes(),2));v=v.replace('%S',''+k(y.getSeconds(),2));v=v.replace('%I',''+((y.getHours()+11)%12+1));v=v.replace('%p',''+(y.getHours()<12?'AM':'PM'));v=v.replace('%B',''+i.translate(j[y.getMonth()]));v=v.replace('%b',''+i.translate(m[y.getMonth()]));v=v.replace('%A',''+i.translate(h[y.getDay()]));v=v.replace('%a',''+i.translate(f[y.getDay()]));v=v.replace('%%','%');return v;};var u=function(i,v,y,z){var A=i.dom.create('time',{datetime:y},z);v.parentNode.insertBefore(A,v);i.dom.remove(v);i.selection.select(A,true);i.selection.collapse(false);};var n=function(i,v){if($.shouldInsertTimeElement(i)){var y=l(i,v);var z=void 0;if(/%[HMSIp]/.test(v)){z=l(i,'%Y-%m-%dT%H:%M');}else{z=l(i,'%Y-%m-%d');}var A=i.dom.getParent(i.selection.getStart(),'time');if(A){u(i,A,z,y);}else{i.insertContent('<time datetime="'+z+'">'+y+'</time>');}}else{i.insertContent(l(i,v));}};var o={insertDateTime:n,getDateTime:l};var r=function(i){i.addCommand('mceInsertDate',function(){o.insertDateTime(i,$.getDateFormat(i));});i.addCommand('mceInsertTime',function(){o.insertDateTime(i,$.getTimeFormat(i));});};var p={register:r};var q=tinymce.util.Tools.resolve('tinymce.util.Tools');var t=function(i,v){var y=$.getFormats(i);return q.map(y,function(z){return{text:o.getDateTime(i,z),onclick:function(){v.set(z);o.insertDateTime(i,z);}};});};var w=function(i,v){var y=t(i,v);i.addButton('insertdatetime',{type:'splitbutton',title:'Insert date/time',menu:y,onclick:function(){var z=v.get();o.insertDateTime(i,z?z:$.getDefaultDateTime(i));}});i.addMenuItem('insertdatetime',{icon:'date',text:'Date/time',menu:y,context:'insert'});};var x={register:w};g.add('insertdatetime',function(i){var v=C(null);p.register(i);x.register(i,v);});function P(){}return P;}());})();
