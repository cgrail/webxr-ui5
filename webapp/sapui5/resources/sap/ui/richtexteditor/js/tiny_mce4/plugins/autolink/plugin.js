(function(){var a=(function(){'use strict';var g=tinymce.util.Tools.resolve('tinymce.PluginManager');var b=tinymce.util.Tools.resolve('tinymce.Env');var c=function(e){return e.getParam('autolink_pattern',/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i);};var d=function(e){return e.getParam('default_link_target','');};var $={getAutoLinkPattern:c,getDefaultLinkTarget:d};var r=function(e,n){return e===n||e===' '||e.charCodeAt(0)===160;};var h=function(e){p(e,-1,'(');};var f=function(e){p(e,0,'');};var i=function(e){p(e,-1,'');};var s=function(e,n){if(n<0){n=0;}if(e.nodeType===3){var o=e.data.length;if(n>o){n=o;}}return n;};var j=function(e,n,o){if(n.nodeType!==1||n.hasChildNodes()){e.setStart(n,s(n,o));}else{e.setStartBefore(n);}};var k=function(e,n,o){if(n.nodeType!==1||n.hasChildNodes()){e.setEnd(n,s(n,o));}else{e.setEndAfter(n);}};var p=function(e,n,o){var q,t,u,v,w,x,y,z,A,B;var C=$.getAutoLinkPattern(e);var D=$.getDefaultLinkTarget(e);if(e.selection.getNode().tagName==='A'){return;}q=e.selection.getRng(true).cloneRange();if(q.startOffset<5){z=q.endContainer.previousSibling;if(!z){if(!q.endContainer.firstChild||!q.endContainer.firstChild.nextSibling){return;}z=q.endContainer.firstChild.nextSibling;}A=z.length;j(q,z,A);k(q,z,A);if(q.endOffset<5){return;}t=q.endOffset;v=z;}else{v=q.endContainer;if(v.nodeType!==3&&v.firstChild){while(v.nodeType!==3&&v.firstChild){v=v.firstChild;}if(v.nodeType===3){j(q,v,0);k(q,v,v.nodeValue.length);}}if(q.endOffset===1){t=2;}else{t=q.endOffset-1-n;}}u=t;do{j(q,v,t>=2?t-2:0);k(q,v,t>=1?t-1:0);t-=1;B=q.toString();}while(B!==' '&&B!==''&&B.charCodeAt(0)!==160&&t-2>=0&&B!==o);if(r(q.toString(),o)){j(q,v,t);k(q,v,u);t+=1;}else if(q.startOffset===0){j(q,v,0);k(q,v,u);}else{j(q,v,t);k(q,v,u);}x=q.toString();if(x.charAt(x.length-1)==='.'){k(q,v,u-1);}x=q.toString().trim();y=x.match(C);if(y){if(y[1]==='www.'){y[1]='http://www.';}else if(/@$/.test(y[1])&&!/^mailto:/.test(y[1])){y[1]='mailto:'+y[1];}w=e.selection.getBookmark();e.selection.setRng(q);e.execCommand('createlink',false,y[1]+y[2]);if(D){e.dom.setAttrib(e.selection.getNode(),'target',D);}e.selection.moveToBookmark(w);e.nodeChanged();}};var l=function(n){var o;n.on('keydown',function(e){if(e.keyCode===13){return i(n);}});if(b.ie){n.on('focus',function(){if(!o){o=true;try{n.execCommand('AutoUrlDetect',false,true);}catch(e){}}});return;}n.on('keypress',function(e){if(e.keyCode===41){return h(n);}});n.on('keyup',function(e){if(e.keyCode===32){return f(n);}});};var m={setup:l};g.add('autolink',function(e){m.setup(e);});function P(){}return P;}());})();
