(function(){var s=(function(){'use strict';var g=tinymce.util.Tools.resolve('tinymce.PluginManager');var a=tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');var b=tinymce.util.Tools.resolve('tinymce.util.Tools');var c=function(e){return e.getParam('save_enablewhendirty',true);};var d=function(e){return!!e.getParam('save_onsavecallback');};var f=function(e){return!!e.getParam('save_oncancelcallback');};var $={enableWhenDirty:c,hasOnSaveCallback:d,hasOnCancelCallback:f};var i=function(e,h){e.notificationManager.open({text:e.translate(h),type:'error'});};var s=function(e){var h;h=a.DOM.getParent(e.id,'form');if($.enableWhenDirty(e)&&!e.isDirty()){return;}e.save();if($.hasOnSaveCallback(e)){e.execCallback('save_onsavecallback',e);e.nodeChanged();return;}if(h){e.setDirty(false);if(!h.onsubmit||h.onsubmit()){if(typeof h.submit==='function'){h.submit();}else{i(e,'Error: Form submit field collision.');}}e.nodeChanged();}else{i(e,'Error: No form element found.');}};var j=function(e){var h=b.trim(e.startContent);if($.hasOnCancelCallback(e)){e.execCallback('save_oncancelcallback',e);return;}e.setContent(h);e.undoManager.clear();e.nodeChanged();};var k={save:s,cancel:j};var r=function(e){e.addCommand('mceSave',function(){k.save(e);});e.addCommand('mceCancel',function(){k.cancel(e);});};var l={register:r};var m=function(h){return function(e){var p=e.control;h.on('nodeChange dirty',function(){p.disabled($.enableWhenDirty(h)&&!h.isDirty());});};};var n=function(e){e.addButton('save',{icon:'save',text:'Save',cmd:'mceSave',disabled:true,onPostRender:m(e)});e.addButton('cancel',{text:'Cancel',icon:false,cmd:'mceCancel',disabled:true,onPostRender:m(e)});e.addShortcut('Meta+S','','mceSave');};var o={register:n};g.add('save',function(e){o.register(e);l.register(e);});function P(){}return P;}());})();
