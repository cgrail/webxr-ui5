(function(){var c=(function(){'use strict';var C=function(i){var e=i;var a=function(){return e;};var x=function(v){e=v;};var y=function(){return C(a());};return{get:a,set:x,clone:y};};var g=tinymce.util.Tools.resolve('tinymce.PluginManager');var a=function(v){var i=function(){return v.get();};return{isContextMenuVisible:i};};var $={get:a};var s=function(e){return e.settings.contextmenu_never_use_native;};var b=function(e){return e.getParam('contextmenu','link openlink image inserttable | cell row column deletetable');};var d={shouldNeverUseNative:s,getContextMenu:b};var f=tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');var h=function(e){return f.DOM.select(e.settings.ui_container)[0];};var n=function(x,y){return{x:x,y:y};};var t=function(e,i,v){return n(e.x+i,e.y+v);};var j=function(e){return n(e.pageX,e.pageY);};var k=function(e){return n(e.clientX,e.clientY);};var l=function(e,i){if(e&&f.DOM.getStyle(e,'position',true)!=='static'){var v=f.DOM.getPos(e);var x=v.x-e.scrollLeft;var y=v.y-e.scrollTop;return t(i,-x,-y);}else{return t(i,0,0);}};var m=function(e,i){var v=f.DOM.getPos(e);return t(i,v.x,v.y);};var o=function(i,e){if(i.inline){return l(h(i),j(e));}else{var v=m(i.getContentAreaContainer(),k(e));return l(h(i),v);}};var p={getPos:o};var q=tinymce.util.Tools.resolve('tinymce.ui.Factory');var r=tinymce.util.Tools.resolve('tinymce.util.Tools');var u=function(v,x){var y,c;var E=[];c=d.getContextMenu(v);r.each(c.split(/[ ,]/),function(e){var F=v.menuItems[e];if(e==='|'){F={text:e};}if(F){F.shortcut='';E.push(F);}});for(var i=0;i<E.length;i++){if(E[i].text==='|'){if(i===0||i===E.length-1){E.splice(i,1);}}}y=q.create('menu',{items:E,context:'contextmenu',classes:'contextmenu'});y.uiContainer=h(v);y.renderTo(h(v));y.on('hide',function(e){if(e.control===this){x.set(false);}});v.on('remove',function(){y.remove();y=null;});return y;};var w=function(e,i,v,x){if(x.get()===null){x.set(u(e,v));}else{x.get().show();}x.get().moveTo(i.x,i.y);v.set(true);};var z={show:w};var A=function(i,e){return e.ctrlKey&&!d.shouldNeverUseNative(i);};var B=function(i,v,x){i.on('contextmenu',function(e){if(A(i,e)){return;}e.preventDefault();z.show(i,p.getPos(i,e),v,x);});};var D={setup:B};g.add('contextmenu',function(e){var i=C(null),v=C(false);D.setup(e,v,i);return $.get(v);});function P(){}return P;}());})();
