(function(){var c=(function(){'use strict';var C=function(i){var e=i;var j=function(){return e;};var o=function(v){e=v;};var t=function(){return C(j());};return{get:j,set:o,clone:t};};var g=tinymce.util.Tools.resolve('tinymce.PluginManager');var a=tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');var b=function(e){return e.settings.codesample_content_css;};var d=function(e){return e.settings.codesample_languages;};var f=function(e){return Math.min(a.DOM.getViewPort().w,e.getParam('codesample_dialog_width',800));};var h=function(e){return Math.min(a.DOM.getViewPort().w,e.getParam('codesample_dialog_height',650));};var k={getContentCss:b,getLanguages:d,getDialogMinWidth:f,getDialogMinHeight:h};var w={};var l=w;var m=typeof w!=='undefined'?w:typeof WorkerGlobalScope!=='undefined'&&self instanceof WorkerGlobalScope?self:{};var P=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i;var _=m.Prism={util:{encode:function(t){if(t instanceof T){return new T(t.type,_.util.encode(t.content),t.alias);}else if(_.util.type(t)==='Array'){return t.map(_.util.encode);}else{return t.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/\u00a0/g,' ');}},type:function(o){return Object.prototype.toString.call(o).match(/\[object (\w+)\]/)[1];},clone:function(o){var t=_.util.type(o);switch(t){case'Object':var i={};for(var j in o){if(o.hasOwnProperty(j)){i[j]=_.util.clone(o[j]);}}return i;case'Array':return o.map&&o.map(function(v){return _.util.clone(v);});}return o;}},languages:{extend:function(i,j){var e=_.util.clone(_.languages[i]);for(var o in j){e[o]=j[o];}return e;},insertBefore:function(i,j,o,t){t=t||_.languages;var v=t[i];if(arguments.length===2){o=arguments[1];for(var N in o){if(o.hasOwnProperty(N)){v[N]=o[N];}}return v;}var O={};for(var Q in v){if(v.hasOwnProperty(Q)){if(Q===j){for(var N in o){if(o.hasOwnProperty(N)){O[N]=o[N];}}}O[Q]=v[Q];}}_.languages.DFS(_.languages,function(R,S){if(S===t[i]&&R!==i){this[R]=O;}});return t[i]=O;},DFS:function(o,j,t){for(var i in o){if(o.hasOwnProperty(i)){j.call(o,i,o[i],t||i);if(_.util.type(o[i])==='Object'){_.languages.DFS(o[i],j);}else if(_.util.type(o[i])==='Array'){_.languages.DFS(o[i],j,i);}}}}},plugins:{},highlightAll:function(j,o){var t=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');for(var i=0,v=void 0;v=t[i++];){_.highlightElement(v,j===true,o);}},highlightElement:function(i,j,o){var t,v,N=i;while(N&&!e.test(N.className)){N=N.parentNode;}if(N){t=(N.className.match(e)||[,''])[1];v=_.languages[t];}i.className=i.className.replace(e,'').replace(/\s+/g,' ')+' language-'+t;N=i.parentNode;if(/pre/i.test(N.nodeName)){N.className=N.className.replace(e,'').replace(/\s+/g,' ')+' language-'+t;}var O=i.textContent;var Q={element:i,language:t,grammar:v,code:O};if(!O||!v){_.hooks.run('complete',Q);return;}_.hooks.run('before-highlight',Q);if(j&&m.Worker){var R=new Worker(_.filename);R.onmessage=function(S){Q.highlightedCode=S.data;_.hooks.run('before-insert',Q);Q.element.innerHTML=Q.highlightedCode;if(o){o.call(Q.element);}_.hooks.run('after-highlight',Q);_.hooks.run('complete',Q);};R.postMessage(JSON.stringify({language:Q.language,code:Q.code,immediateClose:true}));}else{Q.highlightedCode=_.highlight(Q.code,Q.grammar,Q.language);_.hooks.run('before-insert',Q);Q.element.innerHTML=Q.highlightedCode;if(o){o.call(i);}_.hooks.run('after-highlight',Q);_.hooks.run('complete',Q);}},highlight:function(t,i,j){var o=_.tokenize(t,i);return T.stringify(_.util.encode(o),j);},tokenize:function(t,o,v){var T=_.Token;var N=[t];var O=o.rest;if(O){for(var Q in O){o[Q]=O[Q];}delete o.rest;}tokenloop:for(var Q in o){if(!o.hasOwnProperty(Q)||!o[Q]){continue;}var R=o[Q];R=_.util.type(R)==='Array'?R:[R];for(var j=0;j<R.length;++j){var S=R[j];var U=S.inside;var V=!!S.lookbehind;var W=0;var X=S.alias;S=S.pattern||S;for(var i=0;i<N.length;i++){var Y=N[i];if(N.length>t.length){break tokenloop;}if(Y instanceof T){continue;}S.lastIndex=0;var Z=S.exec(Y);if(Z){if(V){W=Z[1].length;}var $=Z.index-1+W;Z=Z[0].slice(W);var a1=Z.length,to=$+a1,c1=Y.slice(0,$+1),d1=Y.slice(to+1);var e1=[i,1];if(c1){e1.push(c1);}var f1=new T(Q,U?_.tokenize(Z,U):Z,X);e1.push(f1);if(d1){e1.push(d1);}Array.prototype.splice.apply(N,e1);}}}}return N;},hooks:{all:{},add:function(i,j){var o=_.hooks.all;o[i]=o[i]||[];o[i].push(j);},run:function(j,o){var t=_.hooks.all[j];if(!t||!t.length){return;}for(var i=0,v=void 0;v=t[i++];){v(o);}}}};var T=_.Token=function(t,i,j){this.type=t;this.content=i;this.alias=j;};T.stringify=function(o,i,j){if(typeof o==='string'){return o;}if(_.util.type(o)==='Array'){return o.map(function(Q){return T.stringify(Q,i,o);}).join('');}var t={type:o.type,content:T.stringify(o.content,i,j),tag:'span',classes:['token',o.type],attributes:{},language:i,parent:j};if(t.type==='comment'){t.attributes.spellcheck='true';}if(o.alias){var v=_.util.type(o.alias)==='Array'?o.alias:[o.alias];Array.prototype.push.apply(t.classes,v);}_.hooks.run('wrap',t);var N='';for(var O in t.attributes){N+=(N?' ':'')+O+'="'+(t.attributes[O]||'')+'"';}return'<'+t.tag+' class="'+t.classes.join(' ')+'" '+N+'>'+t.content+'</'+t.tag+'>';};if(!m.document){if(!m.addEventListener){return m.Prism;}m.addEventListener('message',function(i){var j=JSON.parse(i.data),e=j.language,o=j.code,t=j.immediateClose;m.postMessage(_.highlight(o,_.languages[e],e));if(t){m.close();}},false);return m.Prism;}}();if(typeof l!=='undefined'){l.Prism=P;}P.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{'tag':{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},'attr-value':{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},'punctuation':/\/?>/,'attr-name':{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i};P.hooks.add('wrap',function(e){if(e.type==='entity'){e.attributes.title=e.content.replace(/&amp;/,'&');}});P.languages.xml=P.languages.markup;P.languages.html=P.languages.markup;P.languages.mathml=P.languages.markup;P.languages.svg=P.languages.markup;P.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/};P.languages.css.atrule.inside.rest=P.util.clone(P.languages.css);if(P.languages.markup){P.languages.insertBefore('markup','tag',{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:P.languages.markup.tag.inside},rest:P.languages.css},alias:'language-css'}});P.languages.insertBefore('inside','attr-value',{'style-attr':{pattern:/\s*style=("|').*?\1/i,inside:{'attr-name':{pattern:/^\s*style/i,inside:P.languages.markup.tag.inside},'punctuation':/^\s*=\s*['"]|['"]\s*$/,'attr-value':{pattern:/.+/i,inside:P.languages.css}},alias:'language-css'}},P.languages.markup.tag);}P.languages.clike={'comment':[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:true},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:true}],'string':/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,'class-name':{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:true,inside:{punctuation:/(\.|\\)/}},'keyword':/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,'boolean':/\b(true|false)\b/,'function':/[a-z0-9_]+(?=\()/i,'number':/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,'operator':/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,'punctuation':/[{}[\];(),.:]/};P.languages.javascript=P.languages.extend('clike',{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i});P.languages.insertBefore('javascript','keyword',{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:true}});P.languages.insertBefore('javascript','class-name',{'template-string':{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{'interpolation-punctuation':{pattern:/^\$\{|\}$/,alias:'punctuation'},'rest':P.languages.javascript}},string:/[\s\S]+/}}});if(P.languages.markup){P.languages.insertBefore('markup','tag',{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:P.languages.markup.tag.inside},rest:P.languages.javascript},alias:'language-javascript'}});}P.languages.js=P.languages.javascript;P.languages.c=P.languages.extend('clike',{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i});P.languages.insertBefore('c','string',{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:true,alias:'property',inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:true}}}});delete P.languages.c['class-name'];delete P.languages.c.boolean;P.languages.csharp=P.languages.extend('clike',{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+)\b/i});P.languages.insertBefore('csharp','keyword',{preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:true}});P.languages.cpp=P.languages.extend('c',{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/});P.languages.insertBefore('cpp','keyword',{'class-name':{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:true}});P.languages.java=P.languages.extend('clike',{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:true}});P.languages.php=P.languages.extend('clike',{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:true}});P.languages.insertBefore('php','class-name',{'shell-comment':{pattern:/(^|[^\\])#.*/,lookbehind:true,alias:'comment'}});P.languages.insertBefore('php','keyword',{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,package:{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:true,inside:{punctuation:/\\/}}});P.languages.insertBefore('php','operator',{property:{pattern:/(->)[\w]+/,lookbehind:true}});if(P.languages.markup){P.hooks.add('before-highlight',function(e){if(e.language!=='php'){return;}e.tokenStack=[];e.backupCode=e.code;e.code=e.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/ig,function(i){e.tokenStack.push(i);return'{{{PHP'+e.tokenStack.length+'}}}';});});P.hooks.add('before-insert',function(e){if(e.language==='php'){e.code=e.backupCode;delete e.backupCode;}});P.hooks.add('after-highlight',function(e){if(e.language!=='php'){return;}for(var i=0,t=void 0;t=e.tokenStack[i];i++){e.highlightedCode=e.highlightedCode.replace('{{{PHP'+(i+1)+'}}}',P.highlight(t,e.grammar,'php').replace(/\$/g,'$$$$'));}e.element.innerHTML=e.highlightedCode;});P.hooks.add('wrap',function(e){if(e.language==='php'&&e.type==='markup'){e.content=e.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>');}});P.languages.insertBefore('php','comment',{markup:{pattern:/<[^?]\/?(.*?)>/,inside:P.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/});}P.languages.python={'comment':{pattern:/(^|[^\\])#.*/,lookbehind:true},'string':/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,'function':{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:true},'class-name':{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:true},'keyword':/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,'boolean':/\b(?:True|False)\b/,'number':/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,'operator':/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,'punctuation':/[{}[\];(),.:]/};(function(P){P.languages.ruby=P.languages.extend('clike',{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var i={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:'tag'},rest:P.util.clone(P.languages.ruby)}};P.languages.insertBefore('ruby','keyword',{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:i}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:i}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:i}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:i}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:i}},{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:true}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/});P.languages.insertBefore('ruby','number',{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/});P.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:i}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:i}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:i}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:i}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:i}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:i}}];}(P));function n(e){return e&&e.nodeName==='PRE'&&e.className.indexOf('language-')!==-1;}function p(e){return function(i,j){return e(j);};}var q={isCodeSample:n,trimArg:p};var r=function(e){var i=e.selection.getNode();if(q.isCodeSample(i)){return i;}return null;};var s=function(e,i,j){e.undoManager.transact(function(){var o=r(e);j=a.DOM.encode(j);if(o){e.dom.setAttrib(o,'class','language-'+i);o.innerHTML=j;P.highlightElement(o);e.selection.select(o);}else{e.insertContent('<pre id="__new" class="language-'+i+'">'+j+'</pre>');e.selection.select(e.$('#__new').removeAttr('id')[0]);}});};var u=function(e){var i=r(e);if(i){return i.textContent;}return'';};var x={getSelectedCodeSample:r,insertCodeSample:s,getCurrentCode:u};var y=function(e){var i=[{text:'HTML/XML',value:'markup'},{text:'JavaScript',value:'javascript'},{text:'CSS',value:'css'},{text:'PHP',value:'php'},{text:'Ruby',value:'ruby'},{text:'Python',value:'python'},{text:'Java',value:'java'},{text:'C',value:'c'},{text:'C#',value:'csharp'},{text:'C++',value:'cpp'}];var j=k.getLanguages(e);return j?j:i;};var z=function(e){var i;var j=x.getSelectedCodeSample(e);if(j){i=j.className.match(/language-(\w+)/);return i?i[1]:'';}return'';};var A={getLanguages:y,getCurrentLanguage:z};var B={open:function(i){var j=k.getDialogMinWidth(i);var o=k.getDialogMinHeight(i);var t=A.getCurrentLanguage(i);var v=A.getLanguages(i);var N=x.getCurrentCode(i);i.windowManager.open({title:'Insert/Edit code sample',minWidth:j,minHeight:o,layout:'flex',direction:'column',align:'stretch',body:[{type:'listbox',name:'language',label:'Language',maxWidth:200,value:t,values:v},{type:'textbox',name:'code',multiline:true,spellcheck:false,ariaLabel:'Code view',flex:1,style:'direction: ltr; text-align: left',classes:'monospace',value:N,autofocus:true}],onSubmit:function(e){x.insertCodeSample(i,e.data.language,e.data.code);}});}};var D=function(e){e.addCommand('codesample',function(){var i=e.selection.getNode();if(e.selection.isCollapsed()||q.isCodeSample(i)){B.open(e);}else{e.formatter.toggle('code');}});};var E={register:D};var F=function(i){var $=i.$;i.on('PreProcess',function(e){$('pre[contenteditable=false]',e.node).filter(q.trimArg(q.isCodeSample)).each(function(j,o){var t=$(o),v=o.textContent;t.attr('class',$.trim(t.attr('class')));t.removeAttr('contentEditable');t.empty().append($('<code></code>').each(function(){this.textContent=v;}));});});i.on('SetContent',function(){var e=$('pre').filter(q.trimArg(q.isCodeSample)).filter(function(j,o){return o.contentEditable!=='false';});if(e.length){i.undoManager.transact(function(){e.each(function(j,o){$(o).find('br').each(function(j,o){o.parentNode.replaceChild(i.getDoc().createTextNode('\n'),o);});o.contentEditable=false;o.innerHTML=i.dom.encode(o.textContent);P.highlightElement(o);o.className=$.trim(o.className);});});}});};var G={setup:F};var H=function(e,i,L,j){var o;var t=k.getContentCss(e);if(e.inline&&L.get()){return;}if(!e.inline&&j.get()){return;}if(e.inline){L.set(true);}else{j.set(true);}if(t!==false){o=e.dom.create('link',{rel:'stylesheet',href:t?t:i+'/css/prism.css'});e.getDoc().getElementsByTagName('head')[0].appendChild(o);}};var I={loadCss:H};var J=function(e){e.addButton('codesample',{cmd:'codesample',title:'Insert/Edit code sample'});e.addMenuItem('codesample',{cmd:'codesample',text:'Code sample',icon:'codesample'});};var K={register:J};var L=C(false);g.add('codesample',function(e,i){var j=C(false);G.setup(e);K.register(e);E.register(e);e.on('init',function(){I.loadCss(e,i,L,j);});e.on('dblclick',function(o){if(q.isCodeSample(o.target)){B.open(e);}});});function M(){}return M;}());})();
