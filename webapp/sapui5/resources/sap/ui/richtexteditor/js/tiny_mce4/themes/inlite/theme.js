(function(){var c=(function(){'use strict';var g=tinymce.util.Tools.resolve('tinymce.ThemeManager');var m=tinymce.util.Tools.resolve('tinymce.Env');var q=tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');var u=tinymce.util.Tools.resolve('tinymce.util.Delay');var z=function(a){return a.reduce(function(r,i){return Array.isArray(i)?r.concat(z(i)):r.concat(i);},[]);};var A={flatten:z};var B=function(i,r){return{id:i,rect:r};};var C=function(e,a){for(var i=0;i<a.length;i++){var f=a[i];var r=f(e);if(r){return r;}}return null;};var D={match:C,result:B};var E=function(a){return{x:a.left,y:a.top,w:a.width,h:a.height};};var F=function(a){return{left:a.x,top:a.y,width:a.w,height:a.h,right:a.x+a.w,bottom:a.y+a.h};};var G={fromClientRect:E,toClientRect:F};var H=function(r){var v=q.DOM.getViewPort();return{x:r.x+v.x,y:r.y+v.y,w:r.w,h:r.h};};var I=function(e){var a=e.getBoundingClientRect();return H({x:a.left,y:a.top,w:Math.max(e.clientWidth,e.offsetWidth),h:Math.max(e.clientHeight,e.offsetHeight)});};var J=function(e,a){return I(a);};var K=function(e){return I(e.getElement().ownerDocument.body);};var L=function(e){return I(e.getContentAreaContainer()||e.getBody());};var M=function(e){var a=e.selection.getBoundingClientRect();return a?H(G.fromClientRect(a)):null;};var N={getElementRect:J,getPageAreaRect:K,getContentAreaRect:L,getSelectionRect:M};var O=function(O,p){return function(e){for(var i=0;i<p.length;i++){if(p[i].predicate(O)){var B=D.result(p[i].id,N.getElementRect(e,O));return B;}}return null;};};var P=function(e,p){return function(a){for(var i=0;i<e.length;i++){for(var x=0;x<p.length;x++){if(p[x].predicate(e[i])){return D.result(p[x].id,N.getElementRect(a,e[i]));}}}return null;};};var Q={element:O,parent:P};var R=tinymce.util.Tools.resolve('tinymce.util.Tools');var S=function(i,p){return{id:i,predicate:p};};var T=function(t){return R.map(t,function(a){return S(a.id,a.predicate);});};var U={create:S,fromContextToolbars:T};var V=function(i){return function(e){if(!e.selection.isCollapsed()){var B=D.result(i,N.getSelectionRect(e));return B;}return null;};};var W=function(e,a){return function(b){var i;var t=b.schema.getTextBlockElements();for(i=0;i<e.length;i++){if(e[i].nodeName==='TABLE'){return null;}}for(i=0;i<e.length;i++){if(e[i].nodeName in t){if(b.dom.isEmpty(e[i])){return D.result(a,N.getSelectionRect(b));}return null;}}return null;};};var X={textSelection:V,emptyTextBlock:W};var Y=function(e){e.fire('SkinLoaded');};var Z=function(e){return e.fire('BeforeRenderUI');};var _={fireSkinLoaded:Y,fireBeforeRenderUI:Z};var b1=tinymce.util.Tools.resolve('tinymce.EditorManager');var c1=function(G6){return function(H6){return typeof H6===G6;};};var f1=function(H6){return Array.isArray(H6);};var g1=function(H6){return H6===null;};var h1=function(p){return function(H6){return!g1(H6)&&!f1(H6)&&p(H6);};};var i1=function(H6){return c1('string')(H6);};var j1=function(H6){return c1('number')(H6);};var k1=function(H6){return c1('function')(H6);};var l1=function(H6){return c1('boolean')(H6);};var m1={isString:i1,isNumber:j1,isBoolean:l1,isFunction:k1,isObject:h1(c1('object')),isNull:g1,isArray:f1};var n1=function(H6,p){if(p(H6)){return true;}throw new Error('Default value doesn\'t match requested type.');};var o1=function(p){return function(e,F6,d){var s=e.settings;n1(d,p);return F6 in s&&p(s[F6])?s[F6]:d;};};var p1=function(s,d){return s.split(d).filter(function(i){return i.length>0;});};var q1=function(H6,d){var s=function(H6){return typeof H6==='string'?p1(H6,/[ ,]/):H6;};var b=function(H6,d){return H6===false?[]:d;};if(m1.isArray(H6)){return H6;}else if(m1.isString(H6)){return s(H6);}else if(m1.isBoolean(H6)){return b(H6,d);}return d;};var r1=function(p){return function(e,F6,d){var H6=F6 in e.settings?e.settings[F6]:d;n1(d,p);return q1(H6,d);};};var s1={getStringOr:o1(m1.isString),getBoolOr:o1(m1.isBoolean),getNumberOr:o1(m1.isNumber),getHandlerOr:o1(m1.isFunction),getToolbarItemsOr:r1(m1.isArray)};var t1=tinymce.util.Tools.resolve('tinymce.geom.Rect');var u1=function(r,p){return{rect:r,position:p};};var v1=function(r,t){return{x:t.x,y:t.y,w:r.w,h:r.h};};var w1=function(t,a,b,d,p){var r,e,o;var f={x:d.x,y:d.y,w:d.w+(d.w<p.w+b.w?p.w:0),h:d.h+(d.h<p.h+b.h?p.h:0)};r=t1.findBestRelativePosition(p,b,f,t);b=t1.clamp(b,f);if(r){e=t1.relativePosition(p,b,r);o=v1(p,e);return u1(o,r);}b=t1.intersect(f,b);if(b){r=t1.findBestRelativePosition(p,b,f,a);if(r){e=t1.relativePosition(p,b,r);o=v1(p,e);return u1(o,r);}o=v1(p,b);return u1(o,r);}return null;};var x1=function(t,a,p){return w1(['cr-cl','cl-cr'],['bc-tc','bl-tl','br-tr'],t,a,p);};var y1=function(t,a,p){return w1(['tc-bc','bc-tc','tl-bl','bl-tl','tr-br','br-tr','cr-cl','cl-cr'],['bc-tc','bl-tl','br-tr','cr-cl'],t,a,p);};var z1=function(h,t,a,p){var b;if(typeof h==='function'){b=h({elementRect:G.toClientRect(t),contentAreaRect:G.toClientRect(a),panelRect:G.toClientRect(p)});return G.fromClientRect(b);}return p;};var A1=function(r){return r.panelRect;};var B1={calcInsert:x1,calc:y1,userConstrain:z1,defaultHandler:A1};var C1=function(e,a){return e.documentBaseURI.toAbsolute(a);};var D1=function(F6){var p=b1.baseURL+'/skins/';return F6?p+F6:p+'lightgray';};var E1=function(e){return s1.getToolbarItemsOr(e,'selection_toolbar',['bold','italic','|','quicklink','h2','h3','blockquote']);};var F1=function(e){return s1.getToolbarItemsOr(e,'insert_toolbar',['quickimage','quicktable']);};var G1=function(e){return s1.getHandlerOr(e,'inline_toolbar_position_handler',B1.defaultHandler);};var H1=function(e){var s=e.settings;return s.skin_url?C1(e,s.skin_url):D1(s.skin);};var I1=function(e){return e.settings.skin===false;};var J1={getTextSelectionToolbarItems:E1,getInsertToolbarItems:F1,getPositionHandler:G1,getSkinUrl:H1,isSkinDisabled:I1};var K1=function(e,a){var d=function(){e._skinLoaded=true;_.fireSkinLoaded(e);a();};if(e.initialized){d();}else{e.on('init',d);}};var L1=function(e,a){var s=J1.getSkinUrl(e);var d=function(){K1(e,a);};if(J1.isSkinDisabled(e)){d();}else{q.DOM.styleSheetLoader.load(s+'/skin.min.css',d);e.contentCSS.push(s+'/content.inline.min.css');}};var M1={load:L1};var N1=function(e){var m7=e.selection.getNode();var a=e.dom.getParents(m7,'*');return a;};var O1=function(e,s,i,a){var b=function(d){return e.dom.is(d,s);};return{predicate:b,id:i,items:a};};var P1=function(e){var a=e.contextToolbars;return A.flatten([a?a:[],O1(e,'img','image','alignleft aligncenter alignright')]);};var Q1=function(e,t){var B,a,b;a=N1(e);b=U.fromContextToolbars(t);B=D.match(e,[Q.element(a[0],b),X.textSelection('text'),X.emptyTextBlock(a,'insert'),Q.parent(a,b)]);return B&&B.rect?B:null;};var R1=function(e){return document.activeElement===e.getBody();};var S1=function(e,p){var t=function(){var a=P1(e);var B=Q1(e,a);if(B){p.show(e,B.id,B.rect,a);}else{p.hide();}};return function(){if(!e.removed&&R1(e)){t();}};};var T1=function(e,p){return function(){var t=P1(e);var B=Q1(e,t);if(B){p.reposition(e,B.id,B.rect);}};};var U1=function(e,p,f){return function(){if(!e.removed&&!p.inForm()){f();}};};var V1=function(e,p){var t=u.throttle(S1(e,p),0);var a=u.throttle(U1(e,p,S1(e,p)),0);var r=T1(e,p);e.on('blur hide ObjectResizeStart',p.hide);e.on('click',t);e.on('nodeChange mouseup',a);e.on('ResizeEditor keyup',t);e.on('ResizeWindow',r);q.DOM.bind(m.container,'scroll',r);e.on('remove',function(){q.DOM.unbind(m.container,'scroll',r);p.remove();});e.shortcuts.add('Alt+F10,F10','',p.focus);};var W1=function(e,p){e.shortcuts.remove('meta+k');e.shortcuts.add('meta+k','',function(){var t=P1(e);var B=D.match(e,[X.textSelection('quicklink')]);if(B){p.show(e,B.id,B.rect,t);}});};var X1=function(e,p){M1.load(e,function(){V1(e,p);W1(e,p);});return{};};var Y1=function(a){throw new Error(a);};var Z1=function(e,p){return e.inline?X1(e,p):Y1('inlite theme only supports inline mode.');};var $1={renderUI:Z1};var _1=function(){var x=[];for(var a=0;a<arguments.length;a++){x[a]=arguments[a];}};var b2=function(f){return function(){var x=[];for(var a=0;a<arguments.length;a++){x[a]=arguments[a];}return f();};};var c2=function(f,a){return function(){var x=[];for(var b=0;b<arguments.length;b++){x[b]=arguments[b];}return f(a.apply(null,arguments));};};var f2=function(H6){return function(){return H6;};};var g2=function(x){return x;};var h2=function(a,b){return a===b;};var i2=function(f){var x=[];for(var a=1;a<arguments.length;a++){x[a-1]=arguments[a];}var b=new Array(arguments.length-1);for(var i=1;i<arguments.length;i++)b[i-1]=arguments[i];return function(){var x=[];for(var a=0;a<arguments.length;a++){x[a]=arguments[a];}var n=new Array(arguments.length);for(var j=0;j<n.length;j++)n[j]=arguments[j];var G8=b.concat(n);return f.apply(null,G8);};};var j2=function(f){return function(){var x=[];for(var a=0;a<arguments.length;a++){x[a]=arguments[a];}return!f.apply(null,arguments);};};var k2=function(a){return function(){throw new Error(a);};};var l2=function(f){return f();};var m2=function(f){f();};var n2=f2(false);var o2=f2(true);var p2={noop:_1,noarg:b2,compose:c2,constant:f2,identity:g2,tripleEquals:h2,curry:i2,not:j2,die:k2,apply:l2,call:m2,never:n2,always:o2};var q2=p2.never;var r2=p2.always;var s2=function(){return t2;};var t2=function(){var e=function(o){return o.isNone();};var m2=function(t){return t();};var i=function(n){return n;};var _1=function(){};var a={fold:function(n,s){return n();},is:q2,isSome:q2,isNone:r2,getOr:i,getOrThunk:m2,getOrDie:function(b){throw new Error(b||'error: getOrDie called on none.');},or:i,orThunk:m2,map:s2,ap:s2,each:_1,bind:s2,flatten:s2,exists:q2,forall:r2,filter:s2,equals:e,equals_:e,toArray:function(){return[];},toString:p2.constant('none()')};if(Object.freeze)Object.freeze(a);return a;}();var u2=function(a){var d=function(){return a;};var e=function(){return h;};var G2=function(f){return u2(f(a));};var T2=function(f){return f(a);};var h={fold:function(n,s){return s(a);},is:function(v){return a===v;},isSome:r2,isNone:q2,getOr:d,getOrThunk:d,getOrDie:d,or:e,orThunk:e,map:G2,ap:function(o){return o.fold(s2,function(f){return u2(f(a));});},each:function(f){f(a);},bind:T2,flatten:d,exists:T2,forall:T2,filter:function(f){return f(a)?h:t2;},equals:function(o){return o.is(a);},equals_:function(o,f){return o.fold(q2,function(b){return f(a,b);});},toArray:function(){return[a];},toString:function(){return'some('+a+')';}};return h;};var v2=function(H6){return H6===null||H6===undefined?t2:u2(H6);};var w2={some:u2,none:s2,from:v2};var x2=function(x){if(x===null)return'null';var t=typeof x;if(t==='object'&&Array.prototype.isPrototypeOf(x))return'array';if(t==='object'&&String.prototype.isPrototypeOf(x))return'string';return t;};var y2=function(G6){return function(H6){return x2(H6)===G6;};};var z2={isString:y2('string'),isObject:y2('object'),isArray:y2('array'),isNull:y2('null'),isBoolean:y2('boolean'),isUndefined:y2('undefined'),isFunction:y2('function'),isNumber:y2('number')};var A2=function(){var p=Array.prototype.indexOf;var f=function(a,x){return p.call(a,x);};var s=function(a,x){return Q2(a,x);};return p===undefined?s:f;}();var B2=function(a,x){var r=A2(a,x);return r===-1?w2.none():w2.some(r);};var C2=function(a,x){return A2(a,x)>-1;};var D2=function(x,p){return P2(x,p).isSome();};var E2=function(n,f){var r=[];for(var i=0;i<n;i++){r.push(f(i));}return r;};var F2=function(a,_6){var r=[];for(var i=0;i<a.length;i+=_6){var s=a.slice(i,i+_6);r.push(s);}return r;};var G2=function(a,f){var l=a.length;var r=new Array(l);for(var i=0;i<l;i++){var x=a[i];r[i]=f(x,i,a);}return r;};var H2=function(a,f){for(var i=0,l=a.length;i<l;i++){var x=a[i];f(x,i,a);}};var I2=function(a,f){for(var i=a.length-1;i>=0;i--){var x=a[i];f(x,i,a);}};var J2=function(a,p){var b=[];var Y1=[];for(var i=0,l=a.length;i<l;i++){var x=a[i];var d=p(x,i,a)?b:Y1;d.push(x);}return{pass:b,fail:Y1};};var K2=function(a,p){var r=[];for(var i=0,l=a.length;i<l;i++){var x=a[i];if(p(x,i,a)){r.push(x);}}return r;};var L2=function(a,f){if(a.length===0){return[];}else{var w=f(a[0]);var r=[];var b=[];for(var i=0,l=a.length;i<l;i++){var x=a[i];var G6=f(x);if(G6!==w){r.push(b);b=[];}w=G6;b.push(x);}if(b.length!==0){r.push(b);}return r;}};var M2=function(a,f,b){I2(a,function(x){b=f(b,x);});return b;};var N2=function(a,f,b){H2(a,function(x){b=f(b,x);});return b;};var O2=function(a,p){for(var i=0,l=a.length;i<l;i++){var x=a[i];if(p(x,i,a)){return w2.some(x);}}return w2.none();};var P2=function(a,p){for(var i=0,l=a.length;i<l;i++){var x=a[i];if(p(x,i,a)){return w2.some(i);}}return w2.none();};var Q2=function(a,x){for(var i=0,l=a.length;i<l;++i){if(a[i]===x){return i;}}return-1;};var R2=Array.prototype.push;var S2=function(x){var r=[];for(var i=0,l=x.length;i<l;++i){if(!Array.prototype.isPrototypeOf(x[i]))throw new Error('Arr.flatten item '+i+' was not an array, input: '+x);R2.apply(r,x[i]);}return r;};var T2=function(x,f){var o=G2(x,f);return S2(o);};var U2=function(a,p){for(var i=0,l=a.length;i<l;++i){var x=a[i];if(p(x,i,a)!==true){return false;}}return true;};var V2=function(a,b){return a.length===b.length&&U2(a,function(x,i){return x===b[i];});};var W2=Array.prototype.slice;var X2=function(x){var r=W2.call(x,0);r.reverse();return r;};var Y2=function(a,b){return K2(a,function(x){return!C2(b,x);});};var Z2=function(a,f){var r={};for(var i=0,l=a.length;i<l;i++){var x=a[i];r[String(x)]=f(x,i);}return r;};var $2=function(x){return[x];};var _2=function(x,a){var b=W2.call(x,0);b.sort(a);return b;};var a3=function(x){return x.length===0?w2.none():w2.some(x[0]);};var b3=function(x){return x.length===0?w2.none():w2.some(x[x.length-1]);};var c3=z2.isFunction(Array.from)?Array.from:function(x){return W2.call(x);};var d3={map:G2,each:H2,eachr:I2,partition:J2,filter:K2,groupBy:L2,indexOf:B2,foldr:M2,foldl:N2,find:O2,findIndex:P2,flatten:S2,bind:T2,forall:U2,exists:D2,contains:C2,equal:V2,reverse:X2,chunk:F2,difference:Y2,mapToObject:Z2,pure:$2,sort:_2,range:E2,head:a3,last:b3,from:c3};var e3=0;var f3={id:function(){return'mceu_'+e3++;},create:function(F6,a,b9){var e=document.createElement(F6);q.DOM.setAttribs(e,a);if(typeof b9==='string'){e.innerHTML=b9;}else{R.each(b9,function(c9){if(c9.nodeType){e.appendChild(c9);}});}return e;},createFragment:function(h){return q.DOM.createFragment(h);},getWindowSize:function(){return q.DOM.getViewPort();},getSize:function(e){var w,h;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();w=Math.max(r.width||r.right-r.left,e.offsetWidth);h=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight);}else{w=e.offsetWidth;h=e.offsetHeight;}return{width:w,height:h};},getPos:function(e,r){return q.DOM.getPos(e,r||f3.getContainer());},getContainer:function(){return m.container?m.container:document.body;},getViewPort:function(w){return q.DOM.getViewPort(w);},get:function(i){return document.getElementById(i);},addClass:function(e,a){return q.DOM.addClass(e,a);},removeClass:function(e,a){return q.DOM.removeClass(e,a);},hasClass:function(e,a){return q.DOM.hasClass(e,a);},toggleClass:function(e,a,s){return q.DOM.toggleClass(e,a,s);},css:function(e,F6,H6){return q.DOM.setStyle(e,F6,H6);},getRuntimeStyle:function(e,F6){return q.DOM.getStyle(e,F6,true);},on:function(t,F6,a,s){return q.DOM.bind(t,F6,a,s);},off:function(t,F6,a){return q.DOM.unbind(t,F6,a);},fire:function(t,F6,a){return q.DOM.fire(t,F6,a);},innerHtml:function(e,h){q.DOM.setHTML(e,h);}};var g3=tinymce.util.Tools.resolve('tinymce.dom.DomQuery');var h3=tinymce.util.Tools.resolve('tinymce.util.Class');var i3=tinymce.util.Tools.resolve('tinymce.util.EventDispatcher');var j3={parseBox:function(H6){var l;var r=10;if(!H6){return;}if(typeof H6==='number'){H6=H6||0;return{top:H6,left:H6,bottom:H6,right:H6};}H6=H6.split(' ');l=H6.length;if(l===1){H6[1]=H6[2]=H6[3]=H6[0];}else if(l===2){H6[2]=H6[0];H6[3]=H6[1];}else if(l===3){H6[3]=H6[1];}return{top:parseInt(H6[0],r)||0,right:parseInt(H6[1],r)||0,bottom:parseInt(H6[2],r)||0,left:parseInt(H6[3],r)||0};},measureBox:function(e,p){function b(F6){var T8=e.ownerDocument.defaultView;if(T8){var f=T8.getComputedStyle(e,null);if(f){F6=F6.replace(/[A-Z]/g,function(a){return'-'+a;});return f.getPropertyValue(F6);}else{return null;}}return e.currentStyle[F6];}function d(F6){var v=parseFloat(b(F6));return isNaN(v)?0:v;}return{top:d(p+'TopWidth'),right:d(p+'RightWidth'),bottom:d(p+'BottomWidth'),left:d(p+'LeftWidth')};}};function k3(){}function l3(o){this.cls=[];this.cls._map={};this.onchange=o||k3;this.prefix='';}R.extend(l3.prototype,{add:function(a){if(a&&!this.contains(a)){this.cls._map[a]=true;this.cls.push(a);this._change();}return this;},remove:function(a){if(this.contains(a)){var i=void 0;for(i=0;i<this.cls.length;i++){if(this.cls[i]===a){break;}}this.cls.splice(i,1);delete this.cls._map[a];this._change();}return this;},toggle:function(a,s){var b=this.contains(a);if(b!==s){if(b){this.remove(a);}else{this.add(a);}this._change();}return this;},contains:function(a){return!!this.cls._map[a];},_change:function(){delete this.clsValue;this.onchange.call(this);}});l3.prototype.toString=function(){var H6;if(this.clsValue){return this.clsValue;}H6='';for(var i=0;i<this.cls.length;i++){if(i>0){H6+=' ';}H6+=this.prefix+this.cls[i];}return H6;};function m3(a){var b=[];var i=a.length,d;while(i--){d=a[i];if(!d.__checked){b.push(d);d.__checked=1;}}i=b.length;while(i--){delete b[i].__checked;}return b;}var n3=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i;var o3=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;var p3=/^\s*|\s*$/g;var q3;var r3=h3.extend({init:function(s){var C=this.match;function a(F6){if(F6){F6=F6.toLowerCase();return function(i){return F6==='*'||i.type===F6;};}}function b(i){if(i){return function(j){return j._name===i;};}}function d(j){if(j){j=j.split('.');return function(k){var i=j.length;while(i--){if(!k.classes.contains(j[i])){return false;}}return true;};}}function e(F6,i,j){if(F6){return function(k){var H6=k[F6]?k[F6]():'';return!i?!!j:i==='='?H6===j:i==='*='?H6.indexOf(j)>=0:i==='~='?(' '+H6+' ').indexOf(' '+j+' ')>=0:i==='!='?H6!==j:i==='^='?H6.indexOf(j)===0:i==='$='?H6.substr(H6.length-j.length)===j:false;};}}function f(F6){var n;if(F6){F6=/(?:not\((.+)\))|(.+)/i.exec(F6);if(!F6[1]){F6=F6[2];return function(i,j,l){return F6==='first'?j===0:F6==='last'?j===l-1:F6==='even'?j%2===0:F6==='odd'?j%2===1:i[F6]?i[F6]():false;};}n=p(F6[1],[]);return function(i){return!C(i,n);};}}function h(s,i,j){var k;function l(K2){if(K2){i.push(K2);}}k=n3.exec(s.replace(p3,''));l(a(k[1]));l(b(k[2]));l(d(k[3]));l(e(k[4],k[5],k[6]));l(f(k[7]));i.pseudo=!!k[7];i.direct=j;return i;}function p(s,j){var k=[];var l,n,i;do{o3.exec('');n=o3.exec(s);if(n){s=n[3];k.push(n[1]);if(n[2]){l=n[3];break;}}}while(n);if(l){p(l,j);}s=[];for(i=0;i<k.length;i++){if(k[i]!=='>'){s.push(h(k[i],[],k[i-1]==='>'));}}j.push(s);return j;}this._selectors=p(s,[]);},match:function(a,s){var i,l,b,d,e,f,h,j,k,n,X8,e3,o;s=s||this._selectors;for(i=0,l=s.length;i<l;i++){e=s[i];d=e.length;o=a;e3=0;for(b=d-1;b>=0;b--){j=e[b];while(o){if(j.pseudo){X8=o.parent().items();k=n=X8.length;while(k--){if(X8[k]===o){break;}}}for(f=0,h=j.length;f<h;f++){if(!j[f](o,k,n)){f=h+1;break;}}if(f===h){e3++;break;}else{if(b===d-1){break;}}o=o.parent();}}if(e3===d){return true;}}return false;},find:function(a){var b=[],i,l;var s=this._selectors;function d(e,f,h){var i,l,j,k,n;var o=f[h];for(i=0,l=e.length;i<l;i++){n=e[i];for(j=0,k=o.length;j<k;j++){if(!o[j](n,i,l)){j=k+1;break;}}if(j===k){if(h===f.length-1){b.push(n);}else{if(n.items){d(n.items(),f,h+1);}}}else if(o.direct){return;}if(n.items){d(n.items(),f,h);}}}if(a.items){for(i=0,l=s.length;i<l;i++){d(a.items(),s[i],0);}if(l>1){b=m3(b);}}if(!q3){q3=r3.Collection;}return new q3(b);}});var s3;var t3;var u3=Array.prototype.push;var v3=Array.prototype.slice;t3={length:0,init:function(i){if(i){this.add(i);}},add:function(i){var s=this;if(!R.isArray(i)){if(i instanceof s3){s.add(i.toArray());}else{u3.call(s,i);}}else{u3.apply(s,i);}return s;},set:function(a){var s=this;var l=s.length;var i;s.length=0;s.add(a);for(i=s.length;i<l;i++){delete s[i];}return s;},filter:function(s){var a=this;var i,l;var b=[];var d,C;if(typeof s==='string'){s=new r3(s);C=function(d){return s.match(d);};}else{C=s;}for(i=0,l=a.length;i<l;i++){d=a[i];if(C(d)){b.push(d);}}return new s3(b);},slice:function(){return new s3(v3.apply(this,arguments));},eq:function(i){return i===-1?this.slice(i):this.slice(i,+i+1);},each:function(a){R.each(this,a);return this;},toArray:function(){return R.toArray(this);},indexOf:function(a){var s=this;var i=s.length;while(i--){if(s[i]===a){break;}}return i;},reverse:function(){return new s3(R.toArray(this).reverse());},hasClass:function(a){return this[0]?this[0].classes.contains(a):false;},prop:function(F6,H6){var s=this;var i;if(H6!==undefined){s.each(function(i){if(i[F6]){i[F6](H6);}});return s;}i=s[0];if(i&&i[F6]){return i[F6]();}},exec:function(F6){var s=this,a=R.toArray(arguments).slice(1);s.each(function(i){if(i[F6]){i[F6].apply(i,a);}});return s;},remove:function(){var i=this.length;while(i--){this[i].remove();}return this;},addClass:function(a){return this.each(function(i){i.classes.add(a);});},removeClass:function(a){return this.each(function(i){i.classes.remove(a);});}};R.each('fire on off show hide append prepend before after reflow'.split(' '),function(F6){t3[F6]=function(){var a=R.toArray(arguments);this.each(function(b){if(F6 in b){b[F6].apply(b,a);}});return this;};});R.each('text name disabled active selected checked visible parent value data'.split(' '),function(F6){t3[F6]=function(H6){return this.prop(F6,H6);};});s3=h3.extend(t3);r3.Collection=s3;var w3=s3;var x3=function(s){this.create=s.create;};x3.create=function(a,F6){return new x3({create:function(o,b){var d;var f=function(e){o.set(b,e.value);};var h=function(e){a.set(F6,e.value);};o.on('change:'+b,h);a.on('change:'+F6,f);d=o._bindings;if(!d){d=o._bindings=[];o.on('destroy',function(){var i=d.length;while(i--){d[i]();}});}d.push(function(){a.off('change:'+F6,f);});return a.get(F6);}});};var y3=tinymce.util.Tools.resolve('tinymce.util.Observable');function z3(m7){return m7.nodeType>0;}function A3(a,b){var k,d;if(a===b){return true;}if(a===null||b===null){return a===b;}if(typeof a!=='object'||typeof b!=='object'){return a===b;}if(R.isArray(b)){if(a.length!==b.length){return false;}k=a.length;while(k--){if(!A3(a[k],b[k])){return false;}}}if(z3(a)||z3(b)){return a===b;}d={};for(k in b){if(!A3(a[k],b[k])){return false;}d[k]=true;}for(k in a){if(!d[k]&&!A3(a[k],b[k])){return false;}}return true;}var B3=h3.extend({Mixins:[y3],init:function(d){var F6,H6;d=d||{};for(F6 in d){H6=d[F6];if(H6 instanceof x3){d[F6]=H6.create(this,F6);}}this.data=d;},set:function(F6,H6){var k,a;var o=this.data[F6];if(H6 instanceof x3){H6=H6.create(this,F6);}if(typeof F6==='object'){for(k in F6){this.set(k,F6[k]);}return this;}if(!A3(o,H6)){this.data[F6]=H6;a={target:this,name:F6,value:H6,oldValue:o};this.fire('change:'+F6,a);this.fire('change',a);}return this;},get:function(F6){return this.data[F6];},has:function(F6){return F6 in this.data;},bind:function(F6){return x3.create(this,F6);},destroy:function(){this.fire('destroy');}});var C3={};var D3;var E3={add:function(a){var P=a.parent();if(P){if(!P._layout||P._layout.isNative()){return;}if(!C3[P._id]){C3[P._id]=P;}if(!D3){D3=true;u.requestAnimationFrame(function(){var i,a;D3=false;for(i in C3){a=C3[i];if(a.state.get('rendered')){a.reflow();}}C3={};},document.body);}}},remove:function(a){if(C3[a._id]){delete C3[a._id];}}};var F3=function(a){var b=H3(a);if(b&&q.DOM.getStyle(b,'position',true)!=='static'){var d=q.DOM.getPos(b);var e=b.scrollLeft-d.x;var f=b.scrollTop-d.y;return w2.some({x:e,y:f});}else{return w2.none();}};var G3=function(e,a){var b=q.DOM.select(e.settings.ui_container)[0];a.getRoot().uiContainer=b;};var H3=function(a){return a?a.getRoot().uiContainer:null;};var I3=function(f,t){return t.uiContainer=H3(f);};var J3={getUiContainerDelta:F3,setUiContainer:G3,getUiContainer:H3,inheritUiContainer:I3};var K3='onmousewheel'in document;var L3=false;var M3='mce-';var N3;var O3=0;var P3={Statics:{classPrefix:M3},isRtl:function(){return N3.rtl;},classPrefix:M3,init:function(s){var a=this;var b,d;function e(b){var i;b=b.split(' ');for(i=0;i<b.length;i++){a.classes.add(b[i]);}}a.settings=s=R.extend({},a.Defaults,s);a._id=s.id||'mceu_'+O3++;a._aria={role:s.role};a._elmCache={};a.$=g3;a.state=new B3({visible:true,active:false,disabled:false,value:''});a.data=new B3(s.data);a.classes=new l3(function(){if(a.state.get('rendered')){a.getEl().className=this.toString();}});a.classes.prefix=a.classPrefix;b=s.classes;if(b){if(a.Defaults){d=a.Defaults.classes;if(d&&b!==d){e(d);}}e(b);}R.each('title text name visible disabled active value'.split(' '),function(F6){if(F6 in s){a[F6](s[F6]);}});a.on('click',function(){if(a.disabled()){return false;}});a.settings=s;a.borderBox=j3.parseBox(s.border);a.paddingBox=j3.parseBox(s.padding);a.marginBox=j3.parseBox(s.margin);if(s.hidden){a.hide();}},Properties:'parent,name',getContainerElm:function(){var a=J3.getUiContainer(this);return a?a:f3.getContainer();},getParentCtrl:function(e){var a;var l=this.getRoot().controlIdLookup;while(e&&l){a=l[e.id];if(a){break;}e=e.parentNode;}return a;},initLayoutRect:function(){var s=this;var a=s.settings;var b,l;var e=s.getEl();var w,h,d,f,i;var j,k,n;b=s.borderBox=s.borderBox||j3.measureBox(e,'border');s.paddingBox=s.paddingBox||j3.measureBox(e,'padding');s.marginBox=s.marginBox||j3.measureBox(e,'margin');n=f3.getSize(e);j=a.minWidth;k=a.minHeight;d=j||n.width;f=k||n.height;w=a.width;h=a.height;i=a.autoResize;i=typeof i!=='undefined'?i:!w&&!h;w=w||d;h=h||f;var o=b.left+b.right;var p=b.top+b.bottom;var r=a.maxWidth||65535;var t=a.maxHeight||65535;s._layoutRect=l={x:a.x||0,y:a.y||0,w:w,h:h,deltaW:o,deltaH:p,contentW:w-o,contentH:h-p,innerW:w-o,innerH:h-p,startMinWidth:j||0,startMinHeight:k||0,minW:Math.min(d,r),minH:Math.min(f,t),maxW:r,maxH:t,autoResize:i,scrollW:0};s._lastLayoutRect={};return l;},layoutRect:function(n){var s=this;var a=s._layoutRect,l,_6,d,b,r;if(!a){a=s.initLayoutRect();}if(n){d=a.deltaW;b=a.deltaH;if(n.x!==undefined){a.x=n.x;}if(n.y!==undefined){a.y=n.y;}if(n.minW!==undefined){a.minW=n.minW;}if(n.minH!==undefined){a.minH=n.minH;}_6=n.w;if(_6!==undefined){_6=_6<a.minW?a.minW:_6;_6=_6>a.maxW?a.maxW:_6;a.w=_6;a.innerW=_6-d;}_6=n.h;if(_6!==undefined){_6=_6<a.minH?a.minH:_6;_6=_6>a.maxH?a.maxH:_6;a.h=_6;a.innerH=_6-b;}_6=n.innerW;if(_6!==undefined){_6=_6<a.minW-d?a.minW-d:_6;_6=_6>a.maxW-d?a.maxW-d:_6;a.innerW=_6;a.w=_6+d;}_6=n.innerH;if(_6!==undefined){_6=_6<a.minH-b?a.minH-b:_6;_6=_6>a.maxH-b?a.maxH-b:_6;a.innerH=_6;a.h=_6+b;}if(n.contentW!==undefined){a.contentW=n.contentW;}if(n.contentH!==undefined){a.contentH=n.contentH;}l=s._lastLayoutRect;if(l.x!==a.x||l.y!==a.y||l.w!==a.w||l.h!==a.h){r=N3.repaintControls;if(r){if(r.map&&!r.map[s._id]){r.push(s);r.map[s._id]=true;}}l.x=a.x;l.y=a.y;l.w=a.w;l.h=a.h;}return s;}return a;},repaint:function(){var s=this;var a,b,d,r,e;var f,h,l,Oa,H6;Oa=!document.createRange?Math.round:function(H6){return H6;};a=s.getEl().style;r=s._layoutRect;l=s._lastRepaintRect||{};e=s.borderBox;f=e.left+e.right;h=e.top+e.bottom;if(r.x!==l.x){a.left=Oa(r.x)+'px';l.x=r.x;}if(r.y!==l.y){a.top=Oa(r.y)+'px';l.y=r.y;}if(r.w!==l.w){H6=Oa(r.w-f);a.width=(H6>=0?H6:0)+'px';l.w=r.w;}if(r.h!==l.h){H6=Oa(r.h-h);a.height=(H6>=0?H6:0)+'px';l.h=r.h;}if(s._hasBody&&r.innerW!==l.innerW){H6=Oa(r.innerW);d=s.getEl('body');if(d){b=d.style;b.width=(H6>=0?H6:0)+'px';}l.innerW=r.innerW;}if(s._hasBody&&r.innerH!==l.innerH){H6=Oa(r.innerH);d=d||s.getEl('body');if(d){b=b||d.style;b.height=(H6>=0?H6:0)+'px';}l.innerH=r.innerH;}s._lastRepaintRect=l;s.fire('repaint',{},false);},updateLayoutRect:function(){var s=this;s.parent()._lastRect=null;f3.css(s.getEl(),{width:'',height:''});s._layoutRect=s._lastRepaintRect=s._lastLayoutRect=null;s.initLayoutRect();},on:function(F6,a){var s=this;function r(F6){var a,b;if(typeof F6!=='string'){return F6;}return function(e){if(!a){s.parentsAndSelf().each(function(d){var f=d.settings.callbacks;if(f&&(a=f[F6])){b=d;return false;}});}if(!a){e.action=F6;this.fire('execute',e);return;}return a.call(b,e);};}Q3(s).on(F6,r(a));return s;},off:function(F6,a){Q3(this).off(F6,a);return this;},fire:function(F6,a,b){var s=this;a=a||{};if(!a.control){a.control=s;}a=Q3(s).fire(F6,a);if(b!==false&&s.parent){var p=s.parent();while(p&&!a.isPropagationStopped()){p.fire(F6,a,false);p=p.parent();}}return a;},hasEventListeners:function(F6){return Q3(this).has(F6);},parents:function(s){var a=this;var b,W8=new w3();for(b=a.parent();b;b=b.parent()){W8.add(b);}if(s){W8=W8.filter(s);}return W8;},parentsAndSelf:function(s){return new w3(this).add(this.parents(s));},next:function(){var p=this.parent().items();return p[p.indexOf(this)+1];},prev:function(){var p=this.parent().items();return p[p.indexOf(this)-1];},innerHtml:function(h){this.$el.html(h);return this;},getEl:function(s){var i=s?this._id+'-'+s:this._id;if(!this._elmCache[i]){this._elmCache[i]=g3('#'+i)[0];}return this._elmCache[i];},show:function(){return this.visible(true);},hide:function(){return this.visible(false);},focus:function(){try{this.getEl().focus();}catch(e){}return this;},blur:function(){this.getEl().blur();return this;},aria:function(F6,H6){var s=this,e=s.getEl(s.ariaTarget);if(typeof H6==='undefined'){return s._aria[F6];}s._aria[F6]=H6;if(s.state.get('rendered')){e.setAttribute(F6==='role'?F6:'aria-'+F6,H6);}return s;},encode:function(t,a){if(a!==false){t=this.translate(t);}return(t||'').replace(/[&<>"]/g,function(C){return'&#'+C.charCodeAt(0)+';';});},translate:function(t){return N3.translate?N3.translate(t):t;},before:function(i){var s=this,P=s.parent();if(P){P.insert(i,P.items().indexOf(s),true);}return s;},after:function(i){var s=this,P=s.parent();if(P){P.insert(i,P.items().indexOf(s));}return s;},remove:function(){var s=this;var e=s.getEl();var P=s.parent();var n,i;if(s.items){var a=s.items().toArray();i=a.length;while(i--){a[i].remove();}}if(P&&P.items){n=[];P.items().each(function(b){if(b!==s){n.push(b);}});P.items().set(n);P._lastRect=null;}if(s._eventsRoot&&s._eventsRoot===s){g3(e).off();}var l=s.getRoot().controlIdLookup;if(l){delete l[s._id];}if(e&&e.parentNode){e.parentNode.removeChild(e);}s.state.set('rendered',false);s.state.destroy();s.fire('remove');return s;},renderBefore:function(e){g3(e).before(this.renderHtml());this.postRender();return this;},renderTo:function(e){g3(e||this.getContainerElm()).append(this.renderHtml());this.postRender();return this;},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>';},postRender:function(){var s=this;var a=s.settings;var b,d,P,F6,p;s.$el=g3(s.getEl());s.state.set('rendered',true);for(F6 in a){if(F6.indexOf('on')===0){s.on(F6.substr(2),a[F6]);}}if(s._eventsRoot){for(P=s.parent();!p&&P;P=P.parent()){p=P._eventsRoot;}if(p){for(F6 in p._nativeEvents){s._nativeEvents[F6]=true;}}}R3(s);if(a.style){b=s.getEl();if(b){b.setAttribute('style',a.style);b.style.cssText=a.style;}}if(s.settings.border){d=s.borderBox;s.$el.css({'border-top-width':d.top,'border-right-width':d.right,'border-bottom-width':d.bottom,'border-left-width':d.left});}var r=s.getRoot();if(!r.controlIdLookup){r.controlIdLookup={};}r.controlIdLookup[s._id]=s;for(var k in s._aria){s.aria(k,s._aria[k]);}if(s.state.get('visible')===false){s.getEl().style.display='none';}s.bindStates();s.state.on('change:visible',function(e){var f=e.value;var h;if(s.state.get('rendered')){s.getEl().style.display=f===false?'none':'';s.getEl().getBoundingClientRect();}h=s.parent();if(h){h._lastRect=null;}s.fire(f?'show':'hide');E3.add(s);});s.fire('postrender',{},false);},bindStates:function(){},scrollIntoView:function(a){function b(e,r){var x,y,P=e;x=y=0;while(P&&P!==r&&P.nodeType){x+=P.offsetLeft||0;y+=P.offsetTop||0;P=P.offsetParent;}return{x:x,y:y};}var e=this.getEl(),p=e.parentNode;var x,y,w,h,d,f;var i=b(e,p);x=i.x;y=i.y;w=e.offsetWidth;h=e.offsetHeight;d=p.clientWidth;f=p.clientHeight;if(a==='end'){x-=d-w;y-=f-h;}else if(a==='center'){x-=d/2-w/2;y-=f/2-h/2;}p.scrollLeft=x;p.scrollTop=y;return this;},getRoot:function(){var a=this,r;var W8=[];while(a){if(a.rootControl){r=a.rootControl;break;}W8.push(a);r=a;a=a.parent();}if(!r){r=this;}var i=W8.length;while(i--){W8[i].rootControl=r;}return r;},reflow:function(){E3.remove(this);var P=this.parent();if(P&&P._layout&&!P._layout.isNative()){P.reflow();}return this;}};R.each('text title visible disabled active value'.split(' '),function(F6){P3[F6]=function(H6){if(arguments.length===0){return this.state.get(F6);}if(typeof H6!=='undefined'){this.state.set(F6,H6);}return this;};});N3=h3.extend(P3);function Q3(o){if(!o._eventDispatcher){o._eventDispatcher=new i3({scope:o,toggleEvent:function(F6,s){if(s&&i3.isNative(F6)){if(!o._nativeEvents){o._nativeEvents={};}o._nativeEvents[F6]=true;if(o.state.get('rendered')){R3(o);}}}});}return o._eventDispatcher;}function R3(a){var i,l,W8,b,n,F6;function d(e){var o=a.getParentCtrl(e.target);if(o){o.fire(e.type,e);}}function f(){var e=b._lastHoverCtrl;if(e){e.fire('mouseleave',{target:e.getEl()});e.parents().each(function(e){e.fire('mouseleave',{target:e.getEl()});});b._lastHoverCtrl=null;}}function h(e){var o=a.getParentCtrl(e.target),p=b._lastHoverCtrl,r=0,i,W8,s;if(o!==p){b._lastHoverCtrl=o;W8=o.parents().toArray().reverse();W8.push(o);if(p){s=p.parents().toArray().reverse();s.push(p);for(r=0;r<s.length;r++){if(W8[r]!==s[r]){break;}}for(i=s.length-1;i>=r;i--){p=s[i];p.fire('mouseleave',{target:p.getEl()});}}for(i=r;i<W8.length;i++){o=W8[i];o.fire('mouseenter',{target:o.getEl()});}}}function j(e){e.preventDefault();if(e.type==='mousewheel'){e.deltaY=-1/40*e.wheelDelta;if(e.wheelDeltaX){e.deltaX=-1/40*e.wheelDeltaX;}}else{e.deltaX=0;e.deltaY=e.detail;}e=a.fire('wheel',e);}n=a._nativeEvents;if(n){W8=a.parents().toArray();W8.unshift(a);for(i=0,l=W8.length;!b&&i<l;i++){b=W8[i]._eventsRoot;}if(!b){b=W8[W8.length-1]||a;}a._eventsRoot=b;for(l=i,i=0;i<l;i++){W8[i]._eventsRoot=b;}var k=b._delegates;if(!k){k=b._delegates={};}for(F6 in n){if(!n){return false;}if(F6==='wheel'&&!L3){if(K3){g3(a.getEl()).on('mousewheel',j);}else{g3(a.getEl()).on('DOMMouseScroll',j);}continue;}if(F6==='mouseenter'||F6==='mouseleave'){if(!b._hasMouseEnter){g3(b.getEl()).on('mouseleave',f).on('mouseover',h);b._hasMouseEnter=1;}}else if(!k[F6]){g3(b.getEl()).on(F6,d);k[F6]=true;}n[F6]=false;}}}var S3=N3;var T3=function(e){return f3.getRuntimeStyle(e,'position')==='static';};var U3=function(a){return a.state.get('fixed');};function V3(a,t,r){var b,p,x,y,s,d,e,f,v,_6;v=X3();p=f3.getPos(t,J3.getUiContainer(a));x=p.x;y=p.y;if(U3(a)&&T3(document.body)){x-=v.x;y-=v.y;}b=a.getEl();_6=f3.getSize(b);s=_6.width;d=_6.height;_6=f3.getSize(t);e=_6.width;f=_6.height;r=(r||'').split('');if(r[0]==='b'){y+=f;}if(r[1]==='r'){x+=e;}if(r[0]==='c'){y+=Math.round(f/2);}if(r[1]==='c'){x+=Math.round(e/2);}if(r[3]==='b'){y-=d;}if(r[4]==='r'){x-=s;}if(r[3]==='c'){y-=Math.round(d/2);}if(r[4]==='c'){x-=Math.round(s/2);}return{x:x,y:y,w:s,h:d};}var W3=function(a){return{x:0,y:0,w:a.scrollWidth-1,h:a.scrollHeight-1};};var X3=function(){var a=window;var x=Math.max(a.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft);var y=Math.max(a.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop);var w=a.innerWidth||document.documentElement.clientWidth;var h=a.innerHeight||document.documentElement.clientHeight;return{x:x,y:y,w:x+w,h:y+h};};var Y3=function(a){var b=J3.getUiContainer(a);return b&&!U3(a)?W3(b):X3();};var Z3={testMoveRel:function(e,r){var v=Y3(this);for(var i=0;i<r.length;i++){var p=V3(this,e,r[i]);if(U3(this)){if(p.x>0&&p.x+p.w<v.w&&p.y>0&&p.y+p.h<v.h){return r[i];}}else{if(p.x>v.x&&p.x+p.w<v.w&&p.y>v.y&&p.y+p.h<v.h){return r[i];}}}return r[0];},moveRel:function(e,r){if(typeof r!=='string'){r=this.testMoveRel(e,r);}var p=V3(this,e,r);return this.moveTo(p.x,p.y);},moveBy:function(d,a){var s=this,r=s.layoutRect();s.moveTo(r.x+d,r.y+a);return s;},moveTo:function(x,y){var s=this;function cc(H6,b,_6){if(H6<0){return 0;}if(H6+_6>b){H6=b-_6;return H6<0?0:H6;}return H6;}if(s.settings.constrainToViewport){var v=Y3(this);var l=s.layoutRect();x=cc(x,v.w,l.w);y=cc(y,v.h,l.h);}var a=J3.getUiContainer(s);if(a&&T3(a)&&!U3(s)){x-=a.scrollLeft;y-=a.scrollTop;}if(a){x+=1;y+=1;}if(s.state.get('rendered')){s.layoutRect({x:x,y:y}).repaint();}else{s.settings.x=x;s.settings.y=y;}s.fire('move',{x:x,y:y});return s;}};var $3=S3.extend({Mixins:[Z3],Defaults:{classes:'widget tooltip tooltip-n'},renderHtml:function(){var s=this,p=s.classPrefix;return'<div id="'+s._id+'" class="'+s.classes+'" role="presentation">'+'<div class="'+p+'tooltip-arrow"></div>'+'<div class="'+p+'tooltip-inner">'+s.encode(s.state.get('text'))+'</div>'+'</div>';},bindStates:function(){var s=this;s.state.on('change:text',function(e){s.getEl().lastChild.innerHTML=s.encode(e.value);});return s._super();},repaint:function(){var s=this;var a,r;a=s.getEl().style;r=s._layoutRect;a.left=r.x+'px';a.top=r.y+'px';a.zIndex=65535+65535;}});var _3=S3.extend({init:function(s){var a=this;a._super(s);s=a.settings;a.canFocus=true;if(s.tooltip&&_3.tooltips!==false){a.on('mouseenter',function(e){var t=a.tooltip().moveTo(-65535);if(e.control===a){var r=t.text(s.tooltip).show().testMoveRel(a.getEl(),['bc-tc','bc-tl','bc-tr']);t.classes.toggle('tooltip-n',r==='bc-tc');t.classes.toggle('tooltip-nw',r==='bc-tl');t.classes.toggle('tooltip-ne',r==='bc-tr');t.moveRel(a.getEl(),r);}else{t.hide();}});a.on('mouseleave mousedown click',function(){a.tooltip().remove();a._tooltip=null;});}a.aria('label',s.ariaLabel||s.tooltip);},tooltip:function(){if(!this._tooltip){this._tooltip=new $3({type:'tooltip'});J3.inheritUiContainer(this,this._tooltip);this._tooltip.renderTo();}return this._tooltip;},postRender:function(){var s=this,a=s.settings;s._super();if(!s.parent()&&(a.width||a.height)){s.initLayoutRect();s.repaint();}if(a.autofocus){s.focus();}},bindStates:function(){var s=this;function d(b){s.aria('disabled',b);s.classes.toggle('disabled',b);}function a(b){s.aria('pressed',b);s.classes.toggle('active',b);}s.state.on('change:disabled',function(e){d(e.value);});s.state.on('change:active',function(e){a(e.value);});if(s.state.get('disabled')){d(true);}if(s.state.get('active')){a(true);}return s._super();},remove:function(){this._super();if(this._tooltip){this._tooltip.remove();this._tooltip=null;}}});var a4=_3.extend({Defaults:{value:0},init:function(s){var a=this;a._super(s);a.classes.add('progress');if(!a.settings.filter){a.settings.filter=function(H6){return Math.round(H6);};}},renderHtml:function(){var s=this,i=s._id,p=this.classPrefix;return'<div id="'+i+'" class="'+s.classes+'">'+'<div class="'+p+'bar-container">'+'<div class="'+p+'bar"></div>'+'</div>'+'<div class="'+p+'text">0%</div>'+'</div>';},postRender:function(){var s=this;s._super();s.value(s.settings.value);return s;},bindStates:function(){var s=this;function a(H6){H6=s.settings.filter(H6);s.getEl().lastChild.innerHTML=H6+'%';s.getEl().firstChild.firstChild.style.width=H6+'%';}s.state.on('change:value',function(e){a(e.value);});a(s.state.get('value'));return s._super();}});var b4=function(a,t){a.getEl().lastChild.textContent=t+(a.progressBar?' '+a.progressBar.value()+'%':'');};var c4=S3.extend({Mixins:[Z3],Defaults:{classes:'widget notification'},init:function(s){var a=this;a._super(s);a.maxWidth=s.maxWidth;if(s.text){a.text(s.text);}if(s.icon){a.icon=s.icon;}if(s.color){a.color=s.color;}if(s.type){a.classes.add('notification-'+s.type);}if(s.timeout&&(s.timeout<0||s.timeout>0)&&!s.closeButton){a.closeButton=false;}else{a.classes.add('has-close');a.closeButton=true;}if(s.progressBar){a.progressBar=new a4();}a.on('click',function(e){if(e.target.className.indexOf(a.classPrefix+'close')!==-1){a.close();}});},renderHtml:function(){var s=this;var p=s.classPrefix;var i='',a='',b='',n='';if(s.icon){i='<i class="'+p+'ico'+' '+p+'i-'+s.icon+'"></i>';}n=' style="max-width: '+s.maxWidth+'px;'+(s.color?'background-color: '+s.color+';"':'"');if(s.closeButton){a='<button type="button" class="'+p+'close" aria-hidden="true">\xD7</button>';}if(s.progressBar){b=s.progressBar.renderHtml();}return'<div id="'+s._id+'" class="'+s.classes+'"'+n+' role="presentation">'+i+'<div class="'+p+'notification-inner">'+s.state.get('text')+'</div>'+b+a+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;"'+' aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div>'+'</div>';},postRender:function(){var s=this;u.setTimeout(function(){s.$el.addClass(s.classPrefix+'in');b4(s,s.state.get('text'));},100);return s._super();},bindStates:function(){var s=this;s.state.on('change:text',function(e){s.getEl().firstChild.innerHTML=e.value;b4(s,e.value);});if(s.progressBar){s.progressBar.bindStates();s.progressBar.state.on('change:value',function(e){b4(s,s.state.get('text'));});}return s._super();},close:function(){var s=this;if(!s.fire('close').isDefaultPrevented()){s.remove();}return s;},repaint:function(){var s=this;var a,r;a=s.getEl().style;r=s._layoutRect;a.left=r.x+'px';a.top=r.y+'px';a.zIndex=65535-1;}});function d4(e){var a=function(e){return e.inline?e.getElement():e.getContentAreaContainer();};var b=function(){var i=a(e);return f3.getSize(i).width;};var p=function(n){d3.each(n,function(i){i.moveTo(0,0);});};var d=function(n){if(n.length>0){var i=n.slice(0,1)[0];var j=a(e);i.moveRel(j,'tc-tc');d3.each(n,function(k,l){if(l>0){k.moveRel(n[l-1].getEl(),'bc-tc');}});}};var r=function(n){p(n);d(n);};var o=function(i,j){var k=R.extend(i,{maxWidth:b()});var n=new c4(k);n.args=k;if(k.timeout>0){n.timer=setTimeout(function(){n.close();j();},k.timeout);}n.on('close',function(){j();});n.renderTo();return n;};var f=function(n){n.close();};var h=function(n){return n.args;};return{open:o,close:f,reposition:r,getArgs:h};}function e4(d){var S8,P6,s,a;var o,b,e,f;var h=Math.max;S8=d.documentElement;P6=d.body;s=h(S8.scrollWidth,P6.scrollWidth);a=h(S8.clientWidth,P6.clientWidth);o=h(S8.offsetWidth,P6.offsetWidth);b=h(S8.scrollHeight,P6.scrollHeight);e=h(S8.clientHeight,P6.clientHeight);f=h(S8.offsetHeight,P6.offsetHeight);return{width:s<o?a:s,height:b<f?e:b};}function f4(e){var T6,i;if(e.changedTouches){T6='screenX screenY pageX pageY clientX clientY'.split(' ');for(i=0;i<T6.length;i++){e[T6[i]]=e.changedTouches[0][T6[i]];}}}function g4(i,s){var $;var d=s.document||document;var a;var b,f,h,j,k;s=s||{};var l=d.getElementById(s.handle||i);b=function(e){var n=e4(d);var o,p;f4(e);e.preventDefault();a=e.button;o=l;j=e.screenX;k=e.screenY;if(window.getComputedStyle){p=window.getComputedStyle(o,null).getPropertyValue('cursor');}else{p=o.runtimeStyle.cursor;}$=g3('<div></div>').css({position:'absolute',top:0,left:0,width:n.width,height:n.height,zIndex:2147483647,opacity:0.0001,cursor:p}).appendTo(d.body);g3(d).on('mousemove touchmove',h).on('mouseup touchend',f);s.start(e);};h=function(e){f4(e);if(e.button!==a){return f(e);}e.deltaX=e.screenX-j;e.deltaY=e.screenY-k;e.preventDefault();s.drag(e);};f=function(e){f4(e);g3(d).off('mousemove touchmove',h).off('mouseup touchend',f);$.remove();if(s.stop){s.stop(e);}};this.destroy=function(){g3(l).off();};g3(l).on('mousedown touchstart',b);}var h4=tinymce.util.Tools.resolve('tinymce.ui.Factory');var i4=function(e){return e.getAttribute('data-mce-tabstop')?true:false;};function j4(s){var r=s.root;var f,a;function K6(m7){return m7&&m7.nodeType===1;}try{f=document.activeElement;}catch(b){f=document.body;}a=r.getParentCtrl(f);function d(e){e=e||f;if(K6(e)){return e.getAttribute('role');}return null;}function h(e){var i,P=e||f;while(P=P.parentNode){if(i=d(P)){return i;}}}function j(F6){var e=f;if(K6(e)){return e.getAttribute('aria-'+F6);}}function k(e){var i=e.tagName.toUpperCase();return i==='INPUT'||i==='TEXTAREA'||i==='SELECT';}function l(e){if(k(e)&&!e.hidden){return true;}if(i4(e)){return true;}if(/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(d(e))){return true;}return false;}function n(e){var a2=[];function d2(e){if(e.nodeType!==1||e.style.display==='none'||e.disabled){return;}if(l(e)){a2.push(e);}for(var i=0;i<e.childNodes.length;i++){d2(e.childNodes[i]);}}d2(e||r.getEl());return a2;}function o(e){var a2,d2;e=e||a;d2=e.parents().toArray();d2.unshift(e);for(var i=0;i<d2.length;i++){a2=d2[i];if(a2.settings.ariaRoot){break;}}return a2;}function p(e){var i=o(e);var a2=n(i.getEl());if(i.settings.ariaRemember&&'lastAriaIndex'in i){t(i.lastAriaIndex,a2);}else{t(0,a2);}}function t(i,e){if(i<0){i=e.length-1;}else if(i>=e.length){i=0;}if(e[i]){e[i].focus();}return i;}function v(e,a2){var d2=-1;var e2=o();a2=a2||n(e2.getEl());for(var i=0;i<a2.length;i++){if(a2[i]===f){d2=i;}}d2+=e;e2.lastAriaIndex=t(d2,a2);}function w(){var e=h();if(e==='tablist'){v(-1,n(f.parentNode));}else if(a.parent().submenu){d1();}else{v(-1);}}function x(){var e=d(),i=h();if(i==='tablist'){v(1,n(f.parentNode));}else if(e==='menuitem'&&i==='menu'&&j('haspopup')){e1();}else{v(1);}}function y(){v(-1);}function $(){var e=d(),i=h();if(e==='menuitem'&&i==='menubar'){e1();}else if(e==='button'&&j('haspopup')){e1({key:'down'});}else{v(1);}}function a1(e){var i=h();if(i==='tablist'){var a2=n(a.getEl('body'))[0];if(a2){a2.focus();}}else{v(e.shiftKey?-1:1);}}function d1(){a.fire('cancel');}function e1(e){e=e||{};a.fire('click',{target:f,aria:e});}r.on('keydown',function(e){function i(e,a2){if(k(f)||i4(f)){return;}if(d(f)==='slider'){return;}if(a2(e)!==false){e.preventDefault();}}if(e.isDefaultPrevented()){return;}switch(e.keyCode){case 37:i(e,w);break;case 39:i(e,x);break;case 38:i(e,y);break;case 40:i(e,$);break;case 27:d1();break;case 14:case 13:case 32:i(e,e1);break;case 9:a1(e);e.preventDefault();break;}});r.on('focusin',function(e){f=e.target;a=e.control;});return{focusFirst:p};}var k4={};var l4=S3.extend({init:function(s){var a=this;a._super(s);s=a.settings;if(s.fixed){a.state.set('fixed',true);}a._items=new w3();if(a.isRtl()){a.classes.add('rtl');}a.bodyClasses=new l3(function(){if(a.state.get('rendered')){a.getEl('body').className=this.toString();}});a.bodyClasses.prefix=a.classPrefix;a.classes.add('container');a.bodyClasses.add('container-body');if(s.containerCls){a.classes.add(s.containerCls);}a._layout=h4.create((s.layout||'')+'layout');if(a.settings.items){a.add(a.settings.items);}else{a.add(a.render());}a._hasBody=true;},items:function(){return this._items;},find:function(s){s=k4[s]=k4[s]||new r3(s);return s.find(this);},add:function(i){var s=this;s.items().add(s.create(i)).parent(s);return s;},focus:function(k){var s=this;var f,a,i;if(k){a=s.keyboardNav||s.parents().eq(-1)[0].keyboardNav;if(a){a.focusFirst(s);return;}}i=s.find('*');if(s.statusbar){i.add(s.statusbar.items());}i.each(function(b){if(b.settings.autofocus){f=null;return false;}if(b.canFocus){f=f||b;}});if(f){f.focus();}return s;},replace:function(o,n){var a;var b=this.items();var i=b.length;while(i--){if(b[i]===o){b[i]=n;break;}}if(i>=0){a=n.getEl();if(a){a.parentNode.removeChild(a);}a=o.getEl();if(a){a.parentNode.removeChild(a);}}n.parent(this);},create:function(i){var s=this;var a;var b=[];if(!R.isArray(i)){i=[i];}R.each(i,function(d){if(d){if(!(d instanceof S3)){if(typeof d==='string'){d={type:d};}a=R.extend({},s.settings.defaults,d);d.type=a.type=a.type||d.type||s.settings.defaultType||(a.defaults?a.defaults.type:null);d=h4.create(a);}b.push(d);}});return b;},renderNew:function(){var s=this;s.items().each(function(a,i){var b;a.parent(s);if(!a.state.get('rendered')){b=s.getEl('body');if(b.hasChildNodes()&&i<=b.childNodes.length-1){g3(b.childNodes[i]).before(a.renderHtml());}else{g3(b).append(a.renderHtml());}a.postRender();E3.add(a);}});s._layout.applyClasses(s.items().filter(':visible'));s._lastRect=null;return s;},append:function(i){return this.add(i).renderNew();},prepend:function(i){var s=this;s.items().set(s.create(i).concat(s.items().toArray()));return s.renderNew();},insert:function(i,a,b){var s=this;var d,e,f;i=s.create(i);d=s.items();if(!b&&a<d.length-1){a+=1;}if(a>=0&&a<d.length){e=d.slice(0,a).toArray();f=d.slice(a).toArray();d.set(e.concat(i,f));}return s.renderNew();},fromJSON:function(d){var s=this;for(var n in d){s.find('#'+n).value(d[n]);}return s;},toJSON:function(){var s=this,d={};s.find('*').each(function(a){var F6=a.name(),H6=a.value();if(F6&&typeof H6!=='undefined'){d[F6]=H6;}});return d;},renderHtml:function(){var s=this,l=s._layout,r=this.settings.role;s.preRender();l.preRender(s);return'<div id="'+s._id+'" class="'+s.classes+'"'+(r?' role="'+this.settings.role+'"':'')+'>'+'<div id="'+s._id+'-body" class="'+s.bodyClasses+'">'+(s.settings.html||'')+l.renderHtml(s)+'</div>'+'</div>';},postRender:function(){var s=this;var b;s.items().exec('postRender');s._super();s._layout.postRender(s);s.state.set('rendered',true);if(s.settings.style){s.$el.css(s.settings.style);}if(s.settings.border){b=s.borderBox;s.$el.css({'border-top-width':b.top,'border-right-width':b.right,'border-bottom-width':b.bottom,'border-left-width':b.left});}if(!s.parent()){s.keyboardNav=j4({root:s});}return s;},initLayoutRect:function(){var s=this,l=s._super();s._layout.recalc(s);return l;},recalc:function(){var s=this;var r=s._layoutRect;var l=s._lastRect;if(!l||l.w!==r.w||l.h!==r.h){s._layout.recalc(s);r=s.layoutRect();s._lastRect={x:r.x,y:r.y,w:r.w,h:r.h};return true;}},reflow:function(){var i;E3.remove(this);if(this.visible()){S3.repaintControls=[];S3.repaintControls.map={};this.recalc();i=S3.repaintControls.length;while(i--){S3.repaintControls[i].repaint();}if(this.settings.layout!=='flow'&&this.settings.layout!=='stack'){this.repaint();}S3.repaintControls=[];}return this;}});var m4={init:function(){var s=this;s.on('repaint',s.renderScroll);},renderScroll:function(){var s=this,a=2;function r(){var h,d,e;function f(i,p,j,k,l,n){var o,t,v;var w,x,y,$;var a1,d1;t=s.getEl('scroll'+i);if(t){a1=p.toLowerCase();d1=j.toLowerCase();g3(s.getEl('absend')).css(a1,s.layoutRect()[k]-1);if(!l){g3(t).css('display','none');return;}g3(t).css('display','block');o=s.getEl('body');v=s.getEl('scroll'+i+'t');w=o['client'+j]-a*2;w-=h&&d?t['client'+n]:0;x=o['scroll'+j];y=w/x;$={};$[a1]=o['offset'+p]+a;$[d1]=w;g3(t).css($);$={};$[a1]=o['scroll'+p]*y;$[d1]=w*y;g3(v).css($);}}e=s.getEl('body');h=e.scrollWidth>e.clientWidth;d=e.scrollHeight>e.clientHeight;f('h','Left','Width','contentW',h,'Height');f('v','Top','Height','contentH',d,'Width');}function b(){function d(f,p,h,i,j){var k;var l=s._id+'-scroll'+f,n=s.classPrefix;g3(s.getEl()).append('<div id="'+l+'" class="'+n+'scrollbar '+n+'scrollbar-'+f+'">'+'<div id="'+l+'t" class="'+n+'scrollbar-thumb"></div>'+'</div>');s.draghelper=new g4(l+'t',{start:function(){k=s.getEl('body')['scroll'+p];g3('#'+l).addClass(n+'active');},drag:function(e){var o,t,v,w;var x=s.layoutRect();t=x.contentW>x.innerW;v=x.contentH>x.innerH;w=s.getEl('body')['client'+h]-a*2;w-=t&&v?s.getEl('scroll'+f)['client'+j]:0;o=w/s.getEl('body')['scroll'+h];s.getEl('body')['scroll'+p]=k+e['delta'+i]/o;},stop:function(){g3('#'+l).removeClass(n+'active');}});}s.classes.add('scroll');d('v','Top','Height','Y','Width');d('h','Left','Width','X','Height');}if(s.settings.autoScroll){if(!s._hasScroll){s._hasScroll=true;b();s.on('wheel',function(e){var d=s.getEl('body');d.scrollLeft+=(e.deltaX||0)*10;d.scrollTop+=e.deltaY*10;r();});g3(s.getEl('body')).on('scroll',r);}r();}}};var n4=l4.extend({Defaults:{layout:'fit',containerCls:'panel'},Mixins:[m4],renderHtml:function(){var s=this;var l=s._layout;var i=s.settings.html;s.preRender();l.preRender(s);if(typeof i==='undefined'){i='<div id="'+s._id+'-body" class="'+s.bodyClasses+'">'+l.renderHtml(s)+'</div>';}else{if(typeof i==='function'){i=i.call(s);}s._hasBody=false;}return'<div id="'+s._id+'" class="'+s.classes+'" hidefocus="1" tabindex="-1" role="group">'+(s._preBodyHtml||'')+i+'</div>';}});var o4={resizeToContent:function(){this._layoutRect.autoResize=true;this._lastRect=null;this.reflow();},resizeTo:function(w,h){if(w<=1||h<=1){var r=f3.getWindowSize();w=w<=1?w*r.w:w;h=h<=1?h*r.h:h;}this._layoutRect.autoResize=false;return this.layoutRect({minW:w,minH:h,w:w,h:h}).reflow();},resizeBy:function(d,a){var s=this,r=s.layoutRect();return s.resizeTo(r.w+d,r.h+a);}};var p4;var q4;var r4;var s4=[];var t4=[];var u4;function v4(a,P){while(a){if(a===P){return true;}a=a.parent();}}function w4(e){var i=s4.length;while(i--){var p=s4[i],a=p.getParentCtrl(e.target);if(p.settings.autohide){if(a){if(v4(a,p)||p.parent()===a){continue;}}e=p.fire('autohide',{target:e.target});if(!e.isDefaultPrevented()){p.hide();}}}}function x4(){if(!p4){p4=function(e){if(e.button===2){return;}w4(e);};g3(document).on('click touchstart',p4);}}function y4(){if(!q4){q4=function(){var i;i=s4.length;while(i--){A4(s4[i]);}};g3(window).on('scroll',q4);}}function z4(){if(!r4){var d=document.documentElement;var a=d.clientWidth,b=d.clientHeight;r4=function(){if(!document.all||a!==d.clientWidth||b!==d.clientHeight){a=d.clientWidth;b=d.clientHeight;C4.hideAll();}};g3(window).on('resize',r4);}}function A4(p){var s=f3.getViewPort().y;function t(f,d){var P;for(var i=0;i<s4.length;i++){if(s4[i]!==p){P=s4[i].parent();while(P&&(P=P.parent())){if(P===p){s4[i].fixed(f).moveBy(0,d).repaint();}}}}}if(p.settings.autofix){if(!p.state.get('fixed')){p._autoFixY=p.layoutRect().y;if(p._autoFixY<s){p.fixed(true).layoutRect({y:0}).repaint();t(true,s-p._autoFixY);}}else{if(p._autoFixY>s){p.fixed(false).layoutRect({y:p._autoFixY}).repaint();t(false,p._autoFixY-s);}}}}function B4(a,b){var i,d=C4.zIndex||65535,t;if(a){t4.push(b);}else{i=t4.length;while(i--){if(t4[i]===b){t4.splice(i,1);}}}if(t4.length){for(i=0;i<t4.length;i++){if(t4[i].modal){d++;t=t4[i];}t4[i].getEl().style.zIndex=d;t4[i].zIndex=d;d++;}}var e=g3('#'+b.classPrefix+'modal-block',b.getContainerElm())[0];if(t){g3(e).css('z-index',t.zIndex-1);}else if(e){e.parentNode.removeChild(e);u4=false;}C4.currentZIndex=d;}var C4=n4.extend({Mixins:[Z3,o4],init:function(s){var a=this;a._super(s);a._eventsRoot=a;a.classes.add('floatpanel');if(s.autohide){x4();z4();s4.push(a);}if(s.autofix){y4();a.on('move',function(){A4(this);});}a.on('postrender show',function(e){if(e.control===a){var $;var p=a.classPrefix;if(a.modal&&!u4){$=g3('#'+p+'modal-block',a.getContainerElm());if(!$[0]){$=g3('<div id="'+p+'modal-block" class="'+p+'reset '+p+'fade"></div>').appendTo(a.getContainerElm());}u.setTimeout(function(){$.addClass(p+'in');g3(a.getEl()).addClass(p+'in');});u4=true;}B4(true,a);}});a.on('show',function(){a.parents().each(function(b){if(b.state.get('fixed')){a.fixed(true);return false;}});});if(s.popover){a._preBodyHtml='<div class="'+a.classPrefix+'arrow"></div>';a.classes.add('popover').add('bottom').add(a.isRtl()?'end':'start');}a.aria('label',s.ariaLabel);a.aria('labelledby',a._id);a.aria('describedby',a.describedBy||a._id+'-none');},fixed:function(s){var a=this;if(a.state.get('fixed')!==s){if(a.state.get('rendered')){var v=f3.getViewPort();if(s){a.layoutRect().y-=v.y;}else{a.layoutRect().y+=v.y;}}a.classes.toggle('fixed',s);a.state.set('fixed',s);}return a;},show:function(){var s=this;var i;var a=s._super();i=s4.length;while(i--){if(s4[i]===s){break;}}if(i===-1){s4.push(s);}return a;},hide:function(){D4(this);B4(false,this);return this._super();},hideAll:function(){C4.hideAll();},close:function(){var s=this;if(!s.fire('close').isDefaultPrevented()){s.remove();B4(false,s);}return s;},remove:function(){D4(this);this._super();},postRender:function(){var s=this;if(s.settings.bodyRole){this.getEl('body').setAttribute('role',s.settings.bodyRole);}return s._super();}});C4.hideAll=function(){var i=s4.length;while(i--){var p=s4[i];if(p&&p.settings.autohide){p.hide();s4.splice(i,1);}}};function D4(p){var i;i=s4.length;while(i--){if(s4[i]===p){s4.splice(i,1);}}i=t4.length;while(i--){if(t4[i]===p){t4.splice(i,1);}}}var E4=[];var F4='';function G4(s){var n='width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0';var v=g3('meta[name=viewport]')[0],a;if(m.overrideViewPort===false){return;}if(!v){v=document.createElement('meta');v.setAttribute('name','viewport');document.getElementsByTagName('head')[0].appendChild(v);}a=v.getAttribute('content');if(a&&typeof F4!=='undefined'){F4=a;}v.setAttribute('content',s?n:F4);}function H4(M3,s){if(I4()&&s===false){g3([document.documentElement,document.body]).removeClass(M3+'fullscreen');}}function I4(){for(var i=0;i<E4.length;i++){if(E4[i]._fullscreen){return true;}}return false;}function J4(){if(!m.desktop){var l={w:window.innerWidth,h:window.innerHeight};u.setInterval(function(){var w=window.innerWidth,h=window.innerHeight;if(l.w!==w||l.h!==h){l={w:w,h:h};g3(window).trigger('resize');}},100);}function r(){var i;var a=f3.getWindowSize();var b;for(i=0;i<E4.length;i++){b=E4[i].layoutRect();E4[i].moveTo(E4[i].settings.x||Math.max(0,a.w/2-b.w/2),E4[i].settings.y||Math.max(0,a.h/2-b.h/2));}}g3(window).on('resize',r);}var K4=C4.extend({modal:true,Defaults:{border:1,layout:'flex',containerCls:'panel',role:'dialog',callbacks:{submit:function(){this.fire('submit',{data:this.toJSON()});},close:function(){this.close();}}},init:function(s){var a=this;a._super(s);if(a.isRtl()){a.classes.add('rtl');}a.classes.add('window');a.bodyClasses.add('window-body');a.state.set('fixed',true);if(s.buttons){a.statusbar=new n4({layout:'flex',border:'1 0 0 0',spacing:3,padding:10,align:'center',pack:a.isRtl()?'start':'end',defaults:{type:'button'},items:s.buttons});a.statusbar.classes.add('foot');a.statusbar.parent(a);}a.on('click',function(e){var b=a.classPrefix+'close';if(f3.hasClass(e.target,b)||f3.hasClass(e.target.parentNode,b)){a.close();}});a.on('cancel',function(){a.close();});a.on('move',function(e){if(e.control===a){C4.hideAll();}});a.aria('describedby',a.describedBy||a._id+'-none');a.aria('label',s.title);a._fullscreen=false;},recalc:function(){var s=this;var a=s.statusbar;var l,w,x,n;if(s._fullscreen){s.layoutRect(f3.getWindowSize());s.layoutRect().contentH=s.layoutRect().innerH;}s._super();l=s.layoutRect();if(s.settings.title&&!s._fullscreen){w=l.headerW;if(w>l.w){x=l.x-Math.max(0,w/2);s.layoutRect({w:w,x:x});n=true;}}if(a){a.layoutRect({w:s.layoutRect().innerW}).recalc();w=a.layoutRect().minW+l.deltaW;if(w>l.w){x=l.x-Math.max(0,w-l.w);s.layoutRect({w:w,x:x});n=true;}}if(n){s.recalc();}},initLayoutRect:function(){var s=this;var l=s._super();var d=0,h;if(s.settings.title&&!s._fullscreen){h=s.getEl('head');var _6=f3.getSize(h);l.headerW=_6.width;l.headerH=_6.height;d+=l.headerH;}if(s.statusbar){d+=s.statusbar.layoutRect().h;}l.deltaH+=d;l.minH+=d;l.h+=d;var r=f3.getWindowSize();l.x=s.settings.x||Math.max(0,r.w/2-l.w/2);l.y=s.settings.y||Math.max(0,r.h/2-l.h/2);return l;},renderHtml:function(){var s=this,l=s._layout,i=s._id,p=s.classPrefix;var a=s.settings;var h='',f='',b=a.html;s.preRender();l.preRender(s);if(a.title){h='<div id="'+i+'-head" class="'+p+'window-head">'+'<div id="'+i+'-title" class="'+p+'title">'+s.encode(a.title)+'</div>'+'<div id="'+i+'-dragh" class="'+p+'dragh"></div>'+'<button type="button" class="'+p+'close" aria-hidden="true">'+'<i class="mce-ico mce-i-remove"></i>'+'</button>'+'</div>';}if(a.url){b='<iframe src="'+a.url+'" tabindex="-1"></iframe>';}if(typeof b==='undefined'){b=l.renderHtml(s);}if(s.statusbar){f=s.statusbar.renderHtml();}return'<div id="'+i+'" class="'+s.classes+'" hidefocus="1">'+'<div class="'+s.classPrefix+'reset" role="application">'+h+'<div id="'+i+'-body" class="'+s.bodyClasses+'">'+b+'</div>'+f+'</div>'+'</div>';},fullscreen:function(s){var a=this;var S8=document.documentElement;var b;var p=a.classPrefix;var l;if(s!==a._fullscreen){g3(window).on('resize',function(){var t;if(a._fullscreen){if(!b){t=new Date().getTime();var r=f3.getWindowSize();a.moveTo(0,0).resizeTo(r.w,r.h);if(new Date().getTime()-t>50){b=true;}}else{if(!a._timer){a._timer=u.setTimeout(function(){var r=f3.getWindowSize();a.moveTo(0,0).resizeTo(r.w,r.h);a._timer=0;},50);}}}});l=a.layoutRect();a._fullscreen=s;if(!s){a.borderBox=j3.parseBox(a.settings.border);a.getEl('head').style.display='';l.deltaH+=l.headerH;g3([S8,document.body]).removeClass(p+'fullscreen');a.classes.remove('fullscreen');a.moveTo(a._initial.x,a._initial.y).resizeTo(a._initial.w,a._initial.h);}else{a._initial={x:l.x,y:l.y,w:l.w,h:l.h};a.borderBox=j3.parseBox('0');a.getEl('head').style.display='none';l.deltaH-=l.headerH+2;g3([S8,document.body]).addClass(p+'fullscreen');a.classes.add('fullscreen');var r=f3.getWindowSize();a.moveTo(0,0).resizeTo(r.w,r.h);}}return a.reflow();},postRender:function(){var s=this;var a;setTimeout(function(){s.classes.add('in');s.fire('open');},0);s._super();if(s.statusbar){s.statusbar.postRender();}s.focus();this.dragHelper=new g4(s._id+'-dragh',{start:function(){a={x:s.layoutRect().x,y:s.layoutRect().y};},drag:function(e){s.moveTo(a.x+e.deltaX,a.y+e.deltaY);}});s.on('submit',function(e){if(!e.isDefaultPrevented()){s.close();}});E4.push(s);G4(true);},submit:function(){return this.fire('submit',{data:this.toJSON()});},remove:function(){var s=this;var i;s.dragHelper.destroy();s._super();if(s.statusbar){this.statusbar.remove();}H4(s.classPrefix,false);i=E4.length;while(i--){if(E4[i]===s){E4.splice(i,1);}}G4(E4.length>0);},getContentWindow:function(){var i=this.getEl().getElementsByTagName('iframe')[0];return i?i.contentWindow:null;}});J4();var L4=K4.extend({init:function(s){s={border:1,padding:20,layout:'flex',pack:'center',align:'center',containerCls:'panel',autoScroll:true,buttons:{type:'button',text:'Ok',action:'ok'},items:{type:'label',multiline:true,maxWidth:500,maxHeight:200}};this._super(s);},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(s){var b;var a=s.callback||function(){};function d(t,f,p){return{type:'button',text:t,subtype:p?'primary':'',onClick:function(e){e.control.parents()[1].close();a(f);}};}switch(s.buttons){case L4.OK_CANCEL:b=[d('Ok',true,true),d('Cancel',false)];break;case L4.YES_NO:case L4.YES_NO_CANCEL:b=[d('Yes',1,true),d('No',0)];if(s.buttons===L4.YES_NO_CANCEL){b.push(d('Cancel',-1));}break;default:b=[d('Ok',true,true)];break;}return new K4({padding:20,x:s.x,y:s.y,minWidth:300,minHeight:100,layout:'flex',pack:'center',align:'center',buttons:b,title:s.title,role:'alertdialog',items:{type:'label',multiline:true,maxWidth:500,maxHeight:200,text:s.text},onPostRender:function(){this.aria('describedby',this.items()[0]._id);},onClose:s.onClose,onCancel:function(){a(false);}}).renderTo(document.body).reflow();},alert:function(s,a){if(typeof s==='string'){s={text:s};}s.callback=a;return L4.msgBox(s);},confirm:function(s,a){if(typeof s==='string'){s={text:s};}s.callback=a;s.buttons=L4.OK_CANCEL;return L4.msgBox(s);}}});function M4(e){var o=function(h,p,i){var w;h.title=h.title||' ';h.url=h.url||h.file;if(h.url){h.width=parseInt(h.width||320,10);h.height=parseInt(h.height||240,10);}if(h.body){h.items={defaults:h.defaults,type:h.bodyType||'form',items:h.body,data:h.data,callbacks:h.commands};}if(!h.url&&!h.buttons){h.buttons=[{text:'Ok',subtype:'primary',onclick:function(){w.find('form')[0].submit();}},{text:'Cancel',onclick:function(){w.close();}}];}w=new K4(h);w.on('close',function(){i(w);});if(h.data){w.on('postRender',function(){this.find('*').each(function(j){var F6=j.name();if(F6 in h.data){j.value(h.data[F6]);}});});}w.features=h||{};w.params=p||{};w=w.renderTo(document.body).reflow();return w;};var a=function(h,i,j){var w;w=L4.alert(h,function(){i();});w.on('close',function(){j(w);});return w;};var b=function(h,i,j){var w;w=L4.confirm(h,function(k){i(k);});w.on('close',function(){j(w);});return w;};var d=function(w){w.close();};var f=function(w){return w.params;};var s=function(w,p){w.params=p;};return{open:o,alert:a,confirm:b,close:d,getParams:f,setParams:s};}var N4=function(e,p){var Z1=function(){return $1.renderUI(e,p);};return{renderUI:Z1,getNotificationManagerImpl:function(){return d4(e);},getWindowManagerImpl:function(){return M4(e);}};};var O4={get:N4};var P4=typeof window!=='undefined'?window:Function('return this;')();var Q4=function(p,s){var o=s!==undefined&&s!==null?s:P4;for(var i=0;i<p.length&&o!==undefined&&o!==null;++i)o=o[p[i]];return o;};var R4=function(p,s){var a=p.split('.');return Q4(a,s);};var S4=function(o,p){if(o[p]===undefined||o[p]===null)o[p]={};return o[p];};var T4=function(p,t){var o=t!==undefined?t:P4;for(var i=0;i<p.length;++i)o=S4(o,p[i]);return o;};var U4=function(F6,t){var p=F6.split('.');return T4(p,t);};var V4={path:Q4,resolve:R4,forge:T4,namespace:U4};var W4=function(F6,s){return V4.resolve(F6,s);};var X4=function(F6,s){var a=W4(F6,s);if(a===undefined||a===null)throw F6+' not available on this browser';return a;};var Y4={getOrDie:X4};function Z4(){var f=Y4.getOrDie('FileReader');return new f();}var $4=tinymce.util.Tools.resolve('tinymce.util.Promise');var _4=function(b){return new $4(function(R4){var r=new Z4();r.onloadend=function(){R4(r.result.split(',')[1]);};r.readAsDataURL(b);});};var a5={blobToBase64:_4};var b5=function(){return new $4(function(R4){var f;f=document.createElement('input');f.type='file';f.style.position='fixed';f.style.left=0;f.style.top=0;f.style.opacity=0.001;document.body.appendChild(f);f.onchange=function(e){R4(Array.prototype.slice.call(e.target.files));};f.click();f.parentNode.removeChild(f);});};var c5={pickFile:b5};var d5=0;var e5=function(){var r=function(){return Math.round(Math.random()*4294967295).toString(36);};return's'+Date.now().toString(36)+r()+r()+r();};var f5=function(p){return p+d5++ +e5();};var g5={uuid:f5};var h5=function(d,r){var b={};function s(a){var o,e,f;e=r[a?'startContainer':'endContainer'];f=r[a?'startOffset':'endOffset'];if(e.nodeType===1){o=d.create('span',{'data-mce-type':'bookmark'});if(e.hasChildNodes()){f=Math.min(f,e.childNodes.length-1);if(a){e.insertBefore(o,e.childNodes[f]);}else{d.insertAfter(o,e.childNodes[f]);}}else{e.appendChild(o);}e=o;f=0;}b[a?'startContainer':'endContainer']=e;b[a?'startOffset':'endOffset']=f;}s(true);if(!r.collapsed){s();}return b;};var i5=function(d,b){function r(s){var e,o,m7;function n(e){var m7=e.parentNode.firstChild,i=0;while(m7){if(m7===e){return i;}if(m7.nodeType!==1||m7.getAttribute('data-mce-type')!=='bookmark'){i++;}m7=m7.nextSibling;}return-1;}e=m7=b[s?'startContainer':'endContainer'];o=b[s?'startOffset':'endOffset'];if(!e){return;}if(e.nodeType===1){o=n(e);e=e.parentNode;d.remove(m7);}b[s?'startContainer':'endContainer']=e;b[s?'startOffset':'endOffset']=o;}r(true);r();var a=d.createRng();a.setStart(b.startContainer,b.startOffset);if(b.endContainer){a.setEnd(b.endContainer,b.endOffset);}return a;};var j5={create:h5,resolve:i5};var k5=tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');var l5=tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');var m5=function(r,s,e){var w,m7;var a=[];w=new k5(s,r);for(m7=s;m7;m7=w.next()){if(m7.nodeType===1){a.push(m7);}if(m7===e){break;}}return a;};var n5=function(e,a){var b,d,s;d=e.dom;s=e.selection;b=j5.create(d,s.getRng());R.each(a,function(f){e.dom.remove(f,true);});s.setRng(j5.resolve(d,b));};var o5=function(e){return e.nodeName==='A'&&e.hasAttribute('href');};var p5=function(d,e){var a=d.getParent(e,o5);return a?a:e;};var q5=function(e){var s,a,r,b,d,f,h;d=e.selection;f=e.dom;h=d.getRng();s=p5(f,l5.getNode(h.startContainer,h.startOffset));a=l5.getNode(h.endContainer,h.endOffset);r=e.getBody();b=R.grep(m5(r,s,a),o5);return b;};var r5=function(e){n5(e,q5(e));};var s5={unlinkSelection:r5};var t5=function(a,r){var x,y,h;h='<table data-mce-id="mce" style="width: 100%">';h+='<tbody>';for(y=0;y<r;y++){h+='<tr>';for(x=0;x<a;x++){h+='<td><br></td>';}h+='</tr>';}h+='</tbody>';h+='</table>';return h;};var u5=function(e){var a=e.dom.select('*[data-mce-id]');return a[0];};var v5=function(e,a,r){e.undoManager.transact(function(){var t,b;e.insertContent(t5(a,r));t=u5(e);t.removeAttribute('data-mce-id');b=e.dom.select('td,th',t);e.selection.setCursorLocation(b[0],0);});};var w5=function(e,a,r){e.plugins.table?e.plugins.table.insertTable(a,r):v5(e,a,r);};var x5=function(e,f){e.execCommand('FormatBlock',false,f);};var y5=function(e,b,a){var d,f;d=e.editorUpload.blobCache;f=d.create(g5.uuid('mceu'),a,b);d.add(f);e.insertContent(e.dom.createHTML('img',{src:f.blobUri()}));};var z5=function(e){e.selection.collapse(false);};var A5=function(e){e.focus();s5.unlinkSelection(e);z5(e);};var B5=function(e,a,b){e.focus();e.dom.setAttrib(a,'href',b);z5(e);};var C5=function(e,a){e.execCommand('mceInsertLink',false,{href:a});z5(e);};var D5=function(e,a){var b=e.dom.getParent(e.selection.getStart(),'a[href]');b?B5(e,b,a):C5(e,a);};var E5=function(e,a){a.trim().length===0?A5(e):D5(e,a);};var F5={insertTable:w5,formatBlock:x5,insertBlob:y5,createLink:E5,unlink:A5};var G5=function(e){var x5=function(F6){return function(){F5.formatBlock(e,F6);};};for(var i=1;i<6;i++){var n='h'+i;e.addButton(n,{text:n.toUpperCase(),tooltip:'Heading '+i,stateSelector:n,onclick:x5(n),onPostRender:function(){var s=this.getEl().firstChild.firstChild;s.style.fontWeight='bold';}});}};var H5=function(e,p){e.addButton('quicklink',{icon:'link',tooltip:'Insert/Edit link',stateSelector:'a[href]',onclick:function(){p.showForm(e,'quicklink');}});e.addButton('quickimage',{icon:'image',tooltip:'Insert image',onclick:function(){c5.pickFile().then(function(f){var b=f[0];a5.blobToBase64(b).then(function(a){F5.insertBlob(e,a,b);});});}});e.addButton('quicktable',{icon:'table',tooltip:'Insert table',onclick:function(){p.hide();F5.insertTable(e,2,2);}});G5(e);};var I5={addToEditor:H5};var J5=function(){var a=m.container;if(a&&q.DOM.getStyle(a,'position',true)!=='static'){var b=q.DOM.getPos(a);var d=b.x-a.scrollLeft;var e=b.y-a.scrollTop;return w2.some({x:d,y:e});}else{return w2.none();}};var K5={getUiContainerDelta:J5};var L5=function(h){return/^www\.|\.(com|org|edu|gov|uk|net|ca|de|jp|fr|au|us|ru|ch|it|nl|se|no|es|mil)$/i.test(h.trim());};var M5=function(h){return/^https?:\/\//.test(h.trim());};var N5={isDomainLike:L5,isAbsolute:M5};var O5=function(f){f.find('textbox').eq(0).each(function(a){a.focus();});};var P5=function(F6,s){var f=h4.create(R.extend({type:'form',layout:'flex',direction:'row',padding:5,name:F6,spacing:3},s));f.on('show',function(){O5(f);});return f;};var Q5=function(a,s){return s?a.show():a.hide();};var R5=function(e,h){return new $4(function(R4){e.windowManager.confirm('The URL you entered seems to be an external link. Do you want to add the required http:// prefix?',function(B){var o=B===true?'http://'+h:h;R4(o);});});};var S5=function(e,h){return!N5.isAbsolute(h)&&N5.isDomainLike(h)?R5(e,h):$4.resolve(h);};var T5=function(a,h){var b={};var A5=function(){a.focus();F5.unlink(a);h();};var o=function(e){var f=e.meta;if(f&&f.attach){b={href:this.value(),attach:f.attach};}};var d=function(e){if(e.control===this){var f=void 0,l='';f=a.dom.getParent(a.selection.getStart(),'a[href]');if(f){l=a.dom.getAttrib(f,'href');}this.fromJSON({linkurl:l});Q5(this.find('#unlink'),f);this.find('#linkurl')[0].focus();}};return P5('quicklink',{items:[{type:'button',name:'unlink',icon:'unlink',onclick:A5,tooltip:'Remove link'},{type:'filepicker',name:'linkurl',placeholder:'Paste or type a link',filetype:'file',onchange:o},{type:'button',icon:'checkmark',subtype:'primary',tooltip:'Ok',onclick:'submit'}],onshow:d,onsubmit:function(e){S5(a,e.data.linkurl).then(function(f){a.undoManager.transact(function(){if(f===b.href){b.attach();b={};}F5.createLink(a,f);});h();});}});};var U5={createQuickLinkForm:T5};var V5=function(i,a){var B=function(s,h){return{selector:s,handler:h};};var b=function(s){a.active(s);};var d=function(s){a.disabled(s);};if(a.settings.stateSelector){return B(a.settings.stateSelector,b);}if(a.settings.disabledStateSelector){return B(a.settings.disabledStateSelector,d);}return null;};var W5=function(e,i,a){return function(){var B=V5(i,a);if(B!==null){e.selection.selectorChanged(B.selector,B.handler);}};};var X5=function(i){if(m1.isArray(i)){return i;}else if(m1.isString(i)){return i.split(/[ ,]/);}return[];};var Y5=function(e,F6,i){var t=[];var b;if(!i){return;}R.each(X5(i),function(a){if(a==='|'){b=null;}else{if(e.buttons[a]){if(!b){b={type:'buttongroup',items:[]};t.push(b);}var d=e.buttons[a];if(m1.isFunction(d)){d=d();}d.type=d.type||'button';d=h4.create(d);d.on('postRender',W5(e,a,d));b.items.push(d);}}});return h4.create({type:'toolbar',layout:'flow',name:F6,items:t});};var Z5={create:Y5};var $5=function(){var p,a;var b=function(x,y){return R.map(y,function($){return Z5.create(x,$.id,$.items);});};var h=function(x){return x.items().length>0;};var S=function(x,y){var $=b(x,y).concat([Z5.create(x,'text',J1.getTextSelectionToolbarItems(x)),Z5.create(x,'insert',J1.getInsertToolbarItems(x)),U5.createQuickLinkForm(x,n)]);return h4.create({type:'floatpanel',role:'dialog',classes:'tinymce tinymce-inline arrow',ariaLabel:'Inline toolbar',layout:'flex',direction:'column',align:'stretch',autohide:false,autofix:true,fixed:true,border:1,items:R.grep($,h),oncancel:function(){x.focus();}});};var s=function(p){if(p){p.show();}};var d=function(p,x){p.moveTo(x.x,x.y);};var t=function(p,x){x=x?x.substr(0,2):'';R.each({t:'down',b:'up',c:'center'},function(y,$){p.classes.toggle('arrow-'+y,$===x.substr(0,1));});if(x==='cr'){p.classes.toggle('arrow-left',true);p.classes.toggle('arrow-right',false);}else if(x==='cl'){p.classes.toggle('arrow-left',true);p.classes.toggle('arrow-right',true);}else{R.each({l:'left',r:'right'},function(y,$){p.classes.toggle('arrow-'+y,$===x.substr(1,1));});}};var e=function(p,x){var y=p.items().filter('#'+x);if(y.length>0){y[0].show();p.reflow();return true;}return false;};var r=function(p,x,y,$){var a1,d1,B,e1;e1=J1.getPositionHandler(y);a1=N.getContentAreaRect(y);d1=q.DOM.getRect(p.getEl());if(x==='insert'){B=B1.calcInsert($,a1,d1);}else{B=B1.calc($,a1,d1);}if(B){var a2=K5.getUiContainerDelta().getOr({x:0,y:0});var d2={x:B.rect.x-a2.x,y:B.rect.y-a2.y,w:B.rect.w,h:B.rect.h};a=$;d(p,B1.userConstrain(e1,$,a1,d2));t(p,B.position);return true;}else{return false;}};var f=function(p,x,y,$){s(p);p.items().hide();if(!e(p,x)){n();return;}if(r(p,x,y,$)===false){n();}};var i=function(){return p.items().filter('form:visible').length>0;};var j=function(x,y){if(p){p.items().hide();if(!e(p,y)){n();return;}var $=void 0,a1=void 0,B=void 0,d1=void 0;s(p);p.items().hide();e(p,y);d1=J1.getPositionHandler(x);$=N.getContentAreaRect(x);a1=q.DOM.getRect(p.getEl());B=B1.calc(a,$,a1);if(B){a1=B.rect;d(p,B1.userConstrain(d1,a,$,a1));t(p,B.position);}}};var k=function(x,y,$,a1){if(!p){_.fireBeforeRenderUI(x);p=S(x,a1);p.renderTo().reflow().moveTo($.x,$.y);x.nodeChanged();}f(p,y,x,$);};var l=function(x,y,$){if(p){r(p,y,x,$);}};var n=function(){if(p){p.hide();}};var o=function(){if(p){p.find('toolbar:visible').eq(0).each(function(x){x.focus(true);});}};var v=function(){if(p){p.remove();p=null;}};var w=function(){return p&&p.visible()&&i();};return{show:k,showForm:j,reposition:l,inForm:w,hide:n,focus:o,remove:v};};var _5=h3.extend({Defaults:{firstControlClass:'first',lastControlClass:'last'},init:function(s){this.settings=R.extend({},this.Defaults,s);},preRender:function(a){a.bodyClasses.add(this.settings.containerClass);},applyClasses:function(i){var s=this;var a=s.settings;var f,l,b,d;f=a.firstControlClass;l=a.lastControlClass;i.each(function(e){e.classes.remove(f).remove(l).add(a.controlClass);if(e.visible()){if(!b){b=e;}d=e;}});if(b){b.classes.add(f);}if(d){d.classes.add(l);}},renderHtml:function(a){var s=this;var h='';s.applyClasses(a.items());a.items().each(function(i){h+=i.renderHtml();});return h;},recalc:function(){},postRender:function(){},isNative:function(){return false;}});var a6=_5.extend({Defaults:{containerClass:'abs-layout',controlClass:'abs-layout-item'},recalc:function(a){a.items().filter(':visible').each(function(b){var s=b.settings;b.layoutRect({x:s.x,y:s.y,w:s.w,h:s.h});if(b.recalc){b.recalc();}});},renderHtml:function(a){return'<div id="'+a._id+'-absend" class="'+a.classPrefix+'abs-end"></div>'+this._super(a);}});var b6=_3.extend({Defaults:{classes:'widget btn',role:'button'},init:function(s){var a=this;var _6;a._super(s);s=a.settings;_6=a.settings.size;a.on('click mousedown',function(e){e.preventDefault();});a.on('touchstart',function(e){a.fire('click',e);e.preventDefault();});if(s.subtype){a.classes.add(s.subtype);}if(_6){a.classes.add('btn-'+_6);}if(s.icon){a.icon(s.icon);}},icon:function(i){if(!arguments.length){return this.state.get('icon');}this.state.set('icon',i);return this;},repaint:function(){var b=this.getEl().firstChild;var a;if(b){a=b.style;a.width=a.height='100%';}this._super();},renderHtml:function(){var s=this,i=s._id,p=s.classPrefix;var a=s.state.get('icon'),b;var t=s.state.get('text');var d='';var e;var f=s.settings;b=f.image;if(b){a='none';if(typeof b!=='string'){b=window.getSelection?b[0]:b[1];}b=' style="background-image: url(\''+b+'\')"';}else{b='';}if(t){s.classes.add('btn-has-text');d='<span class="'+p+'txt">'+s.encode(t)+'</span>';}a=a?p+'ico '+p+'i-'+a:'';e=typeof f.active==='boolean'?' aria-pressed="'+f.active+'"':'';return'<div id="'+i+'" class="'+s.classes+'" tabindex="-1"'+e+'>'+'<button id="'+i+'-button" role="presentation" type="button" tabindex="-1">'+(a?'<i class="'+a+'"'+b+'></i>':'')+d+'</button>'+'</div>';},bindStates:function(){var s=this,$=s.$,t=s.classPrefix+'txt';function a(b){var d=$('span.'+t,s.getEl());if(b){if(!d[0]){$('button:first',s.getEl()).append('<span class="'+t+'"></span>');d=$('span.'+t,s.getEl());}d.html(s.encode(b));}else{d.remove();}s.classes.toggle('btn-has-text',!!b);}s.state.on('change:text',function(e){a(e.value);});s.state.on('change:icon',function(e){var i=e.value;var p=s.classPrefix;s.settings.icon=i;i=i?p+'ico '+p+'i-'+s.settings.icon:'';var b=s.getEl().firstChild;var d=b.getElementsByTagName('i')[0];if(i){if(!d||d!==b.firstChild){d=document.createElement('i');b.insertBefore(d,b.firstChild);}d.className=i;}else if(d){b.removeChild(d);}a(s.state.get('text'));});return s._super();}});var c6=b6.extend({init:function(s){var a=this;s=R.extend({text:'Browse...',multiple:false,accept:null},s);a._super(s);a.classes.add('browsebutton');if(s.multiple){a.classes.add('multiple');}},postRender:function(){var s=this;var i=f3.create('input',{type:'file',id:s._id+'-browse',accept:s.settings.accept});s._super();g3(i).on('change',function(e){var f=e.target.files;s.value=function(){if(!f.length){return null;}else if(s.settings.multiple){return f;}else{return f[0];}};e.preventDefault();if(f.length){s.fire('change',e);}});g3(i).on('click',function(e){e.stopPropagation();});g3(s.getEl('button')).on('click',function(e){e.stopPropagation();i.click();});s.getEl().appendChild(i);},remove:function(){g3(this.getEl('button')).off();g3(this.getEl('input')).off();this._super();}});var d6=l4.extend({Defaults:{defaultType:'button',role:'group'},renderHtml:function(){var s=this,l=s._layout;s.classes.add('btn-group');s.preRender();l.preRender(s);return'<div id="'+s._id+'" class="'+s.classes+'">'+'<div id="'+s._id+'-body">'+(s.settings.html||'')+l.renderHtml(s)+'</div>'+'</div>';}});var e6=_3.extend({Defaults:{classes:'checkbox',role:'checkbox',checked:false},init:function(s){var a=this;a._super(s);a.on('click mousedown',function(e){e.preventDefault();});a.on('click',function(e){e.preventDefault();if(!a.disabled()){a.checked(!a.checked());}});a.checked(a.settings.checked);},checked:function(s){if(!arguments.length){return this.state.get('checked');}this.state.set('checked',s);return this;},value:function(s){if(!arguments.length){return this.checked();}return this.checked(s);},renderHtml:function(){var s=this,i=s._id,p=s.classPrefix;return'<div id="'+i+'" class="'+s.classes+'" unselectable="on" aria-labelledby="'+i+'-al" tabindex="-1">'+'<i class="'+p+'ico '+p+'i-checkbox"></i>'+'<span id="'+i+'-al" class="'+p+'label">'+s.encode(s.state.get('text'))+'</span>'+'</div>';},bindStates:function(){var s=this;function a(b){s.classes.toggle('checked',b);s.aria('checked',b);}s.state.on('change:text',function(e){s.getEl('al').firstChild.data=s.translate(e.value);});s.state.on('change:checked change:value',function(e){s.fire('change');a(e.value);});s.state.on('change:icon',function(e){var i=e.value;var p=s.classPrefix;if(typeof i==='undefined'){return s.settings.icon;}s.settings.icon=i;i=i?p+'ico '+p+'i-'+s.settings.icon:'';var b=s.getEl().firstChild;var d=b.getElementsByTagName('i')[0];if(i){if(!d||d!==b.firstChild){d=document.createElement('i');b.insertBefore(d,b.firstChild);}d.className=i;}else if(d){b.removeChild(d);}});if(s.state.get('checked')){a(true);}return s._super();}});var f6=tinymce.util.Tools.resolve('tinymce.util.VK');var g6=_3.extend({init:function(s){var a=this;a._super(s);s=a.settings;a.classes.add('combobox');a.subinput=true;a.ariaTarget='inp';s.menu=s.menu||s.values;if(s.menu){s.icon='caret';}a.on('click',function(e){var b=e.target;var r=a.getEl();if(!g3.contains(r,b)&&b!==r){return;}while(b&&b!==r){if(b.id&&b.id.indexOf('-open')!==-1){a.fire('action');if(s.menu){a.showMenu();if(e.aria){a.menu.items()[0].focus();}}}b=b.parentNode;}});a.on('keydown',function(e){var r;if(e.keyCode===13&&e.target.nodeName==='INPUT'){e.preventDefault();a.parents().reverse().each(function(b){if(b.toJSON){r=b;return false;}});a.fire('submit',{data:r.toJSON()});}});a.on('keyup',function(e){if(e.target.nodeName==='INPUT'){var o=a.state.get('value');var n=e.target.value;if(n!==o){a.state.set('value',n);a.fire('autocomplete',e);}}});a.on('mouseover',function(e){var t=a.tooltip().moveTo(-65535);if(a.statusLevel()&&e.target.className.indexOf(a.classPrefix+'status')!==-1){var b=a.statusMessage()||'Ok';var r=t.text(b).show().testMoveRel(e.target,['bc-tc','bc-tl','bc-tr']);t.classes.toggle('tooltip-n',r==='bc-tc');t.classes.toggle('tooltip-nw',r==='bc-tl');t.classes.toggle('tooltip-ne',r==='bc-tr');t.moveRel(e.target,r);}});},statusLevel:function(H6){if(arguments.length>0){this.state.set('statusLevel',H6);}return this.state.get('statusLevel');},statusMessage:function(H6){if(arguments.length>0){this.state.set('statusMessage',H6);}return this.state.get('statusMessage');},showMenu:function(){var s=this;var a=s.settings;var b;if(!s.menu){b=a.menu||[];if(b.length){b={type:'menu',items:b};}else{b.type=b.type||'menu';}s.menu=h4.create(b).parent(s).renderTo(s.getContainerElm());s.fire('createmenu');s.menu.reflow();s.menu.on('cancel',function(e){if(e.control===s.menu){s.focus();}});s.menu.on('show hide',function(e){e.control.items().each(function(d){d.active(d.value()===s.value());});}).fire('show');s.menu.on('select',function(e){s.value(e.control.value());});s.on('focusin',function(e){if(e.target.tagName.toUpperCase()==='INPUT'){s.menu.hide();}});s.aria('expanded',true);}s.menu.show();s.menu.layoutRect({w:s.layoutRect().w});s.menu.moveRel(s.getEl(),s.isRtl()?['br-tr','tr-br']:['bl-tl','tl-bl']);},focus:function(){this.getEl('inp').focus();},repaint:function(){var s=this,e=s.getEl(),o=s.getEl('open'),r=s.layoutRect();var w,l,i=0;var a=e.firstChild;if(s.statusLevel()&&s.statusLevel()!=='none'){i=parseInt(f3.getRuntimeStyle(a,'padding-right'),10)-parseInt(f3.getRuntimeStyle(a,'padding-left'),10);}if(o){w=r.w-f3.getSize(o).width-10;}else{w=r.w-10;}var d=document;if(d.all&&(!d.documentMode||d.documentMode<=8)){l=s.layoutRect().h-2+'px';}g3(a).css({width:w-i,lineHeight:l});s._super();return s;},postRender:function(){var s=this;g3(this.getEl('inp')).on('change',function(e){s.state.set('value',e.target.value);s.fire('change',e);});return s._super();},renderHtml:function(){var s=this,i=s._id,a=s.settings,p=s.classPrefix;var H6=s.state.get('value')||'';var b,t,o='',e='',d='';if('spellcheck'in a){e+=' spellcheck="'+a.spellcheck+'"';}if(a.maxLength){e+=' maxlength="'+a.maxLength+'"';}if(a.size){e+=' size="'+a.size+'"';}if(a.subtype){e+=' type="'+a.subtype+'"';}d='<i id="'+i+'-status" class="mce-status mce-ico" style="display: none"></i>';if(s.disabled()){e+=' disabled="disabled"';}b=a.icon;if(b&&b!=='caret'){b=p+'ico '+p+'i-'+a.icon;}t=s.state.get('text');if(b||t){o='<div id="'+i+'-open" class="'+p+'btn '+p+'open" tabIndex="-1" role="button">'+'<button id="'+i+'-action" type="button" hidefocus="1" tabindex="-1">'+(b!=='caret'?'<i class="'+b+'"></i>':'<i class="'+p+'caret"></i>')+(t?(b?' ':'')+t:'')+'</button>'+'</div>';s.classes.add('has-open');}return'<div id="'+i+'" class="'+s.classes+'">'+'<input id="'+i+'-inp" class="'+p+'textbox" value="'+s.encode(H6,false)+'" hidefocus="1"'+e+' placeholder="'+s.encode(a.placeholder)+'" />'+d+o+'</div>';},value:function(H6){if(arguments.length){this.state.set('value',H6);return this;}if(this.state.get('rendered')){this.state.set('value',this.getEl('inp').value);}return this.state.get('value');},showAutoComplete:function(i,t){var s=this;if(i.length===0){s.hideMenu();return;}var a=function(H6,d){return function(){s.fire('selectitem',{title:d,value:H6});};};if(s.menu){s.menu.items().remove();}else{s.menu=h4.create({type:'menu',classes:'combobox-menu',layout:'flow'}).parent(s).renderTo();}R.each(i,function(d){s.menu.add({text:d.title,url:d.previewUrl,match:t,classes:'menu-item-ellipsis',onclick:a(d.value,d.title)});});s.menu.renderNew();s.hideMenu();s.menu.on('cancel',function(e){if(e.control.parent()===s.menu){e.stopPropagation();s.focus();s.hideMenu();}});s.menu.on('select',function(){s.focus();});var b=s.layoutRect().w;s.menu.layoutRect({w:b,minW:0,maxW:b});s.menu.repaint();s.menu.reflow();s.menu.show();s.menu.moveRel(s.getEl(),s.isRtl()?['br-tr','tr-br']:['bl-tl','tl-bl']);},hideMenu:function(){if(this.menu){this.menu.hide();}},bindStates:function(){var s=this;s.state.on('change:value',function(e){if(s.getEl('inp').value!==e.value){s.getEl('inp').value=e.value;}});s.state.on('change:disabled',function(e){s.getEl('inp').disabled=e.value;});s.state.on('change:statusLevel',function(e){var a=s.getEl('status');var p=s.classPrefix,H6=e.value;f3.css(a,'display',H6==='none'?'none':'');f3.toggleClass(a,p+'i-checkmark',H6==='ok');f3.toggleClass(a,p+'i-warning',H6==='warn');f3.toggleClass(a,p+'i-error',H6==='error');s.classes.toggle('has-status',H6!=='none');s.repaint();});f3.on(s.getEl('status'),'mouseleave',function(){s.tooltip().hide();});s.on('cancel',function(e){if(s.menu&&s.menu.visible()){e.stopPropagation();s.hideMenu();}});var f=function(i,a){if(a&&a.items().length>0){a.items().eq(i)[0].focus();}};s.on('keydown',function(e){var k=e.keyCode;if(e.target.nodeName==='INPUT'){if(k===f6.DOWN){e.preventDefault();s.fire('autocomplete');f(0,s.menu);}else if(k===f6.UP){e.preventDefault();f(-1,s.menu);}}});return s._super();},remove:function(){g3(this.getEl('inp')).off();if(this.menu){this.menu.remove();}this._super();}});var h6=g6.extend({init:function(s){var a=this;s.spellcheck=false;if(s.onaction){s.icon='none';}a._super(s);a.classes.add('colorbox');a.on('change keyup postrender',function(){a.repaintColor(a.value());});},repaintColor:function(H6){var o=this.getEl('open');var e=o?o.getElementsByTagName('i')[0]:null;if(e){try{e.style.background=H6;}catch(a){}}},bindStates:function(){var s=this;s.state.on('change:value',function(e){if(s.state.get('rendered')){s.repaintColor(e.value);}});return s._super();}});var i6=b6.extend({showPanel:function(){var s=this,a=s.settings;s.classes.add('opened');if(!s.panel){var p=a.panel;if(p.type){p={layout:'grid',items:p};}p.role=p.role||'dialog';p.popover=true;p.autohide=true;p.ariaRoot=true;s.panel=new C4(p).on('hide',function(){s.classes.remove('opened');}).on('cancel',function(e){e.stopPropagation();s.focus();s.hidePanel();}).parent(s).renderTo(s.getContainerElm());s.panel.fire('show');s.panel.reflow();}else{s.panel.show();}var r=['bc-tc','bc-tl','bc-tr'];var l=['bc-tc','bc-tr','bc-tl','tc-bc','tc-br','tc-bl'];var b=s.panel.testMoveRel(s.getEl(),a.popoverAlign||(s.isRtl()?r:l));s.panel.classes.toggle('start',b.substr(-1)==='l');s.panel.classes.toggle('end',b.substr(-1)==='r');var i=b.substr(0,1)==='t';s.panel.classes.toggle('bottom',!i);s.panel.classes.toggle('top',i);s.panel.moveRel(s.getEl(),b);},hidePanel:function(){var s=this;if(s.panel){s.panel.hide();}},postRender:function(){var s=this;s.aria('haspopup',true);s.on('click',function(e){if(e.control===s){if(s.panel&&s.panel.visible()){s.hidePanel();}else{s.showPanel();s.panel.focus(!!e.aria);}}});return s._super();},remove:function(){if(this.panel){this.panel.remove();this.panel=null;}return this._super();}});var j6=q.DOM;var k6=i6.extend({init:function(s){this._super(s);this.classes.add('splitbtn');this.classes.add('colorbutton');},color:function(a){if(a){this._color=a;this.getEl('preview').style.backgroundColor=a;return this;}return this._color;},resetColor:function(){this._color=null;this.getEl('preview').style.backgroundColor=null;return this;},renderHtml:function(){var s=this,i=s._id,p=s.classPrefix,t=s.state.get('text');var a=s.settings.icon?p+'ico '+p+'i-'+s.settings.icon:'';var b=s.settings.image?' style="background-image: url(\''+s.settings.image+'\')"':'';var d='';if(t){s.classes.add('btn-has-text');d='<span class="'+p+'txt">'+s.encode(t)+'</span>';}return'<div id="'+i+'" class="'+s.classes+'" role="button" tabindex="-1" aria-haspopup="true">'+'<button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(a?'<i class="'+a+'"'+b+'></i>':'')+'<span id="'+i+'-preview" class="'+p+'preview"></span>'+d+'</button>'+'<button type="button" class="'+p+'open" hidefocus="1" tabindex="-1">'+' <i class="'+p+'caret"></i>'+'</button>'+'</div>';},postRender:function(){var s=this,o=s.settings.onclick;s.on('click',function(e){if(e.aria&&e.aria.key==='down'){return;}if(e.control===s&&!j6.getParent(e.target,'.'+s.classPrefix+'open')){e.stopImmediatePropagation();o.call(s,e);}});delete s.settings.onclick;return s._super();}});var l6=tinymce.util.Tools.resolve('tinymce.util.Color');var m6=_3.extend({Defaults:{classes:'widget colorpicker'},init:function(s){this._super(s);},postRender:function(){var s=this;var a=s.color();var h,b,d,f,i;b=s.getEl('h');d=s.getEl('hp');f=s.getEl('sv');i=s.getEl('svp');function j(e,o){var p=f3.getPos(e);var x,y;x=o.pageX-p.x;y=o.pageY-p.y;x=Math.max(0,Math.min(x/e.clientWidth,1));y=Math.max(0,Math.min(y/e.clientHeight,1));return{x:x,y:y};}function k(h,e){var o=(360-h.h)/360;f3.css(d,{top:o*100+'%'});if(!e){f3.css(i,{left:h.s+'%',top:100-h.v+'%'});}f.style.background=l6({s:100,v:100,h:h.h}).toHex();s.color().parse({s:h.s,v:h.v,h:h.h});}function l(e){var p;p=j(f,e);h.s=p.x*100;h.v=(1-p.y)*100;k(h);s.fire('change');}function n(e){var p;p=j(b,e);h=a.toHsv();h.h=(1-p.y)*360;k(h,true);s.fire('change');}s._repaint=function(){h=a.toHsv();k(h);};s._super();s._svdraghelper=new g4(s._id+'-sv',{start:l,drag:l});s._hdraghelper=new g4(s._id+'-h',{start:n,drag:n});s._repaint();},rgb:function(){return this.color().toRgb();},value:function(H6){var s=this;if(arguments.length){s.color().parse(H6);if(s._rendered){s._repaint();}}else{return s.color().toHex();}},color:function(){if(!this._color){this._color=l6();}return this._color;},renderHtml:function(){var s=this;var a=s._id;var p=s.classPrefix;var h;var b='#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000';function d(){var i,l,f='',j,k;j='filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=';k=b.split(',');for(i=0,l=k.length-1;i<l;i++){f+='<div class="'+p+'colorpicker-h-chunk" style="'+'height:'+100/l+'%;'+j+k[i]+',endColorstr='+k[i+1]+');'+'-ms-'+j+k[i]+',endColorstr='+k[i+1]+')'+'"></div>';}return f;}var e='background: -ms-linear-gradient(top,'+b+');'+'background: linear-gradient(to bottom,'+b+');';h='<div id="'+a+'-h" class="'+p+'colorpicker-h" style="'+e+'">'+d()+'<div id="'+a+'-hp" class="'+p+'colorpicker-h-marker"></div>'+'</div>';return'<div id="'+a+'" class="'+s.classes+'">'+'<div id="'+a+'-sv" class="'+p+'colorpicker-sv">'+'<div class="'+p+'colorpicker-overlay1">'+'<div class="'+p+'colorpicker-overlay2">'+'<div id="'+a+'-svp" class="'+p+'colorpicker-selector1">'+'<div class="'+p+'colorpicker-selector2"></div>'+'</div>'+'</div>'+'</div>'+'</div>'+h+'</div>';}});var n6=_3.extend({init:function(s){var a=this;s=R.extend({height:100,text:'Drop an image here',multiple:false,accept:null},s);a._super(s);a.classes.add('dropzone');if(s.multiple){a.classes.add('multiple');}},renderHtml:function(){var s=this;var a,e;var b=s.settings;a={id:s._id,hidefocus:'1'};e=f3.create('div',a,'<span>'+this.translate(b.text)+'</span>');if(b.height){f3.css(e,'height',b.height+'px');}if(b.width){f3.css(e,'width',b.width+'px');}e.className=s.classes;return e.outerHTML;},postRender:function(){var s=this;var t=function(e){e.preventDefault();s.classes.toggle('dragenter');s.getEl().className=s.classes;};var K2=function(f){var a=s.settings.accept;if(typeof a!=='string'){return f;}var r=new RegExp('('+a.split(/\s*,\s*/).join('|')+')$','i');return R.grep(f,function(b){return r.test(b.name);});};s._super();s.$el.on('dragover',function(e){e.preventDefault();});s.$el.on('dragenter',t);s.$el.on('dragleave',t);s.$el.on('drop',function(e){e.preventDefault();if(s.state.get('disabled')){return;}var f=K2(e.dataTransfer.files);s.value=function(){if(!f.length){return null;}else if(s.settings.multiple){return f;}else{return f[0];}};if(f.length){s.fire('change',e);}});},remove:function(){this.$el.off();this._super();}});var o6=_3.extend({init:function(s){var a=this;if(!s.delimiter){s.delimiter='\xBB';}a._super(s);a.classes.add('path');a.canFocus=true;a.on('click',function(e){var i;var t=e.target;if(i=t.getAttribute('data-index')){a.fire('select',{value:a.row()[i],index:i});}});a.row(a.settings.row);},focus:function(){var s=this;s.getEl().firstChild.focus();return s;},row:function(r){if(!arguments.length){return this.state.get('row');}this.state.set('row',r);return this;},renderHtml:function(){var s=this;return'<div id="'+s._id+'" class="'+s.classes+'">'+s._getDataPathHtml(s.state.get('row'))+'</div>';},bindStates:function(){var s=this;s.state.on('change:row',function(e){s.innerHtml(s._getDataPathHtml(e.value));});return s._super();},_getDataPathHtml:function(d){var s=this;var p=d||[];var i,l,h='';var a=s.classPrefix;for(i=0,l=p.length;i<l;i++){h+=(i>0?'<div class="'+a+'divider" aria-hidden="true"> '+s.settings.delimiter+' </div>':'')+'<div role="button" class="'+a+'path-item'+(i===l-1?' '+a+'last':'')+'" data-index="'+i+'" tabindex="-1" id="'+s._id+'-'+i+'" aria-level="'+(i+1)+'">'+p[i].name+'</div>';}if(!h){h='<div class="'+a+'path-item">\xA0</div>';}return h;}});var p6=o6.extend({postRender:function(){var s=this,a=s.settings.editor;function b(e){if(e.nodeType===1){if(e.nodeName==='BR'||!!e.getAttribute('data-mce-bogus')){return true;}if(e.getAttribute('data-mce-type')==='bookmark'){return true;}}return false;}if(a.settings.elementpath!==false){s.on('select',function(e){a.focus();a.selection.select(this.row()[e.index].element);a.nodeChanged();});a.on('nodeChange',function(e){var o=[];var W8=e.parents;var i=W8.length;while(i--){if(W8[i].nodeType===1&&!b(W8[i])){var d=a.fire('ResolveName',{name:W8[i].nodeName.toLowerCase(),target:W8[i]});if(!d.isDefaultPrevented()){o.push({name:d.name,element:W8[i]});}if(d.isPropagationStopped()){break;}}}s.row(o);});}return s._super();}});var q6=l4.extend({Defaults:{layout:'flex',align:'center',defaults:{flex:1}},renderHtml:function(){var s=this,l=s._layout,p=s.classPrefix;s.classes.add('formitem');l.preRender(s);return'<div id="'+s._id+'" class="'+s.classes+'" hidefocus="1" tabindex="-1">'+(s.settings.title?'<div id="'+s._id+'-title" class="'+p+'title">'+s.settings.title+'</div>':'')+'<div id="'+s._id+'-body" class="'+s.bodyClasses+'">'+(s.settings.html||'')+l.renderHtml(s)+'</div>'+'</div>';}});var r6=l4.extend({Defaults:{containerCls:'form',layout:'flex',direction:'column',align:'stretch',flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit();}}},preRender:function(){var s=this,i=s.items();if(!s.settings.formItemDefaults){s.settings.formItemDefaults={layout:'flex',autoResize:'overflow',defaults:{flex:1}};}i.each(function(a){var f;var l=a.settings.label;if(l){f=new q6(R.extend({items:{type:'label',id:a._id+'-l',text:l,flex:0,forId:a._id,disabled:a.disabled()}},s.settings.formItemDefaults));f.type='formitem';a.aria('labelledby',a._id+'-l');if(typeof a.settings.flex==='undefined'){a.settings.flex=1;}s.replace(a,f);f.add(a);}});},submit:function(){return this.fire('submit',{data:this.toJSON()});},postRender:function(){var s=this;s._super();s.fromJSON(s.settings.data);},bindStates:function(){var s=this;s._super();function r(){var a=0;var l=[];var i,b,d;if(s.settings.labelGapCalc===false){return;}if(s.settings.labelGapCalc==='children'){d=s.find('formitem');}else{d=s.items();}d.filter('formitem').each(function(e){var f=e.items()[0],h=f.getEl().clientWidth;a=h>a?h:a;l.push(f);});b=s.settings.labelGap||0;i=l.length;while(i--){l[i].settings.minWidth=a+b;}}s.on('show',r);r();}});var s6=r6.extend({Defaults:{containerCls:'fieldset',layout:'flex',direction:'column',align:'stretch',flex:1,padding:'25 15 5 15',labelGap:30,spacing:10,border:1},renderHtml:function(){var s=this,l=s._layout,p=s.classPrefix;s.preRender();l.preRender(s);return'<fieldset id="'+s._id+'" class="'+s.classes+'" hidefocus="1" tabindex="-1">'+(s.settings.title?'<legend id="'+s._id+'-title" class="'+p+'fieldset-title">'+s.settings.title+'</legend>':'')+'<div id="'+s._id+'-body" class="'+s.bodyClasses+'">'+(s.settings.html||'')+l.renderHtml(s)+'</div>'+'</fieldset>';}});var t6=0;var u6=function(p){var d=new Date();var t=d.getTime();var r=Math.floor(Math.random()*1000000000);t6++;return p+'_'+r+t6+String(t);};var v6={generate:u6};var w6=function(h,s){var d=s||document;var a=d.createElement('div');a.innerHTML=h;if(!a.hasChildNodes()||a.childNodes.length>1){console.error('HTML does not have a single root node',h);throw'HTML must have a single root node';}return z6(a.childNodes[0]);};var x6=function(t,s){var d=s||document;var m7=d.createElement(t);return z6(m7);};var y6=function(t,s){var d=s||document;var m7=d.createTextNode(t);return z6(m7);};var z6=function(m7){if(m7===null||m7===undefined)throw new Error('Node cannot be null or undefined');return{dom:p2.constant(m7)};};var A6=function(d,x,y){return w2.from(d.dom().elementFromPoint(x,y)).map(z6);};var B6={fromHtml:w6,fromTag:x6,fromText:y6,fromDom:z6,fromPoint:A6};var C6=function(f){var a=false;var r;return function(){if(!a){a=true;r=f.apply(null,arguments);}return r;};};var D6={cached:C6};var E6={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12};var F6=function(O){var r=O.dom().nodeName;return r.toLowerCase();};var G6=function(O){return O.dom().nodeType;};var H6=function(O){return O.dom().nodeValue;};var I6=function(t){return function(O){return G6(O)===t;};};var J6=function(O){return G6(O)===E6.COMMENT||F6(O)==='#comment';};var K6=I6(E6.ELEMENT);var L6=I6(E6.TEXT);var M6=I6(E6.DOCUMENT);var N6={name:F6,type:G6,value:H6,isElement:K6,isText:L6,isDocument:M6,isComment:J6};var O6=function(O){var d=N6.isText(O)?O.dom().parentNode:O.dom();return d!==undefined&&d!==null&&d.ownerDocument.body.contains(d);};var P6=D6.cached(function(){return Q6(B6.fromDom(document));});var Q6=function(d){var P6=d.dom().body;if(P6===null||P6===undefined)throw'Body is not available yet';return B6.fromDom(P6);};var R6={body:P6,getBody:Q6,inBody:O6};function S6(){var f=[];for(var a=0;a<arguments.length;a++){f[a]=arguments[a];}return function(){var $6=[];for(var a=0;a<arguments.length;a++){$6[a]=arguments[a];}if(f.length!==$6.length){throw new Error('Wrong number of arguments to struct. Expected "['+f.length+']", got '+$6.length+' arguments');}var s={};d3.each(f,function(F6,i){s[F6]=p2.constant($6[i]);});return s;};}var T6=function(){var f=Object.keys;var s=function(o){var r=[];for(var i in o){if(o.hasOwnProperty(i)){r.push(i);}}return r;};return f===undefined?s:f;}();var U6=function(o,f){var p=T6(o);for(var k=0,l=p.length;k<l;k++){var i=p[k];var x=o[i];f(x,i,o);}};var V6=function(o,f){return W6(o,function(x,i,o){return{k:i,v:f(x,i,o)};});};var W6=function(o,f){var r={};U6(o,function(x,i){var t=f(x,i,o);r[t.k]=t.v;});return r;};var X6=function(o,p){var t={};var f={};U6(o,function(x,i){var b=p(x,i)?t:f;b[i]=x;});return{t:t,f:f};};var Y6=function(o,f){var r=[];U6(o,function(H6,F6){r.push(f(H6,F6));});return r;};var Z6=function(o,p){var a=T6(o);for(var k=0,l=a.length;k<l;k++){var i=a[k];var x=o[i];if(p(x,i,o)){return w2.some(x);}}return w2.none();};var $6=function(o){return Y6(o,function(v){return v;});};var _6=function(o){return $6(o).length;};var a7={bifilter:X6,each:U6,map:V6,mapToArray:Y6,tupleMap:W6,find:Z6,keys:T6,values:$6,size:_6};var b7=function(a){return a.slice(0).sort();};var c7=function(r,T6){throw new Error('All required keys ('+b7(r).join(', ')+') were not specified. Specified keys were: '+b7(T6).join(', ')+'.');};var d7=function(a){throw new Error('Unsupported keys for object: '+b7(a).join(', '));};var e7=function(l,b){if(!z2.isArray(b))throw new Error('The '+l+' fields must be an array. Was: '+b+'.');d3.each(b,function(a){if(!z2.isString(a))throw new Error('The value '+a+' in the '+l+' fields was not a string.');});};var f7=function(i,G6){throw new Error('All values need to be of type: '+G6+'. Keys ('+b7(i).join(', ')+') were not.');};var g7=function(e){var a=b7(e);var b=d3.find(a,function(s,i){return i<a.length-1&&s===a[i+1];});b.each(function(d){throw new Error('The field: '+d+' occurs more than once in the combined fields: ['+a.join(', ')+'].');});};var h7={sort:b7,reqMessage:c7,unsuppMessage:d7,validateStrArr:e7,invalidTypeMessage:f7,checkDupes:g7};function i7(a,o){var e=a.concat(o);if(e.length===0)throw new Error('You must specify at least one required or optional field.');h7.validateStrArr('required',a);h7.validateStrArr('optional',o);h7.checkDupes(e);return function(b){var T6=a7.keys(b);var d=d3.forall(a,function(h){return d3.contains(T6,h);});if(!d)h7.reqMessage(a,T6);var f=d3.filter(T6,function(k){return!d3.contains(e,k);});if(f.length>0)h7.unsuppMessage(f);var r={};d3.each(a,function(h){r[h]=p2.constant(b[h]);});d3.each(o,function(h){r[h]=p2.constant(Object.prototype.hasOwnProperty.call(b,h)?w2.some(b[h]):w2.none());});return r;};}var j7={immutable:S6,immutableBag:i7};var k7=function(t,f){var r=[];var a=function(e){r.push(e);return f(e);};var b=f(t);do{b=b.bind(a);}while(b.isSome());return r;};var l7={toArray:k7};var m7=function(){var f=Y4.getOrDie('Node');return f;};var n7=function(a,b,C){return(a.compareDocumentPosition(b)&C)!==0;};var o7=function(a,b){return n7(a,b,m7().DOCUMENT_POSITION_PRECEDING);};var p7=function(a,b){return n7(a,b,m7().DOCUMENT_POSITION_CONTAINED_BY);};var q7={documentPositionPreceding:o7,documentPositionContainedBy:p7};var r7=function(r,s){for(var i=0;i<r.length;i++){var x=r[i];if(x.test(s))return x;}return undefined;};var s7=function(a,b){var r=r7(a,b);if(!r)return{major:0,minor:0};var d=function(i){return Number(b.replace(r,'$'+i));};return nu(d(1),d(2));};var t7=function(v,a){var b=String(a).toLowerCase();if(v.length===0)return u7();return s7(v,b);};var u7=function(){return nu(0,0);};var nu=function(a,b){return{major:a,minor:b};};var w7={nu:nu,detect:t7,unknown:u7};var x7='Edge';var y7='Chrome';var ie='IE';var A7='Opera';var B7='Firefox';var C7='Safari';var D7=function(F6,a){return function(){return a===F6;};};var E7=function(){return F7({current:undefined,version:w7.unknown()});};var F7=function(i){var a=i.current;var v=i.version;return{current:a,version:v,isEdge:D7(x7,a),isChrome:D7(y7,a),isIE:D7(ie,a),isOpera:D7(A7,a),isFirefox:D7(B7,a),isSafari:D7(C7,a)};};var G7={unknown:E7,nu:F7,edge:p2.constant(x7),chrome:p2.constant(y7),ie:p2.constant(ie),opera:p2.constant(A7),firefox:p2.constant(B7),safari:p2.constant(C7)};var H7='Windows';var I7='iOS';var J7='Android';var K7='Linux';var L7='OSX';var M7='Solaris';var N7='FreeBSD';var O7=function(F6,a){return function(){return a===F6;};};var P7=function(){return Q7({current:undefined,version:w7.unknown()});};var Q7=function(i){var a=i.current;var v=i.version;return{current:a,version:v,isWindows:O7(H7,a),isiOS:O7(I7,a),isAndroid:O7(J7,a),isOSX:O7(L7,a),isLinux:O7(K7,a),isSolaris:O7(M7,a),isFreeBSD:O7(N7,a)};};var R7={unknown:P7,nu:Q7,windows:p2.constant(H7),ios:p2.constant(I7),android:p2.constant(J7),linux:p2.constant(K7),osx:p2.constant(L7),solaris:p2.constant(M7),freebsd:p2.constant(N7)};function S7(o,O8,a){var i=o.isiOS()&&/ipad/i.test(a)===true;var b=o.isiOS()&&!i;var d=o.isAndroid()&&o.version.major===3;var e=o.isAndroid()&&o.version.major===4;var f=i||d||e&&/mobile/i.test(a)===true;var h=o.isiOS()||o.isAndroid();var j=h&&!f;var k=O8.isSafari()&&o.isiOS()&&/safari/i.test(a)===false;return{isiPad:p2.constant(i),isiPhone:p2.constant(b),isTablet:p2.constant(f),isPhone:p2.constant(j),isTouch:p2.constant(h),isAndroid:o.isAndroid,isiOS:o.isiOS,isWebView:p2.constant(k)};}var T7=function(a,b){var d=String(b).toLowerCase();return d3.find(a,function(e){return e.search(d);});};var U7=function(v8,a){return T7(v8,a).map(function(O8){var v=w7.detect(O8.versionRegexes,a);return{current:O8.name,version:v};});};var V7=function(w8,a){return T7(w8,a).map(function(o){var v=w7.detect(o.versionRegexes,a);return{current:o.name,version:v};});};var W7={detectBrowser:U7,detectOs:V7};var X7=function(s,p){return p+s;};var Y7=function(s,a){return s+a;};var Z7=function(s,n){return s.substring(n);};var $7=function(s,n){return s.substring(0,s.length-n);};var _7={addToStart:X7,addToEnd:Y7,removeFromStart:Z7,removeFromEnd:$7};var a8=function(s,e3){return s.substr(0,e3);};var b8=function(s,e3){return s.substr(s.length-e3,s.length);};var c8=function(s){return s===''?w2.none():w2.some(s.substr(0,1));};var d8=function(s){return s===''?w2.none():w2.some(s.substring(1));};var e8={first:a8,last:b8,head:c8,tail:d8};var f8=function(s,a,b){if(a==='')return true;if(s.length<a.length)return false;var x=s.substr(b,b+a.length);return x===a;};var g8=function(s,o){var i=function(a){var t=typeof a;return t==='string'||t==='number';};return s.replace(/\${([^{}]*)}/g,function(a,b){var H6=o[b];return i(H6)?H6:a;});};var h8=function(s,p){return n8(s,p)?_7.removeFromStart(s,p.length):s;};var i8=function(s,p){return o8(s,p)?_7.removeFromEnd(s,p.length):s;};var j8=function(s,p){return n8(s,p)?s:_7.addToStart(s,p);};var k8=function(s,p){return o8(s,p)?s:_7.addToEnd(s,p);};var l8=function(s,a){return s.indexOf(a)!==-1;};var m8=function(s){return e8.head(s).bind(function(a3){return e8.tail(s).map(function(d8){return a3.toUpperCase()+d8;});}).getOr(s);};var n8=function(s,p){return f8(s,p,0);};var o8=function(s,a){return f8(s,a,s.length-a.length);};var p8=function(s){return s.replace(/^\s+|\s+$/g,'');};var q8=function(s){return s.replace(/^\s+/g,'');};var r8=function(s){return s.replace(/\s+$/g,'');};var s8={supplant:g8,startsWith:n8,removeLeading:h8,removeTrailing:i8,ensureLeading:j8,ensureTrailing:k8,endsWith:o8,contains:l8,trim:p8,lTrim:q8,rTrim:r8,capitalize:m8};var t8=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/;var u8=function(t){return function(a){return s8.contains(a,t);};};var v8=[{name:'Edge',versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(a){var b=s8.contains(a,'edge/')&&s8.contains(a,'chrome')&&s8.contains(a,'safari')&&s8.contains(a,'applewebkit');return b;}},{name:'Chrome',versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,t8],search:function(a){return s8.contains(a,'chrome')&&!s8.contains(a,'chromeframe');}},{name:'IE',versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(a){return s8.contains(a,'msie')||s8.contains(a,'trident');}},{name:'Opera',versionRegexes:[t8,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:u8('opera')},{name:'Firefox',versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:u8('firefox')},{name:'Safari',versionRegexes:[t8,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(a){return(s8.contains(a,'safari')||s8.contains(a,'mobile/'))&&s8.contains(a,'applewebkit');}}];var w8=[{name:'Windows',search:u8('win'),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:'iOS',search:function(a){return s8.contains(a,'iphone')||s8.contains(a,'ipad');},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:'Android',search:u8('android'),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:'OSX',search:u8('os x'),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:'Linux',search:u8('linux'),versionRegexes:[]},{name:'Solaris',search:u8('sunos'),versionRegexes:[]},{name:'FreeBSD',search:u8('freebsd'),versionRegexes:[]}];var x8={browsers:p2.constant(v8),oses:p2.constant(w8)};var y8=function(a){var v8=x8.browsers();var w8=x8.oses();var O8=W7.detectBrowser(v8,a).fold(G7.unknown,G7.nu);var o=W7.detectOs(w8,a).fold(R7.unknown,R7.nu);var d=S7(o,O8,a);return{browser:O8,os:o,deviceType:d};};var z8={detect:y8};var A8=D6.cached(function(){var a=navigator.userAgent;return z8.detect(a);});var B8={detect:A8};var C8=E6.ELEMENT;var D8=E6.DOCUMENT;var is=function(O,s){var e=O.dom();if(e.nodeType!==C8)return false;else if(e.matches!==undefined)return e.matches(s);else if(e.msMatchesSelector!==undefined)return e.msMatchesSelector(s);else if(e.webkitMatchesSelector!==undefined)return e.webkitMatchesSelector(s);else if(e.mozMatchesSelector!==undefined)return e.mozMatchesSelector(s);else throw new Error('Browser lacks native selectors');};var F8=function(d){return d.nodeType!==C8&&d.nodeType!==D8||d.childElementCount===0;};var G8=function(s,a){var b=a===undefined?document:a.dom();return F8(b)?[]:d3.map(b.querySelectorAll(s),B6.fromDom);};var H8=function(s,a){var b=a===undefined?document:a.dom();return F8(b)?w2.none():w2.from(b.querySelector(s)).map(B6.fromDom);};var I8={all:G8,is:is,one:H8};var eq=function(e,a){return e.dom()===a.dom();};var K8=function(e,a){return e.dom().isEqualNode(a.dom());};var L8=function(O,e){return d3.exists(e,p2.curry(eq,O));};var M8=function(e,a){var d=e.dom(),b=a.dom();return d===b?false:d.contains(b);};var N8=function(e,a){return q7.documentPositionContainedBy(e.dom(),a.dom());};var O8=B8.detect().browser;var P8=O8.isIE()?N8:M8;var Q8={eq:eq,isEqualNode:K8,member:L8,contains:P8,is:I8.is};var R8=function(O){return B6.fromDom(O.dom().ownerDocument);};var S8=function(O){var d=R8(O);return B6.fromDom(d.dom().documentElement);};var T8=function(O){var e=O.dom();var T8=e.ownerDocument.defaultView;return B6.fromDom(T8);};var U8=function(O){var d=O.dom();return w2.from(d.parentNode).map(B6.fromDom);};var V8=function(O){return U8(O).bind(function(p){var k=b9(p);return d3.findIndex(k,function(e){return Q8.eq(O,e);});});};var W8=function(O,i){var s=z2.isFunction(i)?i:p2.constant(false);var d=O.dom();var r=[];while(d.parentNode!==null&&d.parentNode!==undefined){var a=d.parentNode;var P=B6.fromDom(a);r.push(P);if(s(P)===true)break;else d=a;}return r;};var X8=function(O){var f=function(e){return d3.filter(e,function(x){return!Q8.eq(O,x);});};return U8(O).map(b9).map(f).getOr([]);};var Y8=function(O){var d=O.dom();return w2.from(d.offsetParent).map(B6.fromDom);};var Z8=function(O){var d=O.dom();return w2.from(d.previousSibling).map(B6.fromDom);};var $8=function(O){var d=O.dom();return w2.from(d.nextSibling).map(B6.fromDom);};var _8=function(O){return d3.reverse(l7.toArray(O,Z8));};var a9=function(O){return l7.toArray(O,$8);};var b9=function(O){var d=O.dom();return d3.map(d.childNodes,B6.fromDom);};var c9=function(O,i){var b9=O.dom().childNodes;return w2.from(b9[i]).map(B6.fromDom);};var d9=function(O){return c9(O,0);};var e9=function(O){return c9(O,O.dom().childNodes.length-1);};var f9=function(O){return O.dom().childNodes.length;};var g9=function(O){return O.dom().hasChildNodes();};var h9=j7.immutable('element','offset');var i9=function(O,o){var a=b9(O);return a.length>0&&o<a.length?h9(a[o],0):h9(O,o);};var j9={owner:R8,defaultView:T8,documentElement:S8,parent:U8,findIndex:V8,parents:W8,siblings:X8,prevSibling:Z8,offsetParent:Y8,prevSiblings:_8,nextSibling:$8,nextSiblings:a9,children:b9,child:c9,firstChild:d9,lastChild:e9,childNodesCount:f9,hasChildNodes:g9,leaf:i9};var k9=function(p){return o9(R6.body(),p);};var l9=function(s,p,i){return d3.filter(j9.parents(s,i),p);};var m9=function(s,p){return d3.filter(j9.siblings(s),p);};var n9=function(s,p){return d3.filter(j9.children(s),p);};var o9=function(s,p){var B=[];d3.each(j9.children(s),function(x){if(p(x)){B=B.concat([x]);}B=B.concat(o9(x,p));});return B;};var p9={all:k9,ancestors:l9,siblings:m9,children:n9,descendants:o9};var q9=function(s){return I8.all(s);};var r9=function(s,a,i){return p9.ancestors(s,function(e){return I8.is(e,a);},i);};var s9=function(s,a){return p9.siblings(s,function(e){return I8.is(e,a);});};var t9=function(s,a){return p9.children(s,function(e){return I8.is(e,a);});};var u9=function(s,a){return I8.all(a,s);};var v9={all:q9,ancestors:r9,siblings:s9,children:t9,descendants:u9};var w9=R.trim;var x9=function(H6){return function(m7){if(m7&&m7.nodeType===1){if(m7.contentEditable===H6){return true;}if(m7.getAttribute('data-mce-contenteditable')===H6){return true;}}return false;};};var y9=x9('true');var z9=x9('false');var A9=function(G6,t,a,l,b){return{type:G6,title:t,url:a,level:l,attach:b};};var B9=function(m7){while(m7=m7.parentNode){var H6=m7.contentEditable;if(H6&&H6!=='inherit'){return y9(m7);}}return false;};var C9=function(s,r){return d3.map(v9.descendants(B6.fromDom(r),s),function(O){return O.dom();});};var D9=function(e){return e.innerText||e.textContent;};var E9=function(e){return e.id?e.id:v6.generate('h');};var F9=function(e){return e&&e.nodeName==='A'&&(e.id||e.name);};var G9=function(e){return F9(e)&&I9(e);};var H9=function(e){return e&&/^(H[1-6])$/.test(e.nodeName);};var I9=function(e){return B9(e)&&!z9(e);};var J9=function(e){return H9(e)&&I9(e);};var K9=function(e){return H9(e)?parseInt(e.nodeName.substr(1),10):0;};var L9=function(e){var h=E9(e);var a=function(){e.id=h;};return A9('header',D9(e),'#'+h,K9(e),a);};var M9=function(e){var a=e.id||e.name;var b=D9(e);return A9('anchor',b?b:'#'+a,'#'+a,0,p2.noop);};var N9=function(e){return d3.map(d3.filter(e,J9),L9);};var O9=function(e){return d3.map(d3.filter(e,G9),M9);};var P9=function(e){var a=C9('h1,h2,h3,h4,h5,h6,a:not([href])',e);return a;};var Q9=function(t){return w9(t.title).length>0;};var R9=function(e){var a=P9(e);return d3.filter(N9(a).concat(O9(a)),Q9);};var S9={find:R9};var T9=function(){return window.tinymce?window.tinymce.activeEditor:b1.activeEditor;};var U9={};var V9=5;var W9=function(){U9={};};var X9=function(t){return{title:t.title,value:{title:{raw:t.title},url:t.url,attach:t.attach}};};var Y9=function(t){return R.map(t,X9);};var Z9=function(t,a){return{title:t,value:{title:t,url:a,attach:p2.noop}};};var $9=function(a,t){var f=d3.exists(t,function(b){return b.url===a;});return!f;};var _9=function(e,F6,d){var H6=F6 in e?e[F6]:d;return H6===false?null:H6;};var aa=function(t,d,f,e){var s={title:'-'};var h=function(U9){var a=U9.hasOwnProperty(f)?U9[f]:[];var b=d3.filter(a,function(l){return $9(l,d);});return R.map(b,function(l){return{title:l,value:{title:l,url:l,attach:p2.noop}};});};var i=function(G6){var a=d3.filter(d,function(b){return b.type===G6;});return Y9(a);};var j=function(){var j=i('anchor');var a=_9(e,'anchor_top','#top');var b=_9(e,'anchor_bottom','#bottom');if(a!==null){j.unshift(Z9('<top>',a));}if(b!==null){j.push(Z9('<bottom>',b));}return j;};var k=function(l){return d3.foldl(l,function(a,b){var n=a.length===0||b.length===0;return n?a.concat(b):a.concat(s,b);},[]);};if(e.typeahead_urls===false){return[];}return f==='file'?k([ca(t,h(U9)),ca(t,i('header')),ca(t,j())]):ca(t,h(U9));};var ba=function(a,f){var i=U9[f];if(!/^https?/.test(a)){return;}if(i){if(d3.indexOf(i,a).isNone()){U9[f]=i.slice(0,V9).concat(a);}}else{U9[f]=[a];}};var ca=function(t,a){var l=t.toLowerCase();var B=R.grep(a,function(i){return i.title.toLowerCase().indexOf(l)!==-1;});return B.length===1&&B[0].title===t?[]:B;};var da=function(l){var t=l.title;return t.raw?t.raw:t;};var ea=function(a,b,d,f){var h=function(t){var l=S9.find(d);var e=aa(t,l,f,b);a.showAutoComplete(e,t);};a.on('autocomplete',function(){h(a.value());});a.on('selectitem',function(e){var l=e.value;a.value(l.url);var t=da(l);if(f==='image'){a.fire('change',{meta:{alt:t,attach:l.attach}});}else{a.fire('change',{meta:{text:t,attach:l.attach}});}a.focus();});a.on('click',function(e){if(a.value().length===0&&e.target.nodeName==='INPUT'){h('');}});a.on('PostRender',function(){a.getRoot().on('submit',function(e){if(!e.isDefaultPrevented()){ba(a.value(),f);}});});};var ga=function(B){var s=B.status,a=B.message;if(s==='valid'){return{status:'ok',message:a};}else if(s==='unknown'){return{status:'warn',message:a};}else if(s==='invalid'){return{status:'warn',message:a};}else{return{status:'none',message:''};}};var ha=function(a,b,f){var v=b.filepicker_validator_handler;if(v){var d=function(e){if(e.length===0){a.statusLevel('none');return;}v({url:e,type:f},function(B){var h=ga(B);a.statusMessage(h.message);a.statusLevel(h.status);});};a.state.on('change:value',function(e){d(e.value);});}};var ia=g6.extend({Statics:{clearHistory:W9},init:function(s){var a=this,e=T9(),b=e.settings;var d,f,h;var i=s.filetype;s.spellcheck=false;h=b.file_picker_types||b.file_browser_callback_types;if(h){h=R.makeMap(h,/[, ]/);}if(!h||h[i]){f=b.file_picker_callback;if(f&&(!h||h[i])){d=function(){var j=a.fire('beforecall').meta;j=R.extend({filetype:i},j);f.call(e,function(H6,j){a.value(H6).fire('change',{meta:j});},a.value(),j);};}else{f=b.file_browser_callback;if(f&&(!h||h[i])){d=function(){f(a.getEl('inp').id,a.value(),i,window);};}}}if(d){s.icon='browse';s.onaction=d;}a._super(s);a.classes.add('filepicker');ea(a,b,e.getBody(),i);ha(a,b,i);}});var ja=a6.extend({recalc:function(a){var b=a.layoutRect(),p=a.paddingBox;a.items().filter(':visible').each(function(d){d.layoutRect({x:p.left,y:p.top,w:b.innerW-p.right-p.left,h:b.innerH-p.top-p.bottom});if(d.recalc){d.recalc();}});}});var ka=a6.extend({recalc:function(a){var i,l,b,d,e,f,h,p,s,t,j,k;var n,o,r,v;var w=[];var _6,x,y,$,a1,d1;var e1,a2,d2,e2,v7,z7,E8,J8;var fa,fb,qc,rc,sc,tc;var uc,vc;var wc=Math.max,xc=Math.min;b=a.items().filter(':visible');d=a.layoutRect();e=a.paddingBox;f=a.settings;k=a.isRtl()?f.direction||'row-reversed':f.direction;h=f.align;p=a.isRtl()?f.pack||'end':f.pack;s=f.spacing||0;if(k==='row-reversed'||k==='column-reverse'){b=b.set(b.toArray().reverse());k=k.split('-')[0];}if(k==='column'){d2='y';e1='h';a2='minH';e2='maxH';z7='innerH';v7='top';E8='deltaH';J8='contentH';sc='left';qc='w';fa='x';fb='innerW';rc='minW';tc='right';uc='deltaW';vc='contentW';}else{d2='x';e1='w';a2='minW';e2='maxW';z7='innerW';v7='left';E8='deltaW';J8='contentW';sc='top';qc='h';fa='y';fb='innerH';rc='minH';tc='bottom';uc='deltaH';vc='contentH';}j=d[z7]-e[v7]-e[v7];d1=t=0;for(i=0,l=b.length;i<l;i++){n=b[i];o=n.layoutRect();r=n.settings;v=r.flex;j-=i<l-1?s:0;if(v>0){t+=v;if(o[e2]){w.push(n);}o.flex=v;}j-=o[a2];_6=e[sc]+o[rc]+e[tc];if(_6>d1){d1=_6;}}$={};if(j<0){$[a2]=d[a2]-j+d[E8];}else{$[a2]=d[z7]-j+d[E8];}$[rc]=d1+d[uc];$[J8]=d[z7]-j;$[vc]=d1;$.minW=xc($.minW,d.maxW);$.minH=xc($.minH,d.maxH);$.minW=wc($.minW,d.startMinWidth);$.minH=wc($.minH,d.startMinHeight);if(d.autoResize&&($.minW!==d.minW||$.minH!==d.minH)){$.w=$.minW;$.h=$.minH;a.layoutRect($);this.recalc(a);if(a._lastRect===null){var yc=a.parent();if(yc){yc._lastRect=null;yc.recalc();}}return;}y=j/t;for(i=0,l=w.length;i<l;i++){n=w[i];o=n.layoutRect();x=o[e2];_6=o[a2]+o.flex*y;if(_6>x){j-=o[e2]-o[a2];t-=o.flex;o.flex=0;o.maxFlexSize=x;}else{o.maxFlexSize=0;}}y=j/t;a1=e[v7];$={};if(t===0){if(p==='end'){a1=j+e[v7];}else if(p==='center'){a1=Math.round(d[z7]/2-(d[z7]-j)/2)+e[v7];if(a1<0){a1=e[v7];}}else if(p==='justify'){a1=e[v7];s=Math.floor(j/(b.length-1));}}$[fa]=e[sc];for(i=0,l=b.length;i<l;i++){n=b[i];o=n.layoutRect();_6=o.maxFlexSize||o[a2];if(h==='center'){$[fa]=Math.round(d[fb]/2-o[qc]/2);}else if(h==='stretch'){$[qc]=wc(o[rc]||0,d[fb]-e[sc]-e[tc]);$[fa]=e[sc];}else if(h==='end'){$[fa]=d[fb]-o[qc]-e.top;}if(o.flex>0){_6+=o.flex*y;}$[e1]=_6;$[d2]=a1;n.layoutRect($);if(n.recalc){n.recalc();}a1+=_6+s;}}});var la=_5.extend({Defaults:{containerClass:'flow-layout',controlClass:'flow-layout-item',endClass:'break'},recalc:function(a){a.items().filter(':visible').each(function(b){if(b.recalc){b.recalc();}});},isNative:function(){return true;}});function ma(i,oa,s,a,b){return i(s,a)?w2.some(s):z2.isFunction(b)&&b(s)?w2.none():oa(s,a,b);}var na=function(p){return sa(R6.body(),p);};var oa=function(s,p,i){var O=s.dom();var a=z2.isFunction(i)?i:p2.constant(false);while(O.parentNode){O=O.parentNode;var e=B6.fromDom(O);if(p(e))return w2.some(e);else if(a(e))break;}return w2.none();};var pa=function(s,p,i){var a=function(s){return p(s);};return ma(a,oa,s,p,i);};var qa=function(s,p){var O=s.dom();if(!O.parentNode)return w2.none();return ra(B6.fromDom(O.parentNode),function(x){return!Q8.eq(s,x)&&p(x);});};var ra=function(s,p){var B=d3.find(s.dom().childNodes,p2.compose(p,B6.fromDom));return B.map(B6.fromDom);};var sa=function(s,p){var d=function(O){for(var i=0;i<O.childNodes.length;i++){if(p(B6.fromDom(O.childNodes[i])))return w2.some(B6.fromDom(O.childNodes[i]));var r=d(O.childNodes[i]);if(r.isSome())return r;}return w2.none();};return d(s.dom());};var ta={first:na,ancestor:oa,closest:pa,sibling:qa,child:ra,descendant:sa};var ua=function(s){return I8.one(s);};var va=function(s,a,i){return ta.ancestor(s,function(e){return I8.is(e,a);},i);};var wa=function(s,a){return ta.sibling(s,function(e){return I8.is(e,a);});};var xa=function(s,a){return ta.child(s,function(e){return I8.is(e,a);});};var ya=function(s,a){return I8.one(a,s);};var za=function(s,a,i){return ma(I8.is,va,s,a,i);};var Aa={first:ua,ancestor:va,sibling:wa,child:xa,descendant:ya,closest:za};var Ba=function(e,f){return function(){e.execCommand('mceToggleFormat',false,f);};};var Ca=function(e,F6,a){var h=function(s){a(s,F6);};if(e.formatter){e.formatter.formatChanged(F6,h);}else{e.on('init',function(){e.formatter.formatChanged(F6,h);});}};var Da=function(a,F6){return function(e){Ca(a,F6,function(s){e.control.active(s);});};};var Ea=function(a){var b=['alignleft','aligncenter','alignright','alignjustify'];var d='alignleft';var f=[{text:'Left',icon:'alignleft',onclick:Ba(a,'alignleft')},{text:'Center',icon:'aligncenter',onclick:Ba(a,'aligncenter')},{text:'Right',icon:'alignright',onclick:Ba(a,'alignright')},{text:'Justify',icon:'alignjustify',onclick:Ba(a,'alignjustify')}];a.addMenuItem('align',{text:'Align',menu:f});a.addButton('align',{type:'menubutton',icon:d,menu:f,onShowMenu:function(e){var h=e.control.menu;R.each(b,function(i,j){h.items().eq(j).each(function(k){return k.active(a.formatter.match(i));});});},onPostRender:function(e){var h=e.control;R.each(b,function(i,j){Ca(a,i,function(s){h.icon(d);if(s){h.icon(i);}});});}});R.each({alignleft:['Align left','JustifyLeft'],aligncenter:['Align center','JustifyCenter'],alignright:['Align right','JustifyRight'],alignjustify:['Justify','JustifyFull'],alignnone:['No alignment','JustifyNone']},function(i,F6){a.addButton(F6,{active:false,tooltip:i[0],cmd:i[1],onPostRender:Da(a,F6)});});};var Fa={register:Ea};var Ga=function(f){return f?f.split(',')[0]:'';};var Ha=function(i,f){var a=f?f.toLowerCase():'';var H6;R.each(i,function(b){if(b.value.toLowerCase()===a){H6=b.value;}});R.each(i,function(b){if(!H6&&Ga(b.value).toLowerCase()===Ga(a).toLowerCase()){H6=b.value;}});return H6;};var Ia=function(a,i){return function(){var s=this;a.on('init nodeChange',function(e){var f=a.queryCommandValue('FontName');var C=Ha(i,f);s.value(C?C:null);if(!C&&f){s.text(Ga(f));}});};};var Ja=function(f){f=f.replace(/;$/,'').split(';');var i=f.length;while(i--){f[i]=f[i].split('=');}return f;};var Ka=function(e){var d='Andale Mono=andale mono,monospace;'+'Arial=arial,helvetica,sans-serif;'+'Arial Black=arial black,sans-serif;'+'Book Antiqua=book antiqua,palatino,serif;'+'Comic Sans MS=comic sans ms,sans-serif;'+'Courier New=courier new,courier,monospace;'+'Georgia=georgia,palatino,serif;'+'Helvetica=helvetica,arial,sans-serif;'+'Impact=impact,sans-serif;'+'Symbol=symbol;'+'Tahoma=tahoma,arial,helvetica,sans-serif;'+'Terminal=terminal,monaco,monospace;'+'Times New Roman=times new roman,times,serif;'+'Trebuchet MS=trebuchet ms,geneva,sans-serif;'+'Verdana=verdana,geneva,sans-serif;'+'Webdings=webdings;'+'Wingdings=wingdings,zapf dingbats';var f=Ja(e.settings.font_formats||d);return R.map(f,function(a){return{text:{raw:a[0]},value:a[1],textStyle:a[1].indexOf('dings')===-1?'font-family:'+a[1]:''};});};var La=function(a){a.addButton('fontselect',function(){var i=Ka(a);return{type:'listbox',text:'Font Family',tooltip:'Font Family',values:i,fixedWidth:true,onPostRender:Ia(a,i),onselect:function(e){if(e.control.settings.value){a.execCommand('FontName',false,e.control.settings.value);}}};});};var Ma=function(e){La(e);};var Na={register:Ma};var Oa=function(n,p){var f=Math.pow(10,p);return Math.round(n*f)/f;};var Pa=function(f,p){if(/[0-9.]+px$/.test(f)){return Oa(parseInt(f,10)*72/96,p||0)+'pt';}return f;};var Qa=function(i,p,a){var H6;R.each(i,function(b){if(b.value===a){H6=a;}else if(b.value===p){H6=p;}});return H6;};var Ra=function(a,i){return function(){var s=this;a.on('init nodeChange',function(e){var p,b,d,C;p=a.queryCommandValue('FontSize');if(p){for(d=3;!C&&d>=0;d--){b=Pa(p,d);C=Qa(i,b,p);}}s.value(C?C:null);if(!C){s.text(b);}});};};var Sa=function(e){var d='8pt 10pt 12pt 14pt 18pt 24pt 36pt';var f=e.settings.fontsize_formats||d;return R.map(f.split(' '),function(i){var t=i,H6=i;var $6=i.split('=');if($6.length>1){t=$6[0];H6=$6[1];}return{text:t,value:H6};});};var Ta=function(a){a.addButton('fontsizeselect',function(){var i=Sa(a);return{type:'listbox',text:'Font Sizes',tooltip:'Font Sizes',values:i,fixedWidth:true,onPostRender:Ra(a,i),onclick:function(e){if(e.control.settings.value){a.execCommand('FontSize',false,e.control.settings.value);}}};});};var Ua=function(e){Ta(e);};var Va={register:Ua};var Wa=function(e,a){var e3=a.length;R.each(a,function(i){if(i.menu){i.hidden=Wa(e,i.menu)===0;}var f=i.format;if(f){i.hidden=!e.formatter.canApply(f);}if(i.hidden){e3--;}});return e3;};var Xa=function(e,a){var e3=a.items().length;a.items().each(function(i){if(i.menu){i.visible(Xa(e,i.menu)>0);}if(!i.menu&&i.settings.menu){i.visible(Wa(e,i.settings.menu)>0);}var f=i.settings.format;if(f){i.visible(e.formatter.canApply(f));}if(!i.visible()){e3--;}});return e3;};var Ya=function(a){var e3=0;var n=[];var d=[{title:'Headings',items:[{title:'Heading 1',format:'h1'},{title:'Heading 2',format:'h2'},{title:'Heading 3',format:'h3'},{title:'Heading 4',format:'h4'},{title:'Heading 5',format:'h5'},{title:'Heading 6',format:'h6'}]},{title:'Inline',items:[{title:'Bold',icon:'bold',format:'bold'},{title:'Italic',icon:'italic',format:'italic'},{title:'Underline',icon:'underline',format:'underline'},{title:'Strikethrough',icon:'strikethrough',format:'strikethrough'},{title:'Superscript',icon:'superscript',format:'superscript'},{title:'Subscript',icon:'subscript',format:'subscript'},{title:'Code',icon:'code',format:'code'}]},{title:'Blocks',items:[{title:'Paragraph',format:'p'},{title:'Blockquote',format:'blockquote'},{title:'Div',format:'div'},{title:'Pre',format:'pre'}]},{title:'Alignment',items:[{title:'Left',icon:'alignleft',format:'alignleft'},{title:'Center',icon:'aligncenter',format:'aligncenter'},{title:'Right',icon:'alignright',format:'alignright'},{title:'Justify',icon:'alignjustify',format:'alignjustify'}]}];var b=function(e){var h=[];if(!e){return;}R.each(e,function(i){var j={text:i.title,icon:i.icon};if(i.items){j.menu=b(i.items);}else{var k=i.format||'custom'+e3++;if(!i.format){i.name=k;n.push(i);}j.format=k;j.cmd=i.cmd;}h.push(j);});return h;};var f=function(){var e;if(a.settings.style_formats_merge){if(a.settings.style_formats){e=b(d.concat(a.settings.style_formats));}else{e=b(d);}}else{e=b(a.settings.style_formats||d);}return e;};a.on('init',function(){R.each(n,function(e){a.formatter.register(e.name,e);});});return{type:'menu',items:f(),onPostRender:function(e){a.fire('renderFormatsMenu',{control:e.control});},itemDefaults:{preview:true,textStyle:function(){if(this.settings.format){return a.formatter.getCssText(this.settings.format);}},onPostRender:function(){var s=this;s.parent().on('show',function(){var e,h;e=s.settings.format;if(e){s.disabled(!a.formatter.canApply(e));s.active(a.formatter.match(e));}h=s.settings.cmd;if(h){s.active(a.queryCommandState(h));}});},onclick:function(){if(this.settings.format){Ba(a,this.settings.format)();}if(this.settings.cmd){a.execCommand(this.settings.cmd);}}}};};var Za=function(e,f){e.addMenuItem('formats',{text:'Formats',menu:f});};var $a=function(e,f){e.addButton('styleselect',{type:'menubutton',text:'Formats',menu:f,onShowMenu:function(){if(e.settings.style_formats_autohide){Xa(e,this.menu);}}});};var _a=function(e){var f=Ya(e);Za(e,f);$a(e,f);};var ab={register:_a};var bb='Paragraph=p;'+'Heading 1=h1;'+'Heading 2=h2;'+'Heading 3=h3;'+'Heading 4=h4;'+'Heading 5=h5;'+'Heading 6=h6;'+'Preformatted=pre';var cb=function(f){f=f.replace(/;$/,'').split(';');var i=f.length;while(i--){f[i]=f[i].split('=');}return f;};var db=function(a,i,f){return function(){var s=this;a.on('nodeChange',function(e){var b=a.formatter;var H6=null;R.each(e.parents,function(m7){R.each(i,function(d){if(f){if(b.matchNode(m7,f,{value:d.value})){H6=d.value;}}else{if(b.matchNode(m7,d.value)){H6=d.value;}}if(H6){return false;}});if(H6){return false;}});s.value(H6);});};};var eb=function(a,b){return function(){var i=[];R.each(b,function(d){i.push({text:d[0],value:d[1],textStyle:function(){return a.formatter.getCssText(d[1]);}});});return{type:'listbox',text:b[0][0],values:i,fixedWidth:true,onselect:function(e){if(e.control){var f=e.control.value();Ba(a,f)();}},onPostRender:db(a,i)};};};var gb=function(e,b){return R.map(b,function(a){return{text:a[0],onclick:Ba(e,a[1]),textStyle:function(){return e.formatter.getCssText(a[1]);}};});};var hb=function(e){var b=cb(e.settings.block_formats||bb);e.addMenuItem('blockformats',{text:'Blocks',menu:gb(e,b)});e.addButton('formatselect',eb(e,b));};var ib={register:hb};var jb=function(e,n){var i,a;if(typeof n==='string'){a=n.split(' ');}else if(R.isArray(n)){return d3.flatten(R.map(n,function(n){return jb(e,n);}));}i=R.grep(a,function(F6){return F6==='|'||F6 in e.menuItems;});return R.map(i,function(F6){return F6==='|'?{text:'-'}:e.menuItems[F6];});};var kb=function(a){return a&&a.text==='-';};var lb=function(a){var b=d3.filter(a,function(d,i,a){return!kb(d)||!kb(a[i-1]);});return d3.filter(b,function(d,i,a){return!kb(d)||i>0&&i<a.length-1;});};var mb=function(e,a){var o=[{text:'-'}];var b=R.grep(e.menuItems,function(d){return d.context===a;});R.each(b,function(d){if(d.separator==='before'){o.push({text:'|'});}if(d.prependToContext){o.unshift(d);}else{o.push(d);}if(d.separator==='after'){o.push({text:'|'});}});return o;};var nb=function(e){var i=e.settings.insert_button_items;if(i){return lb(jb(e,i));}else{return lb(mb(e,'insert'));}};var ob=function(e){e.addButton('insert',{type:'menubutton',icon:'insert',menu:[],oncreatemenu:function(){this.menu.add(nb(e));this.menu.renderNew();}});};var pb=function(e){ob(e);};var qb={register:pb};var rb=function(e){R.each({bold:'Bold',italic:'Italic',underline:'Underline',strikethrough:'Strikethrough',subscript:'Subscript',superscript:'Superscript'},function(t,F6){e.addButton(F6,{active:false,tooltip:t,onPostRender:Da(e,F6),onclick:Ba(e,F6)});});};var sb=function(e){R.each({outdent:['Decrease indent','Outdent'],indent:['Increase indent','Indent'],cut:['Cut','Cut'],copy:['Copy','Copy'],paste:['Paste','Paste'],help:['Help','mceHelp'],selectall:['Select all','SelectAll'],visualaid:['Visual aids','mceToggleVisualAid'],newdocument:['New document','mceNewDocument'],removeformat:['Clear formatting','RemoveFormat'],remove:['Remove','Delete']},function(i,F6){e.addButton(F6,{tooltip:i[0],cmd:i[1]});});};var tb=function(e){R.each({blockquote:['Blockquote','mceBlockQuote'],subscript:['Subscript','Subscript'],superscript:['Superscript','Superscript']},function(i,F6){e.addButton(F6,{active:false,tooltip:i[0],cmd:i[1],onPostRender:Da(e,F6)});});};var ub=function(e){rb(e);sb(e);tb(e);};var vb=function(e){R.each({bold:['Bold','Bold','Meta+B'],italic:['Italic','Italic','Meta+I'],underline:['Underline','Underline','Meta+U'],strikethrough:['Strikethrough','Strikethrough'],subscript:['Subscript','Subscript'],superscript:['Superscript','Superscript'],removeformat:['Clear formatting','RemoveFormat'],newdocument:['New document','mceNewDocument'],cut:['Cut','Cut','Meta+X'],copy:['Copy','Copy','Meta+C'],paste:['Paste','Paste','Meta+V'],selectall:['Select all','SelectAll','Meta+A']},function(i,F6){e.addMenuItem(F6,{text:i[0],icon:F6,shortcut:i[2],cmd:i[1]});});e.addMenuItem('codeformat',{text:'Code',icon:'code',onclick:Ba(e,'code')});};var wb=function(e){ub(e);vb(e);};var xb={register:wb};var yb=function(e,G6){return function(){var s=this;var a=function(){var t=G6==='redo'?'hasRedo':'hasUndo';return e.undoManager?e.undoManager[t]():false;};s.disabled(!a());e.on('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode',function(){s.disabled(e.readonly||!a());});};};var zb=function(e){e.addMenuItem('undo',{text:'Undo',icon:'undo',shortcut:'Meta+Z',onPostRender:yb(e,'undo'),cmd:'undo'});e.addMenuItem('redo',{text:'Redo',icon:'redo',shortcut:'Meta+Y',onPostRender:yb(e,'redo'),cmd:'redo'});};var Ab=function(e){e.addButton('undo',{tooltip:'Undo',onPostRender:yb(e,'undo'),cmd:'undo'});e.addButton('redo',{tooltip:'Redo',onPostRender:yb(e,'redo'),cmd:'redo'});};var Bb=function(e){zb(e);Ab(e);};var Cb={register:Bb};var Db=function(a){return function(){var s=this;a.on('VisualAid',function(e){s.active(e.hasVisual);});s.active(a.hasVisual);};};var Eb=function(e){e.addMenuItem('visualaid',{text:'Visual aids',selectable:true,onPostRender:Db(e),cmd:'mceToggleVisualAid'});};var Fb=function(e){Eb(e);};var Gb={register:Fb};var Hb=function(){_3.tooltips=!m.iOS;S3.translate=function(t){return b1.translate(t);};};var Ib=function(e){if(e.settings.ui_container){m.container=Aa.descendant(B6.fromDom(document.body),e.settings.ui_container).fold(p2.constant(null),function(a){return a.dom();});}};var Jb=function(e){if(e.rtl){S3.rtl=true;}};var Kb=function(e){e.on('mousedown',function(){C4.hideAll();});};var Lb=function(e){Jb(e);Kb(e);Ib(e);Hb();ib.register(e);Fa.register(e);xb.register(e);Cb.register(e);Va.register(e);Na.register(e);ab.register(e);Gb.register(e);qb.register(e);};var Mb={setup:Lb};var Nb=a6.extend({recalc:function(a){var s,r,b,i,d,w,h,e,f,j,x,y,p,k,l,n,o,t,v,$,a1,d1,e1;var a2=[];var d2=[];var e2,v7,z7,E8,J8,fa;s=a.settings;i=a.items().filter(':visible');d=a.layoutRect();b=s.columns||Math.ceil(Math.sqrt(i.length));r=Math.ceil(i.length/b);t=s.spacingH||s.spacing||0;v=s.spacingV||s.spacing||0;$=s.alignH||s.align;a1=s.alignV||s.align;n=a.paddingBox;J8='reverseRows'in s?s.reverseRows:a.isRtl();if($&&typeof $==='string'){$=[$];}if(a1&&typeof a1==='string'){a1=[a1];}for(x=0;x<b;x++){a2.push(0);}for(y=0;y<r;y++){d2.push(0);}for(y=0;y<r;y++){for(x=0;x<b;x++){j=i[y*b+x];if(!j){break;}f=j.layoutRect();e2=f.minW;v7=f.minH;a2[x]=e2>a2[x]?e2:a2[x];d2[y]=v7>d2[y]?v7:d2[y];}}z7=d.innerW-n.left-n.right;for(d1=0,x=0;x<b;x++){d1+=a2[x]+(x>0?t:0);z7-=(x>0?t:0)+a2[x];}E8=d.innerH-n.top-n.bottom;for(e1=0,y=0;y<r;y++){e1+=d2[y]+(y>0?v:0);E8-=(y>0?v:0)+d2[y];}d1+=n.left+n.right;e1+=n.top+n.bottom;e={};e.minW=d1+(d.w-d.innerW);e.minH=e1+(d.h-d.innerH);e.contentW=e.minW-d.deltaW;e.contentH=e.minH-d.deltaH;e.minW=Math.min(e.minW,d.maxW);e.minH=Math.min(e.minH,d.maxH);e.minW=Math.max(e.minW,d.startMinWidth);e.minH=Math.max(e.minH,d.startMinHeight);if(d.autoResize&&(e.minW!==d.minW||e.minH!==d.minH)){e.w=e.minW;e.h=e.minH;a.layoutRect(e);this.recalc(a);if(a._lastRect===null){var fb=a.parent();if(fb){fb._lastRect=null;fb.recalc();}}return;}if(d.autoResize){e=a.layoutRect(e);e.contentW=e.minW-d.deltaW;e.contentH=e.minH-d.deltaH;}var qc;if(s.packV==='start'){qc=0;}else{qc=E8>0?Math.floor(E8/r):0;}var rc=0;var sc=s.flexWidths;if(sc){for(x=0;x<sc.length;x++){rc+=sc[x];}}else{rc=b;}var tc=z7/rc;for(x=0;x<b;x++){a2[x]+=sc?sc[x]*tc:tc;}k=n.top;for(y=0;y<r;y++){p=n.left;h=d2[y]+qc;for(x=0;x<b;x++){if(J8){fa=y*b+b-1-x;}else{fa=y*b+x;}j=i[fa];if(!j){break;}l=j.settings;f=j.layoutRect();w=Math.max(a2[x],f.startMinWidth);f.x=p;f.y=k;o=l.alignH||($?$[x]||$[0]:null);if(o==='center'){f.x=p+w/2-f.w/2;}else if(o==='right'){f.x=p+w-f.w;}else if(o==='stretch'){f.w=w;}o=l.alignV||(a1?a1[x]||a1[0]:null);if(o==='center'){f.y=k+h/2-f.h/2;}else if(o==='bottom'){f.y=k+h-f.h;}else if(o==='stretch'){f.h=h;}j.layoutRect(f);p+=w+t;if(j.recalc){j.recalc();}}k+=h+v;}}});var Ob=_3.extend({renderHtml:function(){var s=this;s.classes.add('iframe');s.canFocus=false;return'<iframe id="'+s._id+'" class="'+s.classes+'" tabindex="-1" src="'+(s.settings.url||'javascript:\'\'')+'" frameborder="0"></iframe>';},src:function(s){this.getEl().src=s;},html:function(h,a){var s=this,P6=this.getEl().contentWindow.document.body;if(!P6){u.setTimeout(function(){s.html(h);});}else{P6.innerHTML=h;if(a){a();}}return this;}});var Pb=_3.extend({init:function(s){var a=this;a._super(s);a.classes.add('widget').add('infobox');a.canFocus=false;},severity:function(l){this.classes.remove('error');this.classes.remove('warning');this.classes.remove('success');this.classes.add(l);},help:function(s){this.state.set('help',s);},renderHtml:function(){var s=this,p=s.classPrefix;return'<div id="'+s._id+'" class="'+s.classes+'">'+'<div id="'+s._id+'-body">'+s.encode(s.state.get('text'))+'<button role="button" tabindex="-1">'+'<i class="'+p+'ico '+p+'i-help"></i>'+'</button>'+'</div>'+'</div>';},bindStates:function(){var s=this;s.state.on('change:text',function(e){s.getEl('body').firstChild.data=s.encode(e.value);if(s.state.get('rendered')){s.updateLayoutRect();}});s.state.on('change:help',function(e){s.classes.toggle('has-help',e.value);if(s.state.get('rendered')){s.updateLayoutRect();}});return s._super();}});var Qb=_3.extend({init:function(s){var a=this;a._super(s);a.classes.add('widget').add('label');a.canFocus=false;if(s.multiline){a.classes.add('autoscroll');}if(s.strong){a.classes.add('strong');}},initLayoutRect:function(){var s=this,l=s._super();if(s.settings.multiline){var _6=f3.getSize(s.getEl());if(_6.width>l.maxW){l.minW=l.maxW;s.classes.add('multiline');}s.getEl().style.width=l.minW+'px';l.startMinH=l.h=l.minH=Math.min(l.maxH,f3.getSize(s.getEl()).height);}return l;},repaint:function(){var s=this;if(!s.settings.multiline){s.getEl().style.lineHeight=s.layoutRect().h+'px';}return s._super();},severity:function(l){this.classes.remove('error');this.classes.remove('warning');this.classes.remove('success');this.classes.add(l);},renderHtml:function(){var s=this;var t,f,a=s.settings.forId;var b=s.settings.html?s.settings.html:s.encode(s.state.get('text'));if(!a&&(f=s.settings.forName)){t=s.getRoot().find('#'+f)[0];if(t){a=t._id;}}if(a){return'<label id="'+s._id+'" class="'+s.classes+'"'+(a?' for="'+a+'"':'')+'>'+b+'</label>';}return'<span id="'+s._id+'" class="'+s.classes+'">'+b+'</span>';},bindStates:function(){var s=this;s.state.on('change:text',function(e){s.innerHtml(s.encode(e.value));if(s.state.get('rendered')){s.updateLayoutRect();}});return s._super();}});var Rb=l4.extend({Defaults:{role:'toolbar',layout:'flow'},init:function(s){var a=this;a._super(s);a.classes.add('toolbar');},postRender:function(){var s=this;s.items().each(function(a){a.classes.add('toolbar-item');});return s._super();}});var Sb=Rb.extend({Defaults:{role:'menubar',containerCls:'menubar',ariaRoot:true,defaults:{type:'menubutton'}}});function Tb(m7,P){while(m7){if(P===m7){return true;}m7=m7.parentNode;}return false;}var Ub=b6.extend({init:function(s){var a=this;a._renderOpen=true;a._super(s);s=a.settings;a.classes.add('menubtn');if(s.fixedWidth){a.classes.add('fixed-width');}a.aria('haspopup',true);a.state.set('menu',s.menu||a.render());},showMenu:function(t){var s=this;var a;if(s.menu&&s.menu.visible()&&t!==false){return s.hideMenu();}if(!s.menu){a=s.state.get('menu')||[];s.classes.add('opened');if(a.length){a={type:'menu',animate:true,items:a};}else{a.type=a.type||'menu';a.animate=true;}if(!a.renderTo){s.menu=h4.create(a).parent(s).renderTo();}else{s.menu=a.parent(s).show().renderTo();}s.fire('createmenu');s.menu.reflow();s.menu.on('cancel',function(e){if(e.control.parent()===s.menu){e.stopPropagation();s.focus();s.hideMenu();}});s.menu.on('select',function(){s.focus();});s.menu.on('show hide',function(e){if(e.control===s.menu){s.activeMenu(e.type==='show');s.classes.toggle('opened',e.type==='show');}s.aria('expanded',e.type==='show');}).fire('show');}s.menu.show();s.menu.layoutRect({w:s.layoutRect().w});s.menu.repaint();s.menu.moveRel(s.getEl(),s.isRtl()?['br-tr','tr-br']:['bl-tl','tl-bl']);s.fire('showmenu');},hideMenu:function(){var s=this;if(s.menu){s.menu.items().each(function(i){if(i.hideMenu){i.hideMenu();}});s.menu.hide();}},activeMenu:function(s){this.classes.toggle('active',s);},renderHtml:function(){var s=this,i=s._id,p=s.classPrefix;var a=s.settings.icon,b;var t=s.state.get('text');var d='';b=s.settings.image;if(b){a='none';if(typeof b!=='string'){b=window.getSelection?b[0]:b[1];}b=' style="background-image: url(\''+b+'\')"';}else{b='';}if(t){s.classes.add('btn-has-text');d='<span class="'+p+'txt">'+s.encode(t)+'</span>';}a=s.settings.icon?p+'ico '+p+'i-'+a:'';s.aria('role',s.parent()instanceof Sb?'menuitem':'button');return'<div id="'+i+'" class="'+s.classes+'" tabindex="-1" aria-labelledby="'+i+'">'+'<button id="'+i+'-open" role="presentation" type="button" tabindex="-1">'+(a?'<i class="'+a+'"'+b+'></i>':'')+d+' <i class="'+p+'caret"></i>'+'</button>'+'</div>';},postRender:function(){var s=this;s.on('click',function(e){if(e.control===s&&Tb(e.target,s.getEl())){s.focus();s.showMenu(!e.aria);if(e.aria){s.menu.items().filter(':visible')[0].focus();}}});s.on('mouseenter',function(e){var o=e.control;var P=s.parent();var h;if(o&&P&&o instanceof Ub&&o.parent()===P){P.items().filter('MenuButton').each(function(a){if(a.hideMenu&&a!==o){if(a.menu&&a.menu.visible()){h=true;}a.hideMenu();}});if(h){o.focus();o.showMenu();}}});return s._super();},bindStates:function(){var s=this;s.state.on('change:menu',function(){if(s.menu){s.menu.remove();}s.menu=null;});return s._super();},remove:function(){this._super();if(this.menu){this.menu.remove();}}});function Vb(e,i){var s=this;var a;var M3=S3.classPrefix;var t;s.show=function(b,d){function r(){if(a){g3(e).append('<div class="'+M3+'throbber'+(i?' '+M3+'throbber-inline':'')+'"></div>');if(d){d();}}}s.hide();a=true;if(b){t=u.setTimeout(r,b);}else{r();}return s;};s.hide=function(){var c9=e.lastChild;u.clearTimeout(t);if(c9&&c9.className.indexOf('throbber')!==-1){c9.parentNode.removeChild(c9);}a=false;return s;};}var Wb=C4.extend({Defaults:{defaultType:'menuitem',border:1,layout:'stack',role:'application',bodyRole:'menu',ariaRoot:true},init:function(s){var a=this;s.autohide=true;s.constrainToViewport=true;if(typeof s.items==='function'){s.itemsFactory=s.items;s.items=[];}if(s.itemDefaults){var b=s.items;var i=b.length;while(i--){b[i]=R.extend({},s.itemDefaults,b[i]);}}a._super(s);a.classes.add('menu');if(s.animate&&m.ie!==11){a.classes.add('animate');}},repaint:function(){this.classes.toggle('menu-align',true);this._super();this.getEl().style.height='';this.getEl('body').style.height='';return this;},cancel:function(){var s=this;s.hideAll();s.fire('select');},load:function(){var s=this;var t,f;function h(){if(s.throbber){s.throbber.hide();s.throbber=null;}}f=s.settings.itemsFactory;if(!f){return;}if(!s.throbber){s.throbber=new Vb(s.getEl('body'),true);if(s.items().length===0){s.throbber.show();s.fire('loading');}else{s.throbber.show(100,function(){s.items().remove();s.fire('loading');});}s.on('hide close',h);}s.requestTime=t=new Date().getTime();s.settings.itemsFactory(function(i){if(i.length===0){s.hide();return;}if(s.requestTime!==t){return;}s.getEl().style.width='';s.getEl('body').style.width='';h();s.items().remove();s.getEl('body').innerHTML='';s.add(i);s.renderNew();s.fire('loaded');});},hideAll:function(){var s=this;this.find('menuitem').exec('hideMenu');return s._super();},preRender:function(){var s=this;s.items().each(function(a){var b=a.settings;if(b.icon||b.image||b.selectable){s._hasIcons=true;return false;}});if(s.settings.itemsFactory){s.on('postrender',function(){if(s.settings.itemsFactory){s.load();}});}s.on('show hide',function(e){if(e.control===s){if(e.type==='show'){u.setTimeout(function(){s.classes.add('in');},0);}else{s.classes.remove('in');}}});return s._super();}});var Xb=Ub.extend({init:function(s){var a=this;var $6,b,d,l;function f(e){for(var i=0;i<e.length;i++){b=e[i].selected||s.value===e[i].value;if(b){d=d||e[i].text;a.state.set('value',e[i].value);return true;}if(e[i].menu){if(f(e[i].menu)){return true;}}}}a._super(s);s=a.settings;a._values=$6=s.values;if($6){if(typeof s.value!=='undefined'){f($6);}if(!b&&$6.length>0){d=$6[0].text;a.state.set('value',$6[0].value);}a.state.set('menu',$6);}a.state.set('text',s.text||d);a.classes.add('listbox');a.on('select',function(e){var h=e.control;if(l){e.lastControl=l;}if(s.multiple){h.active(!h.active());}else{a.value(e.control.value());}l=h;});},value:function(H6){if(arguments.length===0){return this.state.get('value');}if(typeof H6==='undefined'){return this;}if(this.settings.values){var b=R.grep(this.settings.values,function(a){return a.value===H6;});if(b.length>0){this.state.set('value',H6);}else if(H6===null){this.state.set('value',null);}}else{this.state.set('value',H6);}return this;},bindStates:function(){var s=this;function a(d,H6){if(d instanceof Wb){d.items().each(function(e){if(!e.hasMenus()){e.active(e.value()===H6);}});}}function b(d,H6){var e;if(!d){return;}for(var i=0;i<d.length;i++){if(d[i].value===H6){return d[i];}if(d[i].menu){e=b(d[i].menu,H6);if(e){return e;}}}}s.on('show',function(e){a(e.control,s.value());});s.state.on('change:value',function(e){var d=b(s.state.get('menu'),e.value);if(d){s.text(d.text);}else{s.text(s.settings.text);}});return s._super();}});var Yb=function(a,s){var t=a._textStyle;if(t){var b=a.getEl('text');b.setAttribute('style',t);if(s){b.style.color='';b.style.backgroundColor='';}}};var Zb=_3.extend({Defaults:{border:0,role:'menuitem'},init:function(s){var a=this;var t;a._super(s);s=a.settings;a.classes.add('menu-item');if(s.menu){a.classes.add('menu-item-expand');}if(s.preview){a.classes.add('menu-item-preview');}t=a.state.get('text');if(t==='-'||t==='|'){a.classes.add('menu-item-sep');a.aria('role','separator');a.state.set('text','-');}if(s.selectable){a.aria('role','menuitemcheckbox');a.classes.add('menu-item-checkbox');s.icon='selected';}if(!s.preview&&!s.selectable){a.classes.add('menu-item-normal');}a.on('mousedown',function(e){e.preventDefault();});if(s.menu&&!s.ariaHideMenu){a.aria('haspopup',true);}},hasMenus:function(){return!!this.settings.menu;},showMenu:function(){var s=this;var a=s.settings;var b;var P=s.parent();P.items().each(function(d){if(d!==s){d.hideMenu();}});if(a.menu){b=s.menu;if(!b){b=a.menu;if(b.length){b={type:'menu',items:b};}else{b.type=b.type||'menu';}if(P.settings.itemDefaults){b.itemDefaults=P.settings.itemDefaults;}b=s.menu=h4.create(b).parent(s).renderTo();b.reflow();b.on('cancel',function(e){e.stopPropagation();s.focus();b.hide();});b.on('show hide',function(e){if(e.control.items){e.control.items().each(function(d){d.active(d.settings.selected);});}}).fire('show');b.on('hide',function(e){if(e.control===b){s.classes.remove('selected');}});b.submenu=true;}else{b.show();}b._parentMenu=P;b.classes.add('menu-sub');var r=b.testMoveRel(s.getEl(),s.isRtl()?['tl-tr','bl-br','tr-tl','br-bl']:['tr-tl','br-bl','tl-tr','bl-br']);b.moveRel(s.getEl(),r);b.rel=r;r='menu-sub-'+r;b.classes.remove(b._lastRel).add(r);b._lastRel=r;s.classes.add('selected');s.aria('expanded',true);}},hideMenu:function(){var s=this;if(s.menu){s.menu.items().each(function(i){if(i.hideMenu){i.hideMenu();}});s.menu.hide();s.aria('expanded',false);}return s;},renderHtml:function(){var s=this;var a=s._id;var b=s.settings;var p=s.classPrefix;var t=s.state.get('text');var d=s.settings.icon,e='',f=b.shortcut;var h=s.encode(b.url),j='';function k(f){var i,H6,r={};if(m.mac){r={alt:'&#x2325;',ctrl:'&#x2318;',shift:'&#x21E7;',meta:'&#x2318;'};}else{r={meta:'Ctrl'};}f=f.split('+');for(i=0;i<f.length;i++){H6=r[f[i].toLowerCase()];if(H6){f[i]=H6;}}return f.join('+');}function l(i){return i.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');}function n(t){var C=b.match||'';return C?t.replace(new RegExp(l(C),'gi'),function(C){return'!mce~match['+C+']mce~match!';}):t;}function o(t){return t.replace(new RegExp(l('!mce~match['),'g'),'<b>').replace(new RegExp(l(']mce~match!'),'g'),'</b>');}if(d){s.parent().classes.add('menu-has-icons');}if(b.image){e=' style="background-image: url(\''+b.image+'\')"';}if(f){f=k(f);}d=p+'ico '+p+'i-'+(s.settings.icon||'none');j=t!=='-'?'<i class="'+d+'"'+e+'></i>\xA0':'';t=o(s.encode(n(t)));h=o(s.encode(n(h)));return'<div id="'+a+'" class="'+s.classes+'" tabindex="-1">'+j+(t!=='-'?'<span id="'+a+'-text" class="'+p+'text">'+t+'</span>':'')+(f?'<div id="'+a+'-shortcut" class="'+p+'menu-shortcut">'+f+'</div>':'')+(b.menu?'<div class="'+p+'caret"></div>':'')+(h?'<div class="'+p+'menu-item-link">'+h+'</div>':'')+'</div>';},postRender:function(){var s=this,a=s.settings;var t=a.textStyle;if(typeof t==='function'){t=t.call(this);}if(t){var b=s.getEl('text');if(b){b.setAttribute('style',t);s._textStyle=t;}}s.on('mouseenter click',function(e){if(e.control===s){if(!a.menu&&e.type==='click'){s.fire('select');u.requestAnimationFrame(function(){s.parent().hideAll();});}else{s.showMenu();if(e.aria){s.menu.focus(true);}}}});s._super();return s;},hover:function(){var s=this;s.parent().items().each(function(a){a.classes.remove('selected');});s.classes.toggle('selected',true);return s;},active:function(s){Yb(this,s);if(typeof s!=='undefined'){this.aria('checked',s);}return this._super(s);},remove:function(){this._super();if(this.menu){this.menu.remove();}}});var $b=e6.extend({Defaults:{classes:'radio',role:'radio'}});var _b=_3.extend({renderHtml:function(){var s=this,p=s.classPrefix;s.classes.add('resizehandle');if(s.settings.direction==='both'){s.classes.add('resizehandle-both');}s.canFocus=false;return'<div id="'+s._id+'" class="'+s.classes+'">'+'<i class="'+p+'ico '+p+'i-resize"></i>'+'</div>';},postRender:function(){var s=this;s._super();s.resizeDragHelper=new g4(this._id,{start:function(){s.fire('ResizeStart');},drag:function(e){if(s.settings.direction!=='both'){e.deltaX=0;}s.fire('Resize',e);},stop:function(){s.fire('ResizeEnd');}});},remove:function(){if(this.resizeDragHelper){this.resizeDragHelper.destroy();}return this._super();}});function ac(o){var s='';if(o){for(var i=0;i<o.length;i++){s+='<option value="'+o[i]+'">'+o[i]+'</option>';}}return s;}var bc=_3.extend({Defaults:{classes:'selectbox',role:'selectbox',options:[]},init:function(s){var a=this;a._super(s);if(a.settings.size){a.size=a.settings.size;}if(a.settings.options){a._options=a.settings.options;}a.on('keydown',function(e){var r;if(e.keyCode===13){e.preventDefault();a.parents().reverse().each(function(b){if(b.toJSON){r=b;return false;}});a.fire('submit',{data:r.toJSON()});}});},options:function(s){if(!arguments.length){return this.state.get('options');}this.state.set('options',s);return this;},renderHtml:function(){var s=this;var o,_6='';o=ac(s._options);if(s.size){_6=' size = "'+s.size+'"';}return'<select id="'+s._id+'" class="'+s.classes+'"'+_6+'>'+o+'</select>';},bindStates:function(){var s=this;s.state.on('change:options',function(e){s.getEl().innerHTML=ac(e.value);});return s._super();}});function cc(H6,a,b){if(H6<a){H6=a;}if(H6>b){H6=b;}return H6;}function dc(e,F6,H6){e.setAttribute('aria-'+F6,H6);}function ec(a,H6){var b,s,d,e,f,h;if(a.settings.orientation==='v'){e='top';d='height';s='h';}else{e='left';d='width';s='w';}h=a.getEl('handle');b=(a.layoutRect()[s]||100)-f3.getSize(h)[d];f=b*((H6-a._minValue)/(a._maxValue-a._minValue))+'px';h.style[e]=f;h.style.height=a.layoutRect().h+'px';dc(h,'valuenow',H6);dc(h,'valuetext',''+a.settings.previewFilter(H6));dc(h,'valuemin',a._minValue);dc(h,'valuemax',a._maxValue);}var fc=_3.extend({init:function(s){var a=this;if(!s.previewFilter){s.previewFilter=function(H6){return Math.round(H6*100)/100;};}a._super(s);a.classes.add('slider');if(s.orientation==='v'){a.classes.add('vertical');}a._minValue=z2.isNumber(s.minValue)?s.minValue:0;a._maxValue=z2.isNumber(s.maxValue)?s.maxValue:100;a._initValue=a.state.get('value');},renderHtml:function(){var s=this,i=s._id,p=s.classPrefix;return'<div id="'+i+'" class="'+s.classes+'">'+'<div id="'+i+'-handle" class="'+p+'slider-handle" role="slider" tabindex="-1"></div>'+'</div>';},reset:function(){this.value(this._initValue).repaint();},postRender:function(){var s=this;var a,b,d,f,h,i;function t(e,n,v){return(v+e)/(n-e);}function j(e,n,v){return v*(n-e)-e;}function k(a,b){function n(e){var H6;H6=s.value();H6=j(a,b,t(a,b,H6)+e*0.05);H6=cc(H6,a,b);s.value(H6);s.fire('dragstart',{value:H6});s.fire('drag',{value:H6});s.fire('dragend',{value:H6});}s.on('keydown',function(e){switch(e.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1);break;}});}function l(a,b,n){var o,p,r,v,H6;s._dragHelper=new g4(s._id,{handle:s._id+'-handle',start:function(e){o=e[d];p=parseInt(s.getEl('handle').style[f],10);r=(s.layoutRect()[i]||100)-f3.getSize(n)[h];s.fire('dragstart',{value:H6});},drag:function(e){var w=e[d]-o;v=cc(p+w,0,r);n.style[f]=v+'px';H6=a+v/r*(b-a);s.value(H6);s.tooltip().text(''+s.settings.previewFilter(H6)).show().moveRel(n,'bc tc');s.fire('drag',{value:H6});},stop:function(){s.tooltip().hide();s.fire('dragend',{value:H6});}});}a=s._minValue;b=s._maxValue;if(s.settings.orientation==='v'){d='screenY';f='top';h='height';i='h';}else{d='screenX';f='left';h='width';i='w';}s._super();k(a,b);l(a,b,s.getEl('handle'));},repaint:function(){this._super();ec(this,this.value());},bindStates:function(){var s=this;s.state.on('change:value',function(e){ec(s,e.value);});return s._super();}});var gc=_3.extend({renderHtml:function(){var s=this;s.classes.add('spacer');s.canFocus=false;return'<div id="'+s._id+'" class="'+s.classes+'"></div>';}});var hc=Ub.extend({Defaults:{classes:'widget btn splitbtn',role:'button'},repaint:function(){var s=this;var e=s.getEl();var r=s.layoutRect();var a,b;s._super();a=e.firstChild;b=e.lastChild;g3(a).css({width:r.w-f3.getSize(b).width,height:r.h-2});g3(b).css({height:r.h-2});return s;},activeMenu:function(s){var a=this;g3(a.getEl().lastChild).toggleClass(a.classPrefix+'active',s);},renderHtml:function(){var s=this;var i=s._id;var p=s.classPrefix;var a;var b=s.state.get('icon');var t=s.state.get('text');var d=s.settings;var e='',f;a=d.image;if(a){b='none';if(typeof a!=='string'){a=window.getSelection?a[0]:a[1];}a=' style="background-image: url(\''+a+'\')"';}else{a='';}b=d.icon?p+'ico '+p+'i-'+b:'';if(t){s.classes.add('btn-has-text');e='<span class="'+p+'txt">'+s.encode(t)+'</span>';}f=typeof d.active==='boolean'?' aria-pressed="'+d.active+'"':'';return'<div id="'+i+'" class="'+s.classes+'" role="button"'+f+' tabindex="-1">'+'<button type="button" hidefocus="1" tabindex="-1">'+(b?'<i class="'+b+'"'+a+'></i>':'')+e+'</button>'+'<button type="button" class="'+p+'open" hidefocus="1" tabindex="-1">'+(s._menuBtnText?(b?'\xA0':'')+s._menuBtnText:'')+' <i class="'+p+'caret"></i>'+'</button>'+'</div>';},postRender:function(){var s=this,o=s.settings.onclick;s.on('click',function(e){var m7=e.target;if(e.control===this){while(m7){if(e.aria&&e.aria.key!=='down'||m7.nodeName==='BUTTON'&&m7.className.indexOf('open')===-1){e.stopImmediatePropagation();if(o){o.call(this,e);}return;}m7=m7.parentNode;}}});delete s.settings.onclick;return s._super();}});var ic=la.extend({Defaults:{containerClass:'stack-layout',controlClass:'stack-layout-item',endClass:'break'},isNative:function(){return true;}});var jc=n4.extend({Defaults:{layout:'absolute',defaults:{type:'panel'}},activateTab:function(a){var b;if(this.activeTabId){b=this.getEl(this.activeTabId);g3(b).removeClass(this.classPrefix+'active');b.setAttribute('aria-selected','false');}this.activeTabId='t'+a;b=this.getEl('t'+a);b.setAttribute('aria-selected','true');g3(b).addClass(this.classPrefix+'active');this.items()[a].show().fire('showtab');this.reflow();this.items().each(function(d,i){if(a!==i){d.hide();}});},renderHtml:function(){var s=this;var l=s._layout;var t='';var p=s.classPrefix;s.preRender();l.preRender(s);s.items().each(function(a,i){var b=s._id+'-t'+i;a.aria('role','tabpanel');a.aria('labelledby',b);t+='<div id="'+b+'" class="'+p+'tab" '+'unselectable="on" role="tab" aria-controls="'+a._id+'" aria-selected="false" tabIndex="-1">'+s.encode(a.settings.title)+'</div>';});return'<div id="'+s._id+'" class="'+s.classes+'" hidefocus="1" tabindex="-1">'+'<div id="'+s._id+'-head" class="'+p+'tabs" role="tablist">'+t+'</div>'+'<div id="'+s._id+'-body" class="'+s.bodyClasses+'">'+l.renderHtml(s)+'</div>'+'</div>';},postRender:function(){var s=this;s._super();s.settings.activeTab=s.settings.activeTab||0;s.activateTab(s.settings.activeTab);this.on('click',function(e){var t=e.target.parentNode;if(t&&t.id===s._id+'-head'){var i=t.childNodes.length;while(i--){if(t.childNodes[i]===e.target){s.activateTab(i);}}}});},initLayoutRect:function(){var s=this;var r,a,b;a=f3.getSize(s.getEl('head')).width;a=a<0?0:a;b=0;s.items().each(function(i){a=Math.max(a,i.layoutRect().minW);b=Math.max(b,i.layoutRect().minH);});s.items().each(function(d){d.settings.x=0;d.settings.y=0;d.settings.w=a;d.settings.h=b;d.layoutRect({x:0,y:0,w:a,h:b});});var h=f3.getSize(s.getEl('head')).height;s.settings.minWidth=a;s.settings.minHeight=b+h;r=s._super();r.deltaH+=h;r.innerH=r.h-r.deltaH;return r;}});var kc=_3.extend({init:function(s){var a=this;a._super(s);a.classes.add('textbox');if(s.multiline){a.classes.add('multiline');}else{a.on('keydown',function(e){var r;if(e.keyCode===13){e.preventDefault();a.parents().reverse().each(function(b){if(b.toJSON){r=b;return false;}});a.fire('submit',{data:r.toJSON()});}});a.on('keyup',function(e){a.state.set('value',e.target.value);});}},repaint:function(){var s=this;var a,r,b,d,e=0,l;a=s.getEl().style;r=s._layoutRect;l=s._lastRepaintRect||{};var f=document;if(!s.settings.multiline&&f.all&&(!f.documentMode||f.documentMode<=8)){a.lineHeight=r.h-e+'px';}b=s.borderBox;d=b.left+b.right+8;e=b.top+b.bottom+(s.settings.multiline?8:0);if(r.x!==l.x){a.left=r.x+'px';l.x=r.x;}if(r.y!==l.y){a.top=r.y+'px';l.y=r.y;}if(r.w!==l.w){a.width=r.w-d+'px';l.w=r.w;}if(r.h!==l.h){a.height=r.h-e+'px';l.h=r.h;}s._lastRepaintRect=l;s.fire('repaint',{},false);return s;},renderHtml:function(){var s=this;var a=s.settings;var b,e;b={id:s._id,hidefocus:'1'};R.each(['rows','spellcheck','maxLength','size','readonly','min','max','step','list','pattern','placeholder','required','multiple'],function(F6){b[F6]=a[F6];});if(s.disabled()){b.disabled='disabled';}if(a.subtype){b.type=a.subtype;}e=f3.create(a.multiline?'textarea':'input',b);e.value=s.state.get('value');e.className=s.classes.toString();return e.outerHTML;},value:function(H6){if(arguments.length){this.state.set('value',H6);return this;}if(this.state.get('rendered')){this.state.set('value',this.getEl().value);}return this.state.get('value');},postRender:function(){var s=this;s.getEl().value=s.state.get('value');s._super();s.$el.on('change',function(e){s.state.set('value',e.target.value);s.fire('change',e);});},bindStates:function(){var s=this;s.state.on('change:value',function(e){if(s.getEl().value!==e.value){s.getEl().value=e.value;}});s.state.on('change:disabled',function(e){s.getEl().disabled=e.value;});return s._super();},remove:function(){this.$el.off();this._super();}});var lc=function(){return{Selector:r3,Collection:w3,ReflowQueue:E3,Control:S3,Factory:h4,KeyboardNavigation:j4,Container:l4,DragHelper:g4,Scrollable:m4,Panel:n4,Movable:Z3,Resizable:o4,FloatPanel:C4,Window:K4,MessageBox:L4,Tooltip:$3,Widget:_3,Progress:a4,Notification:c4,Layout:_5,AbsoluteLayout:a6,Button:b6,ButtonGroup:d6,Checkbox:e6,ComboBox:g6,ColorBox:h6,PanelButton:i6,ColorButton:k6,ColorPicker:m6,Path:o6,ElementPath:p6,FormItem:q6,Form:r6,FieldSet:s6,FilePicker:ia,FitLayout:ja,FlexLayout:ka,FlowLayout:la,FormatControls:Mb,GridLayout:Nb,Iframe:Ob,InfoBox:Pb,Label:Qb,Toolbar:Rb,MenuBar:Sb,MenuButton:Ub,MenuItem:Zb,Throbber:Vb,Menu:Wb,ListBox:Xb,Radio:$b,ResizeHandle:_b,SelectBox:bc,Slider:fc,Spacer:gc,SplitButton:hc,StackLayout:ic,TabPanel:jc,TextBox:kc,DropZone:n6,BrowseButton:c6};};var mc=function(t){if(t.ui){R.each(lc(),function(r,k){t.ui[k]=r;});}else{t.ui=lc();}};var nc=function(){R.each(lc(),function(r,k){h4.add(k,r);});};var oc={appendTo:mc,registerToFactory:nc};oc.registerToFactory();oc.appendTo(window.tinymce?window.tinymce:{});g.add('inlite',function(e){var p=$5();Mb.setup(e);I5.addToEditor(e,p);return O4.get(e,p);});function pc(){}return pc;}());})();
