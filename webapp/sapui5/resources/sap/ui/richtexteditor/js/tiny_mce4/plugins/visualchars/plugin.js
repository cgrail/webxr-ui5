(function(){var c=(function(){'use strict';var C=function(i){var L1=i;var d=function(){return L1;};var s=function(v){L1=v;};var a=function(){return C(d());};return{get:d,set:s,clone:a};};var g=tinymce.util.Tools.resolve('tinymce.PluginManager');var d=function(t){var i=function(){return t.get();};return{isEnabled:i};};var $={get:d};var h=function(e,s){return e.fire('VisualChars',{state:s});};var k={fireVisualChars:h};var l={'\xA0':'nbsp','\xAD':'shy'};var m=function(l,g){var a,r='';for(a in l){r+=a;}return new RegExp('['+r+']',g?'g':'');};var p=function(l){var a,s='';for(a in l){if(s){s+=',';}s+='span.mce-'+l[a];}return s;};var q={charMap:l,regExp:m(l),regExpGlobal:m(l,true),selector:p(l),charMapToRegExp:m,charMapToSelector:p};var u=function(){var x=[];for(var a=0;a<arguments.length;a++){x[a]=arguments[a];}};var w=function(f){return function(){var x=[];for(var a=0;a<arguments.length;a++){x[a]=arguments[a];}return f();};};var z=function(f,a){return function(){var x=[];for(var b=0;b<arguments.length;b++){x[b]=arguments[b];}return f(a.apply(null,arguments));};};var A=function(L1){return function(){return L1;};};var B=function(x){return x;};var D=function(a,b){return a===b;};var E=function(f){var x=[];for(var a=1;a<arguments.length;a++){x[a-1]=arguments[a];}var b=new Array(arguments.length-1);for(var i=1;i<arguments.length;i++)b[i-1]=arguments[i];return function(){var x=[];for(var a=0;a<arguments.length;a++){x[a]=arguments[a];}var n=new Array(arguments.length);for(var j=0;j<n.length;j++)n[j]=arguments[j];var e=b.concat(n);return f.apply(null,e);};};var F=function(f){return function(){var x=[];for(var a=0;a<arguments.length;a++){x[a]=arguments[a];}return!f.apply(null,arguments);};};var G=function(a){return function(){throw new Error(a);};};var H=function(f){return f();};var I=function(f){f();};var J=A(false);var K=A(true);var L={noop:u,noarg:w,compose:z,constant:A,identity:B,tripleEquals:D,curry:E,not:F,die:G,apply:H,call:I,never:J,always:K};var M=L.never;var N=L.always;var O=function(){return P;};var P=function(){var e=function(o){return o.isNone();};var I=function(t){return t();};var i=function(n){return n;};var u=function(){};var a={fold:function(n,s){return n();},is:M,isSome:M,isNone:N,getOr:i,getOrThunk:I,getOrDie:function(b){throw new Error(b||'error: getOrDie called on none.');},or:i,orThunk:I,map:O,ap:O,each:u,bind:O,flatten:O,exists:M,forall:N,filter:O,equals:e,equals_:e,toArray:function(){return[];},toString:L.constant('none()')};if(Object.freeze)Object.freeze(a);return a;}();var Q=function(a){var e=function(){return a;};var i=function(){return j;};var c1=function(f){return Q(f(a));};var p1=function(f){return f(a);};var j={fold:function(n,s){return s(a);},is:function(v){return a===v;},isSome:N,isNone:M,getOr:e,getOrThunk:e,getOrDie:e,or:i,orThunk:i,map:c1,ap:function(o){return o.fold(O,function(f){return Q(f(a));});},each:function(f){f(a);},bind:p1,flatten:e,exists:p1,forall:p1,filter:function(f){return f(a)?j:P;},equals:function(o){return o.is(a);},equals_:function(o,f){return o.fold(M,function(b){return f(a,b);});},toArray:function(){return[a];},toString:function(){return'some('+a+')';}};return j;};var R=function(L1){return L1===null||L1===undefined?P:Q(L1);};var S={some:Q,none:O,from:R};var T=function(x){if(x===null)return'null';var t=typeof x;if(t==='object'&&Array.prototype.isPrototypeOf(x))return'array';if(t==='object'&&String.prototype.isPrototypeOf(x))return'string';return t;};var U=function(K1){return function(L1){return T(L1)===K1;};};var V={isString:U('string'),isObject:U('object'),isArray:U('array'),isNull:U('null'),isBoolean:U('boolean'),isUndefined:U('undefined'),isFunction:U('function'),isNumber:U('number')};var W=function(){var a=Array.prototype.indexOf;var f=function(b,x){return a.call(b,x);};var s=function(b,x){return m1(b,x);};return a===undefined?s:f;}();var X=function(a,x){var r=W(a,x);return r===-1?S.none():S.some(r);};var Y=function(a,x){return W(a,x)>-1;};var Z=function(x,a){return l1(x,a).isSome();};var _=function(n,f){var r=[];for(var i=0;i<n;i++){r.push(f(i));}return r;};var b1=function(a,b){var r=[];for(var i=0;i<a.length;i+=b){var s=a.slice(i,i+b);r.push(s);}return r;};var c1=function(a,f){var b=a.length;var r=new Array(b);for(var i=0;i<b;i++){var x=a[i];r[i]=f(x,i,a);}return r;};var d1=function(a,f){for(var i=0,b=a.length;i<b;i++){var x=a[i];f(x,i,a);}};var e1=function(a,f){for(var i=a.length-1;i>=0;i--){var x=a[i];f(x,i,a);}};var f1=function(a,b){var e=[];var f=[];for(var i=0,j=a.length;i<j;i++){var x=a[i];var n=b(x,i,a)?e:f;n.push(x);}return{pass:e,fail:f};};var g1=function(a,b){var r=[];for(var i=0,e=a.length;i<e;i++){var x=a[i];if(b(x,i,a)){r.push(x);}}return r;};var h1=function(a,f){if(a.length===0){return[];}else{var b=f(a[0]);var r=[];var e=[];for(var i=0,j=a.length;i<j;i++){var x=a[i];var K1=f(x);if(K1!==b){r.push(e);e=[];}b=K1;e.push(x);}if(e.length!==0){r.push(e);}return r;}};var i1=function(a,f,b){e1(a,function(x){b=f(b,x);});return b;};var j1=function(a,f,b){d1(a,function(x){b=f(b,x);});return b;};var k1=function(a,b){for(var i=0,e=a.length;i<e;i++){var x=a[i];if(b(x,i,a)){return S.some(x);}}return S.none();};var l1=function(a,b){for(var i=0,e=a.length;i<e;i++){var x=a[i];if(b(x,i,a)){return S.some(i);}}return S.none();};var m1=function(a,x){for(var i=0,b=a.length;i<b;++i){if(a[i]===x){return i;}}return-1;};var n1=Array.prototype.push;var o1=function(x){var r=[];for(var i=0,a=x.length;i<a;++i){if(!Array.prototype.isPrototypeOf(x[i]))throw new Error('Arr.flatten item '+i+' was not an array, input: '+x);n1.apply(r,x[i]);}return r;};var p1=function(x,f){var o=c1(x,f);return o1(o);};var q1=function(a,b){for(var i=0,e=a.length;i<e;++i){var x=a[i];if(b(x,i,a)!==true){return false;}}return true;};var r1=function(a,b){return a.length===b.length&&q1(a,function(x,i){return x===b[i];});};var s1=Array.prototype.slice;var t1=function(x){var r=s1.call(x,0);r.reverse();return r;};var u1=function(a,b){return g1(a,function(x){return!Y(b,x);});};var v1=function(a,f){var r={};for(var i=0,b=a.length;i<b;i++){var x=a[i];r[String(x)]=f(x,i);}return r;};var w1=function(x){return[x];};var x1=function(x,a){var b=s1.call(x,0);b.sort(a);return b;};var y1=function(x){return x.length===0?S.none():S.some(x[0]);};var z1=function(x){return x.length===0?S.none():S.some(x[x.length-1]);};var A1=V.isFunction(Array.from)?Array.from:function(x){return s1.call(x);};var B1={map:c1,each:d1,eachr:e1,partition:f1,filter:g1,groupBy:h1,indexOf:X,foldr:i1,foldl:j1,find:k1,findIndex:l1,flatten:o1,bind:p1,forall:q1,exists:Z,contains:Y,equal:r1,reverse:t1,chunk:b1,difference:u1,mapToObject:v1,pure:w1,sort:x1,range:_,head:y1,last:z1,from:A1};var C1=function(a,s){var b=s||document;var e=b.createElement('div');e.innerHTML=a;if(!e.hasChildNodes()||e.childNodes.length>1){console.error('HTML does not have a single root node',a);throw'HTML must have a single root node';}return F1(e.childNodes[0]);};var D1=function(t,s){var a=s||document;var n=a.createElement(t);return F1(n);};var E1=function(t,s){var a=s||document;var n=a.createTextNode(t);return F1(n);};var F1=function(n){if(n===null||n===undefined)throw new Error('Node cannot be null or undefined');return{dom:L.constant(n)};};var G1=function(a,x,y){return S.from(a.dom().elementFromPoint(x,y)).map(F1);};var H1={fromHtml:C1,fromTag:D1,fromText:E1,fromDom:F1,fromPoint:G1};var I1={ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12};var J1=function(e){var r=e.dom().nodeName;return r.toLowerCase();};var K1=function(e){return e.dom().nodeType;};var L1=function(e){return e.dom().nodeValue;};var M1=function(t){return function(e){return K1(e)===t;};};var N1=function(e){return K1(e)===I1.COMMENT||J1(e)==='#comment';};var O1=M1(I1.ELEMENT);var P1=M1(I1.TEXT);var Q1=M1(I1.DOCUMENT);var R1={name:J1,type:K1,value:L1,isElement:O1,isText:P1,isDocument:Q1,isComment:N1};var S1=function(L1){return'<span data-mce-bogus="1" class="mce-'+q.charMap[L1]+'">'+L1+'</span>';};var T1={wrapCharWithSpan:S1};var U1=function(n){return R1.isText(n)&&R1.value(n)!==undefined&&q.regExp.test(R1.value(n));};var V1=function(s,a){var r=[];var b=s.dom();var e=B1.map(b.childNodes,H1.fromDom);B1.each(e,function(x){if(a(x)){r=r.concat([x]);}r=r.concat(V1(x,a));});return r;};var W1=function(e,r){while(e.parentNode){if(e.parentNode===r){return e;}e=e.parentNode;}};var X1=function(a){return a.replace(q.regExpGlobal,T1.wrapCharWithSpan);};var Y1={isMatch:U1,filterDescendants:V1,findParentElm:W1,replaceWithSpans:X1};var Z1=function(e,r){var a,b;var f=Y1.filterDescendants(H1.fromDom(r),Y1.isMatch);B1.each(f,function(n){var i=Y1.replaceWithSpans(R1.value(n));b=e.dom.create('div',null,i);while(a=b.lastChild){e.dom.insertAfter(a,n.dom());}e.dom.remove(n.dom());});};var $1=function(e,b){var n=e.dom.select(q.selector,b);B1.each(n,function(a){e.dom.remove(a,1);});};var _1=function(e){var b=e.getBody();var a=e.selection.getBookmark();var f=Y1.findParentElm(e.selection.getNode(),b);f=f!==undefined?f:b;$1(e,f);Z1(e,f);e.selection.moveToBookmark(a);};var b2={show:Z1,hide:$1,toggle:_1};var c2=function(e,t){var b=e.getBody();var s=e.selection;var a;t.set(!t.get());k.fireVisualChars(e,t.get());a=s.getBookmark();if(t.get()===true){b2.show(e,b);}else{b2.hide(e,b);}s.moveToBookmark(a);};var d2={toggleVisualChars:c2};var e2=function(e,t){e.addCommand('mceVisualChars',function(){d2.toggleVisualChars(e,t);});};var f2={register:e2};var g2=tinymce.util.Tools.resolve('tinymce.util.Delay');var h2=function(a,t){var b=g2.debounce(function(){b2.toggle(a);},300);if(a.settings.forced_root_block!==false){a.on('keydown',function(e){if(t.get()===true){e.keyCode===13?b2.toggle(a):b();}});}};var i2={setup:h2};var j2=function(a){return function(e){var b=e.control;a.on('VisualChars',function(e){b.active(e.state);});};};var k2=function(e){e.addButton('visualchars',{active:false,title:'Show invisible characters',cmd:'mceVisualChars',onPostRender:j2(e)});e.addMenuItem('visualchars',{text:'Show invisible characters',cmd:'mceVisualChars',onPostRender:j2(e),selectable:true,context:'view',prependToContext:true});};g.add('visualchars',function(e){var t=C(false);f2.register(e,t);k2(e);i2.setup(e,t);return $.get(t);});function l2(){}return l2;}());})();
