var tinymce,tinyMCE;var tinyMCEPopup={init:function(){var s=this,p,a,u;p=s.getWin();tinymce=tinyMCE=p.tinymce;s.editor=tinymce.EditorManager.activeEditor;s.params=s.editor.windowManager.getParams();u=s.editor.windowManager.windows[s.editor.windowManager.windows.length-1];s.features=u.features;s.uiWindow=u;a=s.editor.settings;if(a.popup_css!==false){if(a.popup_css){a.popup_css=s.editor.documentBaseURI.toAbsolute(a.popup_css);}else{a.popup_css=s.editor.baseURI.toAbsolute("plugins/compat3x/css/dialog.css");}}if(a.popup_css_add){a.popup_css+=','+s.editor.documentBaseURI.toAbsolute(a.popup_css_add);}s.dom=s.editor.windowManager.createInstance('tinymce.dom.DOMUtils',document,{ownEvents:true,proxy:tinyMCEPopup._eventProxy});s.dom.bind(window,'ready',s._onDOMLoaded,s);if(s.features.popup_css!==false){s.dom.loadCSS(s.features.popup_css||s.editor.settings.popup_css);}s.listeners=[];s.onInit={add:function(f,b){s.listeners.push({func:f,scope:b});}};s.isWindow=!s.getWindowArg('mce_inline');s.id=s.getWindowArg('mce_window_id');},getWin:function(){return(!window.frameElement&&window.dialogArguments)||opener||parent||top;},getWindowArg:function(n,d){var v=this.params[n];return tinymce.is(v)?v:d;},getParam:function(n,d){return this.editor.getParam(n,d);},getLang:function(n,d){return this.editor.getLang(n,d);},execCommand:function(c,u,v,a){a=a||{};a.skip_focus=1;this.restoreSelection();return this.editor.execCommand(c,u,v,a);},resizeToInnerSize:function(){},executeOnLoad:function(evil){this.onInit.add(function(){eval(evil);});},storeSelection:function(){this.editor.windowManager.bookmark=tinyMCEPopup.editor.selection.getBookmark(1);},restoreSelection:function(){var s=tinyMCEPopup;if(!s.isWindow&&tinymce.isIE){s.editor.selection.moveToBookmark(s.editor.windowManager.bookmark);}},requireLangPack:function(){var s=this,u=s.getWindowArg('plugin_url')||s.getWindowArg('theme_url'),a=s.editor.settings,l;if(a.language!==false){l=a.language||"en";}if(u&&l&&s.features.translate_i18n!==false&&a.language_load!==false){u+='/langs/'+l+'_dlg.js';if(!tinymce.ScriptLoader.isDone(u)){document.write('<script type="text/javascript" src="'+u+'"></script>');tinymce.ScriptLoader.markDone(u);}}},pickColor:function(e,a){var b=document.getElementById(a),c=this.editor.settings.color_picker_callback;if(c){c.call(this.editor,function(v){b.value=v;try{b.onchange();}catch(d){}},b.value);}},openBrowser:function(e,t){tinyMCEPopup.restoreSelection();this.editor.execCallback('file_browser_callback',e,document.getElementById(e).value,t,window);},confirm:function(t,c,s){this.editor.windowManager.confirm(t,c,s,window);},alert:function(t,c,s){this.editor.windowManager.alert(t,c,s,window);},close:function(){var t=this;function c(){t.editor.windowManager.close(window);tinymce=tinyMCE=t.editor=t.params=t.dom=t.dom.doc=null;}if(tinymce.isOpera){t.getWin().setTimeout(c,0);}else{c();}},_restoreSelection:function(){var e=window.event.srcElement;if(e.nodeName=='INPUT'&&(e.type=='submit'||e.type=='button')){tinyMCEPopup.restoreSelection();}},_onDOMLoaded:function(){var t=tinyMCEPopup,a=document.title,h,n;if(t.features.translate_i18n!==false){var m={"update":"Ok","insert":"Ok","cancel":"Cancel","not_set":"--","class_name":"Class name","browse":"Browse"};var l=(tinymce.settings?tinymce.settings:t.editor.settings).language||'en';for(var k in m){tinymce.i18n.data[l+"."+k]=tinymce.i18n.translate(m[k]);}h=document.body.innerHTML;if(tinymce.isIE){h=h.replace(/ (value|title|alt)=([^"][^\s>]+)/gi,' $1="$2"');}document.dir=t.editor.getParam('directionality','');if((n=t.editor.translate(h))&&n!=h){document.body.innerHTML=n;}if((n=t.editor.translate(a))&&n!=a){document.title=a=n;}}if(!t.editor.getParam('browser_preferred_colors',false)||!t.isWindow){t.dom.addClass(document.body,'forceColors');}document.body.style.display='';if(tinymce.Env.ie){if(tinymce.Env.ie<11){document.attachEvent('onmouseup',tinyMCEPopup._restoreSelection);t.dom.add(t.dom.select('head')[0],'base',{target:'_self'});}else{document.addEventListener('mouseup',tinyMCEPopup._restoreSelection,false);}}t.restoreSelection();t.resizeToInnerSize();if(!t.isWindow){t.editor.windowManager.setTitle(window,a);}else{window.focus();}if(!tinymce.isIE&&!t.isWindow){t.dom.bind(document,'focus',function(){t.editor.windowManager.focus(t.id);});}tinymce.each(t.dom.select('select'),function(e){e.onkeydown=tinyMCEPopup._accessHandler;});tinymce.each(t.listeners,function(o){o.func.call(o.scope,t.editor);});if(t.getWindowArg('mce_auto_focus',true)){window.focus();tinymce.each(document.forms,function(f){tinymce.each(f.elements,function(e){if(t.dom.hasClass(e,'mceFocus')&&!e.disabled){e.focus();return false;}});});}document.onkeyup=tinyMCEPopup._closeWinKeyHandler;if('textContent'in document){t.uiWindow.getEl('head').firstChild.textContent=document.title;}else{t.uiWindow.getEl('head').firstChild.innerText=document.title;}},_accessHandler:function(e){e=e||window.event;if(e.keyCode==13||e.keyCode==32){var a=e.target||e.srcElement;if(a.onchange){a.onchange();}return tinymce.dom.Event.cancel(e);}},_closeWinKeyHandler:function(e){e=e||window.event;if(e.keyCode==27){tinyMCEPopup.close();}},_eventProxy:function(i){return function(e){tinyMCEPopup.dom.events.callNativeHandler(i,e);};}};tinyMCEPopup.init();
tinymce.util.Dispatcher=function(s){this.scope=s||this;this.listeners=[];this.add=function(c,s){this.listeners.push({cb:c,scope:s||this.scope});return c;};this.addToTop=function(c,s){var a=this,l={cb:c,scope:s||a.scope};if(a.inDispatch){a.listeners=[l].concat(a.listeners);}else{a.listeners.unshift(l);}return c;};this.remove=function(c){var l=this.listeners,o=null;tinymce.each(l,function(a,i){if(c==a.cb){o=a;l.splice(i,1);return false;}});return o;};this.dispatch=function(){var a=this,r,b=arguments,i,l=a.listeners,c;a.inDispatch=true;for(i=0;i<l.length;i++){c=l[i];r=c.cb.apply(c.scope,b.length>0?b:[c.scope]);if(r===false){break;}}a.inDispatch=false;return r;};};
