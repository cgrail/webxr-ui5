/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/gantt/misc/Format","sap/gantt/shape/Path"],function(F,P){"use strict";var U=P.extend("sap.gantt.shape.ext.ubc.UbcBorderPath",{});U.prototype.getEnableSelection=function(d,r){if(this.mShapeConfig.hasShapeProperty("enableSelection")){return this._configFirst("enableSelection",d);}return false;};U.prototype.getD=function(d,r){var p="";if(this.mShapeConfig.hasShapeProperty("d")){p=this._configFirst("d",d);}else{var a=d.drawData?d.drawData:d.period;if(a.length>0){var m=this._getMaxTotalRevised(d);var b=this._getMaxY(d,r);var c=r.rowHeight-1;var A=this.getAxisTime();for(var i=0;i<a.length;i++){var x,e,y,f;x=A.timeToView(F.abapTimestampToDate(a[i].start_date)).toFixed(1);if(i<a.length-1){e=A.timeToView(F.abapTimestampToDate(a[i+1].start_date)).toFixed(1);}else{e=A.timeToView(F.abapTimestampToDate(a[i].start_date)).toFixed(1);}if(!jQuery.isNumeric(x)){x=A.timeToView(0).toFixed(1);}if(!jQuery.isNumeric(e)){x=A.timeToView(0).toFixed(1);}y=b-a[i].demand/m*c;y=y.toFixed(1);if(y<r.y){y=r.y;}if(i<a.length-1){f=b-a[i+1].demand/m*c;}else{e=A.timeToView(F.abapTimestampToDate(a[i].start_date)).toFixed(1);f=b-a[i].demand/m*c;}f=f.toFixed(1);if(f<r.y){f=r.y;}p+=" M "+x+" "+y+"L"+e+" "+y;p+=" M "+e+" "+y+"L"+e+" "+f;}}}if(this.isValid(p)){return p;}else{jQuery.sap.log.warning("UbcBorderPath shape generated invalid d: "+p+" from the given data: "+d);return null;}};U.prototype.getStroke=function(d,r){if(this.mShapeConfig.hasShapeProperty("stroke")){return this._configFirst("stroke",d);}return"blue";};U.prototype.getStrokeWidth=function(d,r){if(this.mShapeConfig.hasShapeProperty("strokeWidth")){return this._configFirst("strokeWidth",d);}return 0.3;};U.prototype._getMaxY=function(d,r){var t=r.y;var a=r.rowHeight-1;var m=t+a;return m;};U.prototype._getMaxTotalRevised=function(d){var m=this._getMaxTotal(d);var a=m+this._getmaxExceedCap(d);return a;};U.prototype._getMaxTotal=function(d){var m=Math.max.apply(Math,d.period.map(function(o){return o.supply;}));if(m<=0){m=1;}return m;};U.prototype._getmaxExceedCap=function(d){var m=this._getMaxTotal(d);var a=25;if(this.mShapeConfig.hasShapeProperty("maxExceedCapacity")){a=this._configFirst("maxExceedCapacity",d);}return m*a/100;};return U;},true);
