/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/gantt/library","sap/ui/base/EventProvider"],function(l,E){"use strict";var S=l.SelectionMode;var a=E.extend("sap.gantt.simple.SelectionModel",{constructor:function(s){E.apply(this,arguments);this.sSelectionMode=s||S.Single;this.mSelected={"uid":{}};}});a.prototype.getSelectionMode=function(){return this.sSelectionMode;};a.prototype.setSelectionMode=function(s){this.sSelectionMode=s||S.Single;return this;};a.prototype.update=function(u,p){var s=this.getSelectionMode();if(s==="None"){return;}if(u==null){if(s===S.Single||s===S.Multiple||s===S.MultiWithKeyboard&&!p.ctrl){this.clear(true);}return;}if(p.selected&&!this.mSelected.uid[u]){var d=Object.keys(this.mSelected.uid);if(this.sSelectionMode===S.Single){this.mSelected.uid={};}else if(this.sSelectionMode===S.MultiWithKeyboard){if(p.ctrl){d=[];}else{this.mSelected.uid={};}}else if(this.sSelectionMode===S.Multiple){d=[];}this._updateSelectedShape(u,p);this._fireSelectionChanged(d);}else if(!p.selected&&this.mSelected.uid[u]){delete this.mSelected.uid[u];this._fireSelectionChanged([u]);}};a.prototype.updateTime=function(u,p){if(this.mSelected.uid[u]){this.mSelected.uid[u].time=p.time;this.mSelected.uid[u].endTime=p.endTime;}};a.prototype._updateSelectedShape=function(u,p){this.mSelected.uid[u]={shapeUid:u,draggable:p.draggable,time:p.time,endTime:p.endTime};};a.prototype._fireSelectionChanged=function(d,s){var p={shapeUid:Object.keys(this.mSelected.uid),deselectedUid:d,silent:!!s};if(p.shapeUid.length>0||p.deselectedUid.length>0){this.fireSelectionChanged(p);}};a.prototype.existed=function(u){return!!this.mSelected.uid[u];};a.prototype.clear=function(f){var u=this.allUid();this.mSelected.uid={};this._fireSelectionChanged(u,f);};a.prototype.allUid=function(){return Object.keys(this.mSelected.uid);};a.prototype.numberOfSelectedDraggableShapes=function(){var d=this.allSelectedDraggableUid();return d.length;};a.prototype.allSelectedDraggableUid=function(){var t=this;var d=Object.keys(this.mSelected.uid).filter(function(u){return t.mSelected.uid[u].draggable;});return d;};a.prototype.getSelectedShapeDataByUid=function(u){return this.mSelected.uid[u];};a.prototype.attachSelectionChanged=function(d,f,L){this.attachEvent("selectionChanged",d,f,L);};a.prototype.detachSelectionChanged=function(f,L){this.detachEvent("selectionChanged",f,L);};a.prototype.fireSelectionChanged=function(A){this.fireEvent("selectionChanged",A);return this;};return a;},true);
