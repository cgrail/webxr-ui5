/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/base/util/ObjectPath","sap/gantt/misc/Utility","./BasePath","sap/ui/core/Core"],function(O,U,B,C){"use strict";var D={};var _=10;var d=function(){var i=32;var s=U.findSapUiSizeClass();return U.scaleBySapUiSize(s,i);};D.render=function(r,o){r.write("<div");r.writeControlData(o);r.write(">");var a=o.getColumnConfigs();var R=o.getRowConfigs();var y=[];for(var i=0;i<R.length;i++){var Y=R[i];var m={};m.text=Y.getText();var s=Y.getShapeClass();var S=Y.getShapeName();var b=Y.getStroke();var f=Y.getStrokeWidth();var c=O.get(s);var e=[];for(var l=0;l<a.length;l++){var F=a[l].getFill();if(F==null){var g=a[l].getFillFactory();if(typeof g==='function'){F=g(S);}}var h=new c({stroke:b,strokeWidth:f,fill:F});e.push(h);}m.shapeInstances=e;y.push(m);}this.renderYDimension(r,y);var x=[];for(var j=0;j<a.length;j++){var k={};k.text=a[j].getText();x.push(k);}this.renderXDimension(r,x);r.write("</div>");};D.renderYDimension=function(r,y){for(var k=0;k<y.length;k++){this.renderYItems(r,y[k],k);}};D.renderYItems=function(r,i,I){var l=d(),L=l+"px";var h=l/2,w=h;r.write("<div");r.writeAttributeEscaped("title",i.text);r.addClass("sapGanttDLItem");r.writeClasses();r.addStyle("height",L);r.addStyle("line-height",L);r.addStyle(this._getMarginStyle(),(w/2)+"px");r.writeStyles();r.write(">");this.renderYSvgPart(r,i.shapeInstances,w,h);this.renderYLegendText(r,i.text);r.write("</div>");};D._getMarginStyle=function(){var r=C.getConfiguration().getRTL();return"margin-"+(r?"right":"left");};D.normalizeShape=function(s,w,h,i){var H=h/2;var v={x:i*(w+_)+_/2,y:0,x1:0,y1:H,x2:w,y2:H,width:w,height:h,yBias:H,rowYCenter:H};Object.keys(v).forEach(function(p){var P=p.split("-").reduce(function(a,n){return a+n.charAt(0).toUpperCase()+n.slice(1);},"set");if(s[P]){s[P](v[p]);}});};D.renderYSvgPart=function(r,s,w,h){r.write("<svg");r.writeAttributeEscaped("tabindex",-1);r.writeAttributeEscaped("focusable",false);r.addClass("sapGanttDLSvg");r.writeClasses();r.addStyle("width",(w+_)*s.length+"px");r.writeStyles();r.write(">");for(var i=0;i<s.length;i++){this.normalizeShape(s[i],w,h,i);s[i].renderElement(r,s[i]);}r.write("</svg>");};D.renderYLegendText=function(r,t){r.write("<div");r.addClass("sapGanttDLItemTxt");r.writeClasses();r.write(">");if(t){r.writeEscaped(t);}r.write("</div>");};D.renderXDimension=function(r,x){var l=x.length;var L=d(),s=L+"px";var h=L/2,w=h;r.write("<div");r.addClass("sapGanttDLItem");r.writeClasses();r.addStyle("height",s*l);r.addStyle("line-height",s);r.addStyle(this._getMarginStyle(),(w/2)+"px");r.writeStyles();r.write(">");this.renderXDimensionPath(r,x);this.renderXDimensionText(r,x);r.write("</div>");};D.renderXDimensionPath=function(r,R){var l=R.length;var L=d();var h=L/2,w=h;r.write("<div");r.addStyle("height",L*l+"px");var s=(L/2+_)*l;r.addStyle("width",s+"px");r.addStyle("display","block");r.writeStyles();r.write(">");r.write("<svg");r.writeAttributeEscaped("tabindex",-1);r.writeAttributeEscaped("focusable",false);r.writeAttribute("width",s+"px");r.addClass("sapGanttDLSvg");r.writeClasses();r.write(">");var b=C.getConfiguration().getRTL();for(var i=0;i<l;i++){var S=i*(w+_)+_/2+w/2;var a="M"+S+" 0";if(b){a+=" v"+((i+0.5)*L);a+=" h"+(-S);}else{a+=" v"+((l-i-0.5)*L);a+=" h"+((L/2+_)*l-S);}var o=new B({d:a,fill:"transparent",strokeWidth:2.5}).addStyleClass("sapGanttDimensionLegendPath");o.renderElement(r,o);}r.write("</svg>");r.write("</div>");};D.renderXDimensionText=function(r,R){var l=R.length;var L=d();r.write("<div");r.addClass("sapGanttDLItemTxt");r.writeClasses();r.addStyle("height",L*l+"px");r.addStyle("width","100%");r.writeStyles();r.write(">");for(var i=l-1;i>=0;i--){r.write("<div");var s=R[i].text;if(s){r.writeAttribute("title",s);}r.addClass("sapGanttDLItemTxt");r.writeClasses();r.addStyle("font-style","italic");r.addStyle("height",L+"px");r.writeStyles();r.write(">");if(s){r.writeEscaped(R[i].text);}r.write("</div>");}r.write("</div>");};return D;},true);
