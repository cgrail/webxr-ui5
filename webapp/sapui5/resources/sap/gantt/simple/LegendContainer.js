/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/core/Control","sap/ui/core/Core","sap/m/NavContainer","sap/m/Page","sap/m/List","sap/m/StandardListItem","../control/AssociateContainer"],function(C,a,N,P,L,S,A){"use strict";var b=C.extend("sap.gantt.simple.LegendContainer",{metadata:{properties:{width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"200px"},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"200px"}},defaultAggregation:"legends",aggregations:{legends:{type:"sap.ui.core.Control",multiple:true,visibility:"public",singularName:"legend"}}}});b.prototype.init=function(){this.initNavContainer();this._sCurrentPageTitle=null;this.oRb=a.getLibraryResourceBundle("sap.gantt");};b.prototype.initNavContainer=function(){if(this._oNavContainer){return;}this._oNavContainer=new N({autoFocus:false,afterNavigate:function(e){this._sCurrentPageTitle=e.getParameter("to").getTitle();}.bind(this)});};b.prototype.onBeforeRendering=function(e){this.initNavContainer();this._updateNavContainerSize();if(this._bInited){return;}this._addInitialPageIfNecessary();this._addLegendsToNavContainer();this._bInited=true;};b.prototype._updateNavContainerSize=function(){this._oNavContainer.setWidth(this.getWidth());this._oNavContainer.setHeight(this.getHeight());};b.prototype._addLegendsToNavContainer=function(){this.getLegends().forEach(function(l,_,c){var p=new P({title:l.getTitle(),backgroundDesign:sap.m.PageBackgroundDesign.Solid,enableScrolling:true,showNavButton:c.length>1,content:new A({content:l}),navButtonPress:function(e){this.getParent().backToTop();}});this._oNavContainer.addPage(p);}.bind(this));};b.prototype._addInitialPageIfNecessary=function(){var l=this.getLegends();if(l.length>1){var n=l.map(function(o){return new S({title:o.getTitle(),type:sap.m.ListType.Navigation,press:this._onInitialPageItemPress.bind(this)});}.bind(this));var i=new P({title:this.oRb.getText("LEGEND_TITLE"),content:[new L({items:n})]});this._oNavContainer.addPage(i);this._oNavContainer.setInitialPage(i);}};b.prototype._onInitialPageItemPress=function(e){var p=e.getSource().getTitle();this._navToByPageTitle(p);};b.prototype._navToByPageTitle=function(p){if(!p){return;}this._oNavContainer.setAutoFocus(true);var c=this._oNavContainer.getPages();for(var i=0;i<c.length;i++){if(p==c[i].getTitle()){this._oNavContainer.to(c[i]);break;}}};return b;},true);
