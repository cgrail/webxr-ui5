/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/core/Core","sap/ui/Device","./RenderUtils","../misc/Utility"],function(E,C,D,R,U){"use strict";var G=E.extend("sap.gantt.simple.GanttHeader");G.prototype.renderElement=function(){var r=C.createRenderManager();var g=this.getParent();var s=g.getId();var h=jQuery("div.sapGanttChartWithTableHeader[data-sap-ui-related="+s+"]");var H=h.height();var i=R.getGanttRenderWidth(g);var n=H/2,a=H/5*2,b=H/5*4;var A=g.getAxisTimeStrategy(),t=A.getTimeLineOption(),o=g.getAxisTime();var l=o.getTickTimeIntervalLabel(t,null,[0,i]);r.write("<svg id='"+s+"-header-svg' class='sapGanttChartHeaderSvg' height='"+H+"px' width='"+i+"'>");r.write("<g>");this.renderHeaderLabel(r,l[0],{y:a,className:"sapGanttTimeHeaderSvgText0",fontSize:14});this.renderHeaderLabel(r,l[1],{y:b,className:"sapGanttTimeHeaderSvgText1",fontSize:14});this.renderIntervalLine(r,l[0],{start:0,end:n,className:"sapGanttTimeHeaderLargeIntervalSvgPath"});this.renderIntervalLine(r,l[1],{start:b,end:H,className:"sapGanttTimeHeaderSvgPath"});r.write("</g>");var N=o.getNowLabel()[0].value;this.renderNowLineHeader(r,g,{headerHeight:H,nowLineX:N});r.write("</svg>");r.flush(h.get(0));r.destroy();};G.prototype.renderHeaderLabel=function(r,l,a){var b=C.getConfiguration().getRTL();var i=(D.browser.msie||D.browser.edge)&&b;l.forEach(function(d){r.write("<text");r.addClass(a.className);r.writeClasses();r.writeAttribute("text-anchor","start");r.writeAttribute("x",d.value+(b?-5:5));r.writeAttribute("y",a.y);if(i){var o=U.calculateStringLength(d.label)*(a.fontSize/2);r.writeAttribute("transform","translate("+(-o)+")");}r.write(">");r.write(d.label);if(a.className==="sapGanttTimeHeaderSvgText1"&&d.largeLabel){r.write("<title>");r.write(d.largeLabel);r.write("</title>");}r.write("</text>");});};G.prototype.renderIntervalLine=function(r,l,a){var p="";for(var i=0;i<l.length;i++){var L=l[i];if(L){p+=" M"+" "+(L.value-1/2)+" "+a.start+" L"+" "+(L.value-1/2)+" "+a.end;}}r.write("<path");r.writeAttribute("d",p);r.addClass(a.className);r.writeClasses();r.write(">");r.write("</path>");};G.prototype.renderNowLineHeader=function(r,g,a){var h=a.headerHeight,n=a.nowLineX;if(g.getEnableNowLine()===false||isNaN(n)){return;}var l=8;var b=l/2,t=Math.sqrt(l*l-b*b);var p=[[n,h],[n-b,h-t],[n+b,h-t],[n,h]].reduce(function(I,c,i){var P=c.join(",");return i===0?"M"+P:(I+"L"+P);},"");r.write("<g class='sapGanttNowLineHeaderSvgPath'>");r.write("<path");r.writeAttribute("d",p);r.write("/>");r.write("</g>");};return G;},true);
