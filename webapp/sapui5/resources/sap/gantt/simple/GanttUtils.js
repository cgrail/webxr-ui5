/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/Core","sap/gantt/misc/Utility","sap/ui/core/format/DateFormat","sap/ui/core/Locale"],function(q,C,U,D,L){"use strict";var G={SHAPE_ID_DATASET_KEY:"data-sap-gantt-shape-id",ROW_ID_DATASET_KEY:"data-sap-gantt-row-id",CONNECTABLE_DATASET_KEY:"data-sap-gantt-connectable",SELECT_FOR_DATASET_KEY:"sap-gantt-select-for",SHAPE_CONNECT_FOR_DATASET_KEY:"sap-gantt-shape-connect-for",SHAPE_CONNECT_INDICATOR_WIDTH:10,shapeElementById:function(s,g){var o=q.sap.domById(g),S=o.querySelector("g.sapGanttChartShapes");var n=S.querySelectorAll("["+G.SHAPE_ID_DATASET_KEY+"='"+s+"']");var e=n[0];if(e){return q(e).control(0);}return null;},getValueX:function(s){var n;var p=s.getMetadata().getProperty("x");if(p){n=s.getProperty(p.name);if(n!==null&&n!==undefined){return n;}}var r=C.getConfiguration().getRTL(),t=r?(s.getEndTime()||s.getTime()):s.getTime();if(t){n=s.getXByTime(t);}if(!q.isNumeric(n)){q.sap.log.warning("couldn't convert timestamp to x with value: "+t);}return n;},getRowInstance:function(e,t){var r=q(e.target).closest("rect.sapGanttBackgroundSVGRow").data("sapUiIndex");if(r!=null){return t.getRows()[r];}},getSelectedTableRowSettings:function(t,s){var a=t.getRows(),f=t.getFirstVisibleRow();if(a.length===0){return null;}var F=a[0].getIndex();var i=s-f;if(F!==f){i+=Math.abs(F-f);}var r=a[i];return r.getAggregation("_settings");},updateGanttRows:function(d,r,i){var g=d.getParent().getParent();var $=q.sap.byId(g.getId()+"-svg"),a=$.find("rect.sapGanttBackgroundSVGRow");a.eq(i).toggleClass("sapGanttBackgroundSVGRowSelected",r[i].selected);a.eq(i).toggleClass("sapGanttBackgroundSVGRowHovered",r[i].hovered);},getShapesWithUid:function(c,s){var e=function(S){var p=U.parseUid(S),a=p.shapeId;var b=["[id='",c,"']"," ["+G.SHAPE_ID_DATASET_KEY+"='",a,"']"].join("");return q(b).control().filter(function(o){return o.getShapeUid()===S;})[0];};var E=s.map(e);return E;},getTimeFormaterBySmallInterval:function(g){var a=g.getAxisTimeStrategy(),s=a.getTimeLineOption().smallInterval,u=s.unit;var c=a.getCalendarType(),o=a.getLocale()?a.getLocale():new L(C.getConfiguration().getLanguage().toLowerCase());var f="yyyyMMMddhhms";if(!(u===sap.gantt.config.TimeUnit.minute||u===sap.gantt.config.TimeUnit.hour)){f="yyyyMMMdd";}var F=D.getDateTimeInstance({format:f,style:s.style,calendarType:c},s.locale?new L(s.locale):o);return F;}};return G;},true);
