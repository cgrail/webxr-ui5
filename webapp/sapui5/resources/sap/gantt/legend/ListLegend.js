/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.gantt.legend=sap.gantt.legend||{};sap.gantt.legend.ListLegendItemCheckbox={NoShow:"noShow",Checked:"checked",Unchecked:"unchecked"};sap.ui.define(["./LegendBase","sap/m/CheckBox","sap/gantt/drawer/Legend"],function(L,C,a){"use strict";var b=L.extend("sap.gantt.legend.ListLegend",{metadata:{properties:{shapes:{type:"sap.gantt.config.Shape[]"}},events:{checkBoxChange:{parameters:{legendType:{type:"string"},value:{type:"boolean"}}}}}});b.prototype.init=function(){L.prototype.init.apply(this,arguments);this._oListLegendDrawer=new a();this._aCheckBoxes=[];};b.prototype.onAfterRendering=function(){for(var i=0;i<this._aShapeInstance.length;i++){var s=this._aShapeInstance[i];var S=d3.select("#"+this.getId()+"-svg-"+i);var c=S.selectAll("."+s.getId()).data([i]);this._oListLegendDrawer._drawPerTag(c,s);}};b.prototype.setShapes=function(s){this.setProperty("shapes",s);if(s&&s.length>0){this._aShapeInstance=this._instantShape(s);this._aCheckBoxes=[];var h=false;for(var i=0;i<this._aShapeInstance.length;i++){var S=this._aShapeInstance[i].mShapeConfig.getSwitchOfCheckBox();if(S==sap.gantt.legend.ListLegendItemCheckbox.Checked||S==sap.gantt.legend.ListLegendItemCheckbox.Unchecked){h=true;break;}}if(h){for(var j=0;j<this._aShapeInstance.length;j++){var o=this._aShapeInstance[j];var c=o.mShapeConfig.getSwitchOfCheckBox();var d=new C({selected:(c==sap.gantt.legend.ListLegendItemCheckbox.Checked)?true:false,enabled:(c==sap.gantt.legend.ListLegendItemCheckbox.NoShow)?false:true}).data("key",(o.mShapeConfig.getKey&&o.mShapeConfig.getKey())?o.mShapeConfig.getKey():o.getLegend()).setTooltip(o.getLegend()).attachSelect(this._onCheckBoxChange,this);this._aCheckBoxes.push(d);}}}return this;};b.prototype._onCheckBoxChange=function(e){var s=e.getSource();this.fireCheckBoxChange({legendType:s.data("key"),value:e.getParameter("selected")});};return b;},true);
