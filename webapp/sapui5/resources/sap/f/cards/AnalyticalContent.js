/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/f/cards/BaseContent","sap/viz/ui5/controls/VizFrame","sap/viz/ui5/controls/common/feeds/FeedItem","sap/viz/ui5/data/FlattenedDataset","sap/base/Log"],function(B,V,F,a,L){"use strict";var b={"Top":"top","Bottom":"bottom","Left":"left","Right":"right"};var c={"TopLeft":"topLeft","Center":"center"};var T={"Left":"left","Center":"center","Right":"right"};var C={"Line":"line","StackedColumn":"stacked_column","StackedBar":"stacked_bar","Donut":"donut"};var A=B.extend("sap.f.cards.AnalyticalContent",{renderer:{}});A.prototype._getVizPropertiesObject=function(o){var t=o.title,l=o.legend,p=o.plotArea;if(!o){return this;}var v={"title":{"style":{"fontWeight":"normal"},"layout":{"respectPlotPosition":false}},"legend":{},"legendGroup":{"layout":{}},"plotArea":{"window":{"start":"firstDataPoint","end":"lastDataPoint"}},"categoryAxis":{"title":{}},"valueAxis":{"title":{}}};if(t){v.title.text=t.text;v.title.visible=t.visible;v.title.alignment=T[t.alignment];}if(l){v.legend.visible=l.visible;v.legendGroup.layout.position=b[l.position];v.legendGroup.layout.alignment=c[l.alignment];}if(p){if(p.dataLabel){v.plotArea.dataLabel=p.dataLabel;}if(p.categoryAxisText){v.categoryAxis.title.visible=p.categoryAxisText.visible;}if(p.valueAxisText){v.valueAxis.title.visible=p.valueAxisText.visible;}}return v;};A.prototype._updateModel=function(){this._createChart();B.prototype._updateModel.apply(this,arguments);};A.prototype._createChart=function(){var o=this.getConfiguration();if(!o.chartType){L.error("ChartType is a mandatory property");return;}var d=[];if(o.dimensions){var D=[];for(var i=0;i<o.dimensions.length;i++){var e=o.dimensions[i];var n=e.value.substring(1,e.value.length-1);d.push(n);var f={name:n,value:e.value};D.push(f);}}var m=[];if(o.measures){var M=[];for(var i=0;i<o.measures.length;i++){var g=o.measures[i];var n=g.value.substring(1,g.value.length-1);m.push(n);var h={name:n,value:g.value};M.push(h);}}var j=new a({measures:M,dimensions:D,data:{path:this.getBindingContext().getPath()}});var k=new V({uiConfig:{applicationSet:'fiori'},height:"100%",width:"100%",vizType:C[o.chartType],dataset:j,legendVisible:o.legend,feeds:[new F({uid:o.measureAxis,type:'Measure',values:m}),new F({uid:o.dimensionAxis,type:'Dimension',values:d})]});var v=this._getVizPropertiesObject(o);k.setVizProperties(v);this.setAggregation("_content",k);};A.prototype.onBeforeRendering=function(){if(this._handleHostConfiguration){this._handleHostConfiguration();}};return A;});
