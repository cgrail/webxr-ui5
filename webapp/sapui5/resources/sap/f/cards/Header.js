/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/f/library","sap/ui/core/Control","sap/m/Text","sap/f/Avatar","sap/ui/Device",'sap/f/cards/Data','sap/ui/model/json/JSONModel',"sap/f/cards/HeaderRenderer","sap/f/cards/ActionEnablement"],function(l,C,T,A,D,a,J,H,b){"use strict";var c=l.AvatarShape;var d=C.extend("sap.f.cards.Header",{metadata:{interfaces:["sap.f.cards.IHeader"],properties:{title:{type:"string",defaultValue:""},subtitle:{type:"string",defaultValue:""},statusText:{type:"string",defaultValue:""},iconDisplayShape:{type:"sap.f.AvatarShape",defaultValue:c.Circle},iconSrc:{type:"sap.ui.core.URI",defaultValue:""},iconInitials:{type:"string",defaultValue:""}},aggregations:{_title:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_subtitle:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_avatar:{type:"sap.f.Avatar",multiple:false,visibility:"hidden"}},events:{press:{}}},constructor:function(i,s){if(typeof i!=="string"){s=i;}if(s&&s.serviceManager){this._oServiceManager=s.serviceManager;delete s.serviceManager;}C.apply(this,arguments);}});d.prototype._getTitle=function(){var t=this.getAggregation("_title");if(!t){t=new T({maxLines:3}).addStyleClass("sapFCardTitle");this.setAggregation("_title",t);}return t;};d.prototype._getSubtitle=function(){var s=this.getAggregation("_subtitle");if(!s){s=new T({maxLines:2}).addStyleClass("sapFCardSubtitle");this.setAggregation("_subtitle",s);}return s;};d.prototype._getAvatar=function(){var o=this.getAggregation("_avatar");if(!o){o=new A().addStyleClass("sapFCardIcon");this.setAggregation("_avatar",o);}return o;};d.prototype.onBeforeRendering=function(){this._getTitle().setText(this.getTitle());this._getSubtitle().setText(this.getSubtitle());this._getAvatar().setDisplayShape(this.getIconDisplayShape());this._getAvatar().setSrc(this.getIconSrc());this._getAvatar().setInitials(this.getIconInitials());};d.prototype._getHeaderAccessibility=function(){var t=this._getTitle()?this._getTitle().getId():"",s=this._getSubtitle()?this._getSubtitle().getId():"",e=this._getAvatar()?this._getAvatar().getId():"";return t+" "+s+" "+e;};d.prototype.onAfterRendering=function(){if(D.browser.msie){if(this.getTitle()){this._getTitle().clampText();}if(this.getSubtitle()){this._getSubtitle().clampText();}}};d.prototype.ontap=function(){this.firePress();};d.create=function(m,s){var S={title:m.title,subtitle:m.subTitle};if(m.icon){S.iconSrc=m.icon.src;S.iconDisplayShape=m.icon.shape;S.iconInitials=m.icon.text;}if(m.status){S.statusText=m.status.text;}if(s){S.serviceManager=s;}var h=new d(S);return h;};d._handleData=function(h,o){var m=new J();var r=o.request;if(o.json&&!r){m.setData(o.json);}if(r){a.fetch(r).then(function(e){m.setData(e);m.refresh();h.fireEvent("_updated");}).catch(function(e){});}h.setModel(m).bindElement({path:o.path||"/"});};b.enrich(d);return d;});
