/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["jquery.sap.global","sap/suite/ui/generic/template/changeHandler/util/ChangeHandlerUtils","sap/suite/ui/generic/template/changeHandler/util/AnnotationChangeUtilsV2","sap/ui/fl/changeHandler/UnhideControl"],function(q,U,A,a){"use strict";var R={};var L="com.sap.vocabularies.UI.v1.LineItem";var D="com.sap.vocabularies.UI.v1.DataFieldForAction";var b="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation";var I="com.sap.vocabularies.UI.v1.Importance";var c="com.sap.vocabularies.UI.v1.ImportanceType/High";R.applyChange=function(C,o,p){var e=p.modifier.byId(C.getContent().customChanges[0].revealedElementId);a.applyChange(C,e,p);};R.completeChangeContent=function(C,s,p){var e=s.revealedElementId;var m=U.getMetaModel(s,p);var B=p.modifier.bySelector(e,p.appComponent);var d=B.getParent().getAggregation("content");var o=U.getComponent(B);var E=U.getODataEntitySet(o).entityType;var f=m.getODataEntityType(E);var l=f[L];var g=l.slice();var h=-1;d.some(function(u,i){if(u.getId()&&u.getId()===e){h=i;return true;}});var j=U.getCustomDataObject(B);if(j){var k=-1;if(j.Type===D||j.Type===b){if(h+1<d.length){h++;k=U.getLineItemRecordIndexForButton(d[h],l);}else{k=l.length;}}if((j.Type===D||j.Type===b)&&k<0){k=0;}}a.completeChangeContent(C,s,p);var n={};if(k>=0){var r={Label:{String:j.Label},Action:{String:j.Action},RecordType:j.Type};r[I]={EnumMember:c};l.splice(k,0,r);n=A.createCustomAnnotationTermChange(E,l,g,L);}n.revealedElementId=e;var t=A.createCustomChanges(n);q.extend(true,C.getContent(),t);U.isReveal=true;};return R;},true);
