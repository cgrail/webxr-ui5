sap.ui.define(["sap/suite/ui/generic/template/changeHandler/util/ChangeHandlerUtils","sap/suite/ui/generic/template/changeHandler/util/AnnotationChangeUtilsV2","./library.designtime"],function(U,A){"use strict";var r=sap.ui.getCore().getModel("i18nDesigntime").getResourceBundle();var D="com.sap.vocabularies.UI.v1.DataFieldForAnnotation";var a="com.sap.vocabularies.UI.v1.DataField";var b="com.sap.vocabularies.UI.v1.DataFieldWithUrl";var I="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation";var c="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath";var F="com.sap.vocabularies.UI.v1.FieldGroup";var G="Datafield";var d="Contact";var e="DataFieldWithIntentBasedNavigation";var f="DatafieldWithUrl";var g="DataFieldWithNavigationPath";var o={getGroupElementRecord:function(E){var t=U.getTemplatingInfo(E);if(t&&t.annotationContext){return t.annotationContext;}},createNewRecord:function(R,O){var p,h={Criticality:{},CriticalityRepresentation:{},IconUrl:{}},i={};i[a]=jQuery.extend({},h,{Label:{},Value:{}});i[b]=jQuery.extend({},h,{Label:{},Value:{},Url:{}});i[D]=jQuery.extend({},h,{Label:{String:"Contact"},Target:{AnnotationPath:"Contact_Target"}});i[I]=jQuery.extend({},h,{Label:{},SemanticObject:{String:"Semantic_Object"},Action:{},Value:{}});i[c]=jQuery.extend({},h,{Label:{},Value:{},Target:{}});var n={"com.sap.vocabularies.UI.v1.Importance":{"EnumMember":"com.sap.vocabularies.UI.v1.ImportanceType/High"},"RecordType":R,"EdmType":"Edm.String"};jQuery.extend(true,n,i[R]);for(p in n){if(p!=="RecordType"&&O[p]){jQuery.extend(n[p],O[p]);}if(jQuery.isEmptyObject(n[p])){delete n[p];}}return n;},getGroupElementTypeValues:function(){var v={Datafield:{displayName:"Data Field"},DatafieldWithUrl:{displayName:"Data Field with URL"},Contact:{displayName:"Contact"},DataFieldWithIntentBasedNavigation:{displayName:"Intent Based Navigation"},DataFieldWithNavigationPath:{displayName:"DataField with Navigation Path"}};return v;},getGroupElementType:function(E){var R=o.getGroupElementRecord(E);var s;if(R){switch(R.RecordType){case D:var h=R.Target.AnnotationPath;if(h){if(R.Target.AnnotationPath.indexOf("com.sap.vocabularies.Communication.v1.Contact")>=0||R.Target.AnnotationPath.indexOf("Contact_Target")>=0){s=d;}}break;case I:s=e;break;case a:s=G;break;case b:s=f;break;case c:s=g;break;default:break;}}return s;},setGroupElementType:function(h,n){var O=o.getGroupElementType(h);if(O===n){return;}var R="";var m={};var E={};var i=[];var j=[];var s="";var k=[];var l=-1;var C={};var p=[];var t={};switch(n){case G:R=a;break;case f:R=b;break;case e:R=I;break;case d:R=D;break;case g:R=c;break;default:break;}if(!R){return;}var M=h.getModel();m=M&&M.getMetaModel();t=U.getTemplatingInfo(h);E=m.getODataEntityType(t.target);s=t.annotation;i=E[s];j=JSON.parse(JSON.stringify(i));k=(s.indexOf(F)>=0)?i.Data:i;l=U.getIndexFromInstanceMetadataPath(h);if(l===-1){throw"invalid index for old group element";}var q=o.getGroupElementRecord(h);var N=o.createNewRecord(R,q);switch(n){case d:N.Target.AnnotationPath=N.Target.AnnotationPath+"_"+parseInt(l,10);break;case e:N.SemanticObject.String=N.SemanticObject.String+"_"+parseInt(l,10);break;default:break;}k.splice(l,1,N);C=A.createCustomAnnotationTermChange(t.target,i,j,s);p.push(C);return p;},getDesigntime:function(E){return{getCommonInstanceData:function(E){var t=U.getTemplatingInfo(E);if(t&&t.path){var T=t.target+'/'+t.path.substr(t.path.indexOf(t.annotation));return{target:T,annotation:t.annotation,qualifier:null};}},name:{singular:function(){return r.getText("FE_GROUP_ELEMENT");},plural:function(){return r.getText("FE_GROUP_ELEMENTS");}},properties:{groupElementType:{name:r.getText("FE_GROUP_ELEMENT_TYPE"),virtual:true,ignore:false,type:"EnumType",group:"header",possibleValues:o.getGroupElementTypeValues(E),get:o.getGroupElementType.bind(E),set:o.setGroupElementType.bind(E)}},actions:{remove:{changeType:"removeGroupElement",changeOnRelevantContainer:true},rename:null},annotations:{dataField:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataField",ignore:function(){var R=this.getGroupElementRecord(E);if(R&&R.RecordType){return R.RecordType!==a;}}.bind(this),whiteList:{properties:["Criticality","CriticalityRepresentation","Label","Value"]},defaultValue:null,appliesTo:["GroupElement"],links:{developer:[{href:"/api/sap.ui.comp.smartform.GroupElement",text:function(){return r.getText("FE_GROUP_ELEMENT");}}]}},dataFieldWithUrl:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataFieldWithUrl",ignore:function(){var R=this.getGroupElementRecord(E);if(R&&R.RecordType){return R.RecordType!==b;}}.bind(this),defaultValue:null,appliesTo:["GroupElement"],links:{developer:[{href:"/api/sap.ui.comp.smartform.GroupElement",text:function(){return r.getText("FE_GROUP_ELEMENT");}},{href:"/topic/1d4a0f94bfee48d1b50ca8084a76beec.html",text:function(){return r.getText("FE_SDK_GUIDE_EXT_NAVI");}}]}},dataFieldForAnnotation:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataFieldForAnnotation",ignore:function(){var R=this.getGroupElementRecord(E);if(R&&R.RecordType){return R.RecordType!==D;}}.bind(this),defaultValue:null,appliesTo:["GroupElement"],links:{developer:[{href:"/api/sap.ui.comp.smartform.GroupElement",text:function(){return r.getText("FE_GROUP_ELEMENT");}},{href:"/topic/a6a8c0c4849b483eb10e87f6fdf9383c",text:function(){return r.getText("FE_SDK_GUIDE_CONTACT_FACET");}}]},refersTo:[{annotation:"contact",nullable:false,referredBy:"Target"}]},dataFieldWithIntentBasedNavigation:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataFieldWithIntentBasedNavigation",ignore:function(){var R=this.getGroupElementRecord(E);if(R&&R.RecordType){return R.RecordType!==I;}}.bind(this),whiteList:{properties:["SemanticObject","Action","Label","Value"]},defaultValue:null,appliesTo:["GroupElement"],links:{developer:[{href:"/api/sap.ui.comp.smartform.GroupElement",text:function(){return r.getText("FE_GROUP_ELEMENT");}},{href:"/topic/1d4a0f94bfee48d1b50ca8084a76beec.html",text:function(){return r.getText("FE_SDK_GUIDE_EXT_NAVI");}}]}},dataFieldWithNavigationPath:{namespace:"com.sap.vocabularies.UI.v1",annotation:"DataFieldWithNavigationPath",ignore:function(){var R=this.getGroupElementRecord(E);if(R&&R.RecordType){return R.RecordType!==c;}}.bind(this),whiteList:{properties:["Label","Value","Target"]},defaultValue:null,appliesTo:["GroupElement"],links:{developer:[{href:"/api/sap.ui.comp.smartform.GroupElement",text:function(){return r.getText("FE_GROUP_ELEMENT");}},{href:"/topic/2c65f07f44094012a511d6bd83f50f2d",text:function(){return r.getText("FE_SDK_GUIDE_INT_NAVI");}}]}},contact:{namespace:"com.sap.vocabularies.Communication.v1",annotation:"Contact",ignore:function(){var R=this.getGroupElementRecord(E);if(R&&R.RecordType){return R.RecordType!==D;}}.bind(this),target:["EntityType"],whiteList:{properties:["fn","n","tel","email","photo","title","org","role"],expressionTypes:{fn:["Path"],photo:["Path"],title:["Path"],org:["Path"],role:["Path"]}},appliesTo:["GroupElement"]},importance:{namespace:"com.sap.vocabularies.UI.v1",annotation:"Importance",defaultValue:null,target:["Record"],appliesTo:["GroupElement"],links:{developer:[{href:"/topic/69efbe747fc44c0fa445b24ed369cb1e",text:function(){return r.getText("FE_SDK_GUIDE_RESPONSIVENESS");}}]}}}};}};return o;});
