/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery",'./library','sap/ui/ux3/library','sap/ui/commons/library','./VerticalNavigationBar','sap/ui/ux3/ThingViewer','sap/ui/commons/Button','sap/suite/ui/commons/ThreePanelThingViewerRenderer',"sap/ui/events/ControlEvents","sap/ui/dom/containsOrEquals"],function(q,l,U,C,V,T,B,a,b,c){"use strict";var d=T.extend("sap.suite.ui.commons.ThreePanelThingViewer",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{logo:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:null},sidebarWidth:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:'244px'}},aggregations:{menuContent:{type:"sap.ui.commons.Link",multiple:true,singularName:"menuContent"}}}});d.prototype.init=function(){this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._oNavBar=new V();this.setAggregation("navBar",this._oNavBar);this._oNavBar.attachSelect(function(o){var i=o.getParameters().item;if(this.fireFacetSelected({id:i.getId(),key:i.getKey(),item:i})){this.setSelectedFacet(i);}else{o.preventDefault();}},this);this._iSelectedMenuItem=0;this._oMenuButton=new B({id:this.getId()+"-menu-button",tooltip:this._rb.getText("THREEPANELTHINGVIEWER_BUTTON_MENU_TOOLTIP"),lite:true,press:[this._toggleMenuPopup,this]});this._oMenuButton.addStyleClass("sapSuiteTvTitleMb");this.fAnyEventHandlerProxy=q.proxy(this.onAnyEvent,this);};d.prototype.exit=function(){this._oMenuButton.destroy();b.unbindAnyEvent(this.fAnyEventHandlerProxy);};d.prototype.onAfterRendering=function(){this._bMenuOpened=false;this._updateMenuPopup();this._toggleHeaderContent();};d.prototype.selectDefaultFacet=function(){this._selectDefault();return this;};d.prototype._toggleMenuPopup=function(){q(document.getElementById(this.getId()+"-menu-popup")).toggle();this._bMenuOpened=!this._bMenuOpened;if(this._bMenuOpened){b.bindAnyEvent(this.fAnyEventHandlerProxy);this.getMenuContent()[0].focus();this._iSelectedMenuItem=0;}else{b.unbindAnyEvent(this.fAnyEventHandlerProxy);}};d.prototype._updateMenuPopup=function(){var h=q(document.getElementById(this.getId()+"-header")).width();var m=q(document.getElementById(this.getId()+"-menu-popup"));var s=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";var S=this.getMenuContent().length;m.css(s,(h-22)+"px");m.children().each(function(i){var $=q(this);$.attr("tabindex","-1");$.attr("role","menuitem");$.attr("aria-posinset",i+1);$.attr("aria-setsize",S);});};d.prototype._rerenderFacetContent=function(){var $=q(document.getElementById(this.getId()+"-facetContent"));if($.length>0){var r=sap.ui.getCore().createRenderManager();a.renderFacetContent(r,this);r.flush($[0]);r.destroy();this._resize=false;this._setTriggerValue();this._onresize();}};d.prototype._rerenderHeader=function(){var $=q(document.getElementById(this.getId()+"-header"));if($.length>0){var r=sap.ui.getCore().createRenderManager();a.renderHeader(r,this);r.flush($[0]);r.destroy();}};d.prototype._rerenderHeaderContent=function(){var $=q(document.getElementById(this.getId()+"-headerContent"));if($.length>0){var r=sap.ui.getCore().createRenderManager();a.renderHeaderContent(r,this);r.flush($[0]);r.destroy();}};d.prototype._toggleHeaderContent=function(){var o=q(document.getElementById(this.getId()+"-headerContent"));if(this.getShowHeader()){o.show();}else{o.hide();}};d.prototype.onAnyEvent=function(e){if(this._bMenuOpened&&(e.type==="mousedown"||e.type==="focusin")){var s=e.target;var D=this.getId()+"-menu-popup"?window.document.getElementById(this.getId()+"-menu-popup"):null;if(!c(D,s)||s.tagName==="BODY"){this._toggleMenuPopup();}}};d.prototype.onsapescape=function(){if(this._bMenuOpened){this._toggleMenuPopup();this._oMenuButton.focus();}};d.prototype.onsapnext=function(e){if(this._bMenuOpened){var m=this.getMenuContent();this._iSelectedMenuItem++;if(this._iSelectedMenuItem>=m.length){this._iSelectedMenuItem=0;}m[this._iSelectedMenuItem].focus();e.preventDefault();e.stopPropagation();}};d.prototype.onsapprevious=function(e){if(this._bMenuOpened){var m=this.getMenuContent();this._iSelectedMenuItem--;if(this._iSelectedMenuItem<0){this._iSelectedMenuItem=m.length-1;}m[this._iSelectedMenuItem].focus();e.preventDefault();e.stopPropagation();}};d.prototype.setShowHeader=function(s){this.setProperty("showHeader",s,true);this._toggleHeaderContent();return this;};return d;});
