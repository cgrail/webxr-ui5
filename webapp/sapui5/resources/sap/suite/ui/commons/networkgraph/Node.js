/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/suite/ui/commons/library","./ElementBase","./ElementAttribute","sap/ui/core/IconPool","sap/ui/Device","sap/base/security/encodeXML","sap/m/CheckBox","sap/m/Text","./NodeRenderer"],function(q,l,E,a,I,D,b,C,T,N){"use strict";var S=l.networkgraph.NodeShape,A=l.networkgraph.ActionButtonPosition,H=l.networkgraph.HeaderCheckboxState;var c=32,d=5,M=80,f=4;var g={Circle:{WIDTH:96,HEIGHT:64},Box:{WIDTH:160,HEIGHT:32},Attributes:{LINE:16,OFFSET:8},ActionButtons:{RADIUS:13,MARGIN:8,OFFSET:4},Title:{LINESIZE:15,OFFSET:8,ICON_SIZE:16,INFO_BOX_SIZE:20,ICON_X_OFFSET:6,IMAGE_OFFSET_Y:6},Description:{LINESIZE:15},Image:{Box:16,Circle:32}};var h={EXPANDED:"Expanded",COLLAPSED:"Collapsed",PARTIAL:"Partial"};var j={EXPAND:"sys-add",COLLAPSE:"sys-minus",PARTIAL:"overlay"};var s=I.getIconInfo(j.EXPAND),k=I.getIconInfo(j.COLLAPSE),m=I.getIconInfo(j.PARTIAL);s=s&&s.content;k=k&&k.content;m=m&&m.content;var r=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var n=E.extend("sap.suite.ui.commons.networkgraph.Node",{metadata:{library:"sap.suite.ui.commons",properties:{headerCheckBoxState:{type:"sap.suite.ui.commons.networkgraph.HeaderCheckboxState",group:"Misc",defaultValue:H.Hidden},collapsed:{type:"boolean",group:"Misc",defaultValue:false},selected:{type:"boolean",group:"Misc",defaultValue:false},group:{type:"string",group:"Misc",defaultValue:null},key:{type:"string",group:"Misc",defaultValue:null},shape:{type:"sap.suite.ui.commons.networkgraph.NodeShape",groups:"Behavior",defaultValue:S.Circle},icon:{type:"string",group:"Appearance",defaultValue:null},statusIcon:{type:"string",group:"Appearance",defaultValue:null},width:{type:"int",group:"Misc",defaultValue:undefined},height:{type:"int",group:"Misc",defaultValue:undefined},maxWidth:{type:"int",group:"Misc",defaultValue:undefined},x:{type:"float",group:"Misc",defaultValue:0},y:{type:"float",group:"Misc",defaultValue:0},showExpandButton:{type:"boolean",defaultValue:true},showActionLinksButton:{type:"boolean",defaultValue:true},showDetailButton:{type:"boolean",defaultValue:true},titleLineSize:{type:"int",defaultValue:1},descriptionLineSize:{type:"int",defaultValue:-1},iconSize:{type:"int",group:"Appearance",defaultValue:undefined},coreNodeSize:{type:"int",group:"Appearance",defaultValue:0}},aggregations:{actionLinks:{type:"sap.ui.core.Control",multiple:true,singularName:"actionLink"},actionButtons:{type:"sap.suite.ui.commons.networkgraph.ActionButton",multiple:true,singularName:"actionButton"},image:{type:"sap.suite.ui.commons.networkgraph.NodeImage",multiple:false,singularName:"nodeImage"},content:{type:"sap.ui.core.Control",multiple:false},_checkBox:{type:"sap.m.CheckBox",multiple:false,visibility:"hidden"}},events:{headerCheckBoxPress:{parameters:{checked:"boolean"}},press:{},hover:{},collapseExpand:{}}},onAfterRendering:function(){this._afterRenderingBase();}});n.prototype.aProcessRequiredProperties=["key","group"];n.prototype.init=function(o){this._oExpandState=h.EXPANDED;this._oGroup=null;this._iWidth=0;this._iHeight=0;this._iLabelAttrWidth=0;this._iValueAttrWidth=0;this._aTitleLines=[[]];this._aDescriptionLines=[[]];this._bIsHidden=false;this._bActionButtonsRendered=false;this._iCircleSize=0;this._iGroupIndex=-1;this._clearChildren();};n.prototype._clearChildren=function(){this.aChildren=[];this.aParents=[];this.aLines=[];this.aParentLines=[];};n.prototype._afterRendering=function(){var $=this.$();if(this._isInCollapsedGroup()){return;}this._correctTitle("sapSuiteUiCommonsNetworkNodeTitle");this._setupEvents();if(this._bIsHidden){$.hide();}if(this._oExpandState===h.COLLAPSED){$.addClass("sapSuiteUiCommonsNetworkNodeCollapsed");}if(this._oExpandState===h.PARTIAL){$.addClass("sapSuiteUiCommonsNetworkNodePartialCollapsed");}this.$(this.getId()+"actionbuttons").detach();this._bActionButtonsRendered=false;this._removeFromInvalidatedControls();if(this._isHtml()&&!n.hasNativeLineClamp){this._setTextHeight($.find(".sapSuiteUiCommonsNetworkGraphDivNodeTitle"),this.getTitleLineSize());this._setTextHeight($.find(".sapSuiteUiCommonsNetworkGraphDivNodeDescription"),this.getDescriptionLineSize());}if(this.getSelected()){this.showActionButtons(true);}};n.prototype._render=function(o){var p=this.getParent(),u=p&&p._isUseNodeHtml();if(this._isIgnored()||!this.getVisible()){return"";}o=o||{};return u?this._renderHtml(o):this._renderSvg(o);};n.prototype._renderHtmlInfoIcon=function(e){e=e||{};var i="",o=this.getStatusIcon(),p=this._convertToStyle(e);i+="<div title=\""+r.getText("NETWORK_GRAPH_COLLAPSED")+"\" id=\""+this.getId()+"-statusiconwrapper"+"\" "+p+" class=\"sapSuiteUiCommonsNetworkNodeDivInfoWrapper sapSuiteUiCommonsNetworkNodeInfoWrapper\" >";i+="<div class=\"sapSuiteUiCommonsNetworkNodeDivInfoIcon sapSuiteUiCommonsNetworkGraphDivNodeIcon\" >";i+=this._renderHtmlIcon(o||"sap-icon://notification");i+="</div>";i+="</div>";return i;};n.prototype._renderHtmlText=function(t,i,e,o){var p=this._renderHtmlElement("div",{"-webkit-line-clamp":i===0?"":i,"color":o},{"class":"sapSuiteUiCommonsNetworkGraphDivNodeText "+(e||"")+((i===1)?" sapSuiteUiCommonsNetworkGraphDivTextBreakAll ":"")});p+=b(t);p+="</div>";return p;};n.prototype._renderHtmlTitle=function(e){var t=this.getTitle(),i="";if(t){i+=this._renderHtmlText(t,this.getTitleLineSize(),"sapSuiteUiCommonsNetworkGraphDivNodeTitleText sapSuiteUiCommonsNetworkGraphDivNodeTitle",e);i+="<div style=\"clear:both\"></div>";}return i;};n.prototype._renderHtmlDescription=function(e){var i=this.getDescriptionLineSize(),o=this.getDescription();if(o&&i!=-1){return this._renderHtmlText(o,i,"sapSuiteUiCommonsNetworkGraphDivNodeDescription",e);}return"";};n.prototype._renderHtmlTitleAndDescription=function(t){return this._renderHtmlTitle()+this._renderHtmlDescription();};n.prototype._renderHtmlAttributes=function(o){var e=this.getAttributes(),i="";if(!o.renderManager){return;}if(e.length>0){var i="<div class=\"sapSuiteUiCommonsNetworkGraphDivNodeAttributes\">";e.forEach(function(p){var t=p.getId();i+="<div id=\""+t+"\" class=\"sapSuiteUiCommonsNetworkGraphDivNodeAttributesRow\">";i=this._processRenderManager(o.renderManager,i);this._renderClonedControl(o,p);i+="</div>";}.bind(this));i+="</div>";}return i;};n.prototype._showDivActionButtons=function(e){var $=this.$("rightdivbuttons"),o=this.$("leftdivbuttons");if(e&&!this._bActionButtonsRendered){$.html("");o.html("");var p=function(u,v){var w="<div title=\""+u.title+"\"class=\"sapSuiteUiCommonsNetworkGraphDivActionButtonBackground\">";w+="<div class=\"sapSuiteUiCommonsNetworkGraphDivActionButton ";if(!u.enable){w+="sapSuiteUiCommonsNetworkGraphDivActionButtonDisabled";}w+="\">";w+=this._renderHtmlIcon(u.icon,(u.class||""));w+="</div>";w+="<div class=\"sapSuiteUiCommonsNetworkActionButtonFocusCircle\"></div>";w+="</div>";var x=q(w);if(u.enable&&u.click){x.click(u.click);x.click(function(y){if(this.getParent()){this.getParent().setFocus({item:this,button:x[0]});}}.bind(this));}v.append(x);}.bind(this);var B=0,t=0;if(this.getShowExpandButton()){p({"class":"sapSuiteUiCommonsNetworkNodeActionCollapseIcon",icon:this._getExpandIcon(true),enable:this._hasVisibleChildren(),title:r.getText("NETWORK_GRAPH_EXPAND_COLLAPSE"),id:this._getDomId("actionCollapse"),click:this._expandClick.bind(this)},$);B++;}if(this.getShowDetailButton()){p({icon:"sap-icon://menu",enable:this._hasDetailData()||this.getTitle(),id:this._getDomId("actionDetail"),title:r.getText("NETWORK_GRAPH_NODE_DETAILS"),click:function(u){this._detailClick(u.target);}.bind(this)},$);B++;}if(this.getShowActionLinksButton()){p({icon:"sap-icon://chain-link",enable:this._hasActionLinks(),title:r.getText("NETWORK_GRAPH_NODE_LINKS"),id:this._getDomId("actionLinks"),click:function(u){this._linksClick(u.target);}.bind(this)},$);B++;}for(var i=0;(B+t)<(f*2)&&i<this.getActionButtons().length;i++){(function(u){var P=u.getPosition(),v=P===A.Right?B:t;if(v>=f){P=P===A.Left?A.Right:A.Left;}var w=P===A.Right?$:o;p({icon:u.getIcon(),enable:u.getEnabled(),title:u.getTitle(),id:u.getId(),click:function(x){u.firePress({buttonElement:x.target});}},w);})(this.getActionButtons()[i]);}this._bActionButtonsRendered=true;}var F=e?"addClass":"removeClass";this.$().find(".sapSuiteUiCommonsNetworkGraphDivActionButtons")[F](this.VISIBLE_ACTIONS_BUTTONS_CLASS);};n.prototype._getCorrectWidth=function(){var w=(this._iWidth||this.getWidth()),i="";if(!w){if(this.getMaxWidth()){i=this.getMaxWidth()+"px";w="";}else{w=g.Box.WIDTH;}}if(w!==""){w+="px";}return{width:w,maxWidth:i};};n.prototype._renderHtml=function(o){var i=this._getElementId(o.idSufix);o.renderManager.write(this._renderHtmlElement("div",{width:this._isCircle()?this._getCorrectWidth().width:"",top:this.getY()?(this.getY()+"px"):"",left:this.getX()?(this.getX()+"px"):"","min-width":M+"px"},{id:i,"data-sap-ui":i,"class":this._getNodeClass()}));this._processRenderManager(o.renderManager,this.renderContent(o));o.renderManager&&o.renderManager.write("</div>");};n.prototype._renderHtmlContent=function(o){o=o||{};var i=this._getElementId(o.idSufix),e=this._iHeight||this.getHeight()||g.Circle.HEIGHT,p=this._isCircle();var P=function(){var x=this.getContent();if(x){o.renderManager.write("<div id=\""+this.getId()+"-contentwrapper\">");this._renderClonedControl(o,x);o.renderManager.write("</div>");}else{this._processRenderManager(o.renderManager,this.renderItemContent(o));}}.bind(this);if(p){this._iCircleSize=this._iCircleSize||e;var t=this._convertToStyle({width:this._iCircleSize+"px",height:this._iCircleSize+"px"},this._getStatusStyle({"border-color":E.ColorType.Border}));var u=this._getStatusStyle({"border-color":E.ColorType.Background},true);var B=this._getStatusStyle({"border-color":E.ColorType.Border,"background-color":this.getSelected()?E.ColorType.SelectedBackground:"","border-width":E.ColorType.BorderWidth,"border-style":E.ColorType.BorderStyle},true);o.renderManager.write("<div id=\""+i+"-wrapperwithbuttons\""+t+" class=\"sapSuiteUiCommonsNetworkGraphDivInnerWrapper\">");o.renderManager.write(this.renderHtmlActionButtons());o.renderManager.write("<div id=\""+i+"-wrapper\""+B+" class=\"sapSuiteUiCommonsNetworkGraphDivInner\">");o.renderManager.write("<div class=\"sapSuiteUiCommonsNetworkDivCircleWrapper\">");o.renderManager.write(this._renderHtmlInfoIcon());o.renderManager.write("<div  id=\""+i+"-focus\" class=\"sapSuiteUiCommonsNetworkDivFocus\">");o.renderManager.write("<div id=\""+i+"-status\""+u+" class=\"sapSuiteUiCommonsNetworkDivCircleStatus\">");this._processRenderManager(o.renderManager,this.renderItemContent(o));o.renderManager.write("</div>");o.renderManager.write("</div>");o.renderManager.write("</div>");o.renderManager.write("</div>");o.renderManager.write("</div>");o.renderManager.write(this._renderHtmlTitleAndDescription());}else{var w=this._getCorrectWidth();var t=this._convertToStyle({width:w.width,"max-width":w.maxWidth?w.maxWidth:"inherit"},this._getStatusStyle({"border-color":E.ColorType.Border,"background-color":this.getSelected()?E.ColorType.SelectedBackground:"","border-width":E.ColorType.BorderWidth,"border-style":E.ColorType.BorderStyle}),false);o.renderManager.write(this.renderHtmlActionButtons());o.renderManager.write("<div "+t+" id=\""+i+"-wrapper\" class=\"sapSuiteUiCommonsNetworkGraphDivInner\">");o.renderManager.write("<div id=\""+i+"-focus\" class=\"sapSuiteUiCommonsNetworkDivFocus\"></div>");var u=this._getStatusStyle({"background-color":E.ColorType.Background},true);var v=this._getColor(this.getSelected()?E.ColorType.Content:E.ColorType.HeaderContent);o.renderManager.write("<div id=\""+i+"-header\" "+u+" class=\"sapSuiteUiCommonsNetworkGraphDivHeader sapSuiteUiCommonsNetworkGraphDivHeaderColor");if(!this._hasAdditionalContent()){o.renderManager.write(" sapSuiteUiCommonsNetworkGraphDivHeaderOnly");}o.renderManager.write("\">");if(this._showHeaderCheckBox()){this._renderClonedControl(o,this._getHeaderCheckbox());}o.renderManager.write(this._renderHtmlTitleIcon("sapSuiteUiCommonsNetworkGraphDivNodeIconTitle"));o.renderManager.write(this._renderHtmlTitle(v));o.renderManager.write("</div>");P();o.renderManager.write("</div>");o.renderManager.write(this._renderHtmlInfoIcon());}};n.prototype._getHeaderCheckbox=function(){var o=this.getAggregation("_checkBox"),t=this;if(!o){o=new C(this.getId()+"-checkbox").addStyleClass("sapSuiteUiCommonsNetworkGraphHeaderCheckboxInner");o.addEventDelegate({"onAfterRendering":function(){o.$().mousedown(function(e){var i=!o.getSelected();o.setSelected(i);t.fireHeaderCheckBoxPress({checked:i});e.stopPropagation();});}});this.setAggregation("_checkBox",o,true);}return o;};n.prototype._renderHtmlTitleIcon=function(e){var i=this.getIcon(),o=this.getImage(),p=this._getStatusStyle({"color":this._isBox()?E.ColorType.HeaderContent:E.ColorType.Content},true);var t="";e=(e||"")+" sapSuiteUiCommonsNetworkGraphDivNodeTitleText sapSuiteUiCommonsNetworkGraphDivNodeIcon";if(o){var u=this._getImageSize();t=this._renderHtmlElement("img",{width:u.width+"px",height:u.height+"px"},{"src":b(o.getSrc()),"class":"sapSuiteUiCommonsNetworkGraphDivNodeImage"});}else if(i){t="<div "+p+" class=\""+e+"\">"+this._renderHtmlIcon(i)+"</div>";}return t;};n.prototype._renderHtmlBoxContent=function(o){var e="",i=this._hasAdditionalContent(),p=this._getElementId(o.idSufix);if(i){e+="<div id=\""+p+"-additionalwarpper\" class=\"sapSuiteUiCommonsNetworkGraphDivAdditionalContent\">";var t=this._getColor(E.ColorType.Content);e+=this._renderHtmlDescription(t);this._processRenderManager(o.renderManager,e);e="";e+=this._renderHtmlAttributes(o);e+="</div>";}return e;};n.prototype._renderHtmlCircleContent=function(o){return this._renderHtmlTitleIcon("sapSuiteUiCommonsNetworkGraphDivNodeCircleIcon");};n.prototype._renderSvg=function(o){var i=this._getElementId(o.idSufix);var e=this._renderControl("g",{id:i,"data-sap-ui":i,nodeid:b(this.getKey()),"class":this._getNodeClass()},false);e+=this._renderControl("g",{id:i+"-wrapper","class":"sapSuiteUiCommonsNetworkNodeShape"},false);e+=this._renderContent(o);e+="</g>";e+="</g>";return e;};n.prototype._renderSvgContent=function(o){var e=this._isBox()?this._renderBox(o):this._renderCircle(o);var i=this.getParent()._bIsRtl,x,y;if(this._isCircle()){var p=this._iCircleSize/8,t=this._iCircleSize/5.3;x=i?this._getCirclePosition().x+this._iCircleSize-p:this._getCirclePosition().x+p;y=this.getY()+t;}else{x=this.getX();y=this.getY();}e+=this.renderStatusIcon({x:x-this.getX(),y:y-this.getY()});return e;};n.prototype._renderContent=function(o){return this.renderContent(o);};n.prototype._renderCircleContent=function(){var i=this._iCircleSize,e=this.getParent()._bIsRtl,o=this.getImage(),p,x=this.getX(),y=this.getY(),t="";if(this._displayImage(o)){p=this._getImageSize();t+=this._renderControl("image",{"xlink:href":b(o.getSrc()),x:x+this._iWidth/2-p.width/2,y:y+i/2-p.height/2,width:p.width,height:p.height});}else if(this.getIcon()){t+=this._renderIcon({attributes:{"class":"sapSuiteUiCommonsNetworkGraphIcon sapSuiteUiCommonsNetworkCircleNodeIcon sapSuiteUiCommonsNetworkStatusText",style:(this.getIconSize()?("font-size:"+this.getIconSize()+"px;"):"")+this._getStatusStyle({fill:E.ColorType.Content}),x:x+this._iWidth/2,y:y+i/2},icon:this.getIcon(),height:this.getIconSize()?this.getIconSize()-2:22});}if(this.getTitle()){if(!this._aTitleLines||this._aTitleLines.length===1){t+=this._renderClipPath({id:this.getId()+"-title-clip",x:x,y:y+i+g.Title.OFFSET-10,height:g.Title.LINESIZE*2});t+=this._renderTitle({"class":"sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeText",x:x+this._iWidth/2,y:y+i+g.Title.OFFSET,title:b(this.getTitle()),maxWidth:this._iWidth-5});}else{t+=this._renderMultilineTitle({x:x+this._iWidth/2,y:y+i+g.Title.OFFSET*2});}}if(this._displayDescription()){t+=this._renderDescription({x:e?x+this._iWidth-g.Title.OFFSET:x+g.Title.OFFSET,y:y+this._getTitleHeight()+i+g.Title.OFFSET*2+g.Title.OFFSET/2});}return t;};n.prototype._renderCircle=function(){var e="",x=this.getX(),y=this.getY(),i=6,F=2,o=this._iCircleSize;e+=this._renderControl("circle",{id:this.getId()+"-innerBox",cx:x+this._iWidth/2,cy:y+o/2,style:this._getStatusStyle({stroke:E.ColorType.Border}),r:o/2,"class":"sapSuiteUiCommonsNetworkInnerCircle"});e+=this._renderControl("circle",{id:this.getId()+"-statusCircle",cx:x+this._iWidth/2,cy:y+o/2,style:this._getStatusStyle({stroke:E.ColorType.Background}),r:o/2-i,"class":"sapSuiteUiCommonsNetworkInnerCircleStatus"});e+=this._renderControl("circle",{id:this.getId()+"-focusCircle",cx:x+this._iWidth/2,cy:y+o/2,style:this._getStatusStyle({stroke:E.ColorType.Focus}),r:o/2-F,"class":"sapSuiteUiCommonsNetworkCircleFocus"});e+=this.renderItemContent();return e;};n.prototype._renderBoxContent=function(o){var e=c/2,t=g.Title.ICON_X_OFFSET,i=this.getParent()._bIsRtl,p=this.getImage(),y=this.getY(),x=this.getX(),u,v=this._getImageSize(),w="";if(this._displayImage(p)){v=this._getImageSize();w+=this._renderControl("image",{"xlink:href":b(p.getSrc()),x:i?x+this._iWidth-g.Title.ICON_X_OFFSET-v.width:x+g.Title.ICON_X_OFFSET,y:y+g.Title.IMAGE_OFFSET_Y,width:v.width,height:v.height});t+=v.width+g.Title.ICON_X_OFFSET;}else if(this.getIcon()){w+=this._renderIcon({attributes:{style:this._getStatusStyle({fill:E.ColorType.Content}),"class":"sapSuiteUiCommonsNetworkGraphIcon sapSuiteUiCommonsNetworkNodeTitleIcon sapSuiteUiCommonsNetworkStatusText",x:i?x+this._iWidth-g.Title.ICON_X_OFFSET:x+g.Title.ICON_X_OFFSET,y:y+e},icon:this.getIcon(),height:g.Title.LINESIZE});t+=g.Title.ICON_SIZE+g.Title.ICON_X_OFFSET;}if(this.getTitle()){u=this._iWidth-t-d;if(u>0){if(!this._aTitleLines||this._aTitleLines.length===1){w+=this._renderClipPath({id:this.getId()+"-title-clip",x:x,y:y,height:c});w+=this._renderTitle({"class":"sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeText sapSuiteUiCommonsNetworkStatusText",style:this._getStatusStyle({fill:E.ColorType.Content}),x:i?x+this._iWidth-t:x+t,y:y+e,maxWidth:u,title:b(this.getTitle())});}else{w+=this._renderMultilineTitle({x:i?x+this._iWidth-t:x+t,y:y+g.Title.OFFSET*2});}}}if(this._displayDescription()){w+=this._renderDescription({x:i?x+this._iWidth-g.Title.OFFSET:x+g.Title.OFFSET-g.Title.OFFSET/3,y:y+this._getTitleHeight()+(this._hasMultiLineTitle()?(g.Title.OFFSET*2+g.Title.OFFSET/2):g.Title.OFFSET*4)});}if(this._displayAttributes()){w+=o.sizeDetermination?this._renderAttributesForSize():this._renderAttributes({y:this.getY()+this._getDescriptionHeight()+this._getTitleHeight()+g.Title.OFFSET+(!this._hasMultiLineTitle()?g.Attributes.OFFSET:0)});}return w;};n.prototype._renderBox=function(o){var d=6,F=4,t=(this._iTitleHeight||this._getTitleHeight())+d,R=3;var y=this.getY(),x=this.getX();var e=this._renderControl("rect",{id:this.getId()+"-innerBox",x:x,y:y,style:this._getStatusStyle({stroke:E.ColorType.Border}),"class":"sapSuiteUiCommonsNetworkInnerRect",rx:R,ry:R,width:this._iWidth,height:this._iHeight,"pointer-events":"fill"});var i=this._iHeight===c;e+=this._renderRoundRect({id:this.getId()+"-innerStatusBox",x:x,y:y,style:this._getStatusStyle({fill:E.ColorType.Background}),"class":"sapSuiteUiCommonsNetworkNodeBoxStatus",topRight:R,topLeft:R,bottomRight:i?R:0,bottomLeft:i?R:0,width:this._iWidth,height:Math.max(t,c),"pointer-events":"fill"});e+=this._renderControl("rect",{id:this.getId()+"-focusCircle",x:x+F,y:y+F,"class":"sapSuiteUiCommonsNetworkBoxFocus",style:this._getStatusStyle({stroke:E.ColorType.Focus}),rx:5,ry:5,width:this._iWidth-F*2,height:this._iHeight-F*2});e+=this.renderItemContent(o);return e;};n.prototype._renderInfoIcon=function(x,y,i,F){var e=this.getStatusIcon(),o=e?"sapSuiteUiCommonsNetworkNodeInfoWrapperCustomIcon":"",p="<g id=\""+this.getId()+"-statusiconwrapper"+"\" class=\"sapSuiteUiCommonsNetworkNodeInfoWrapper "+o+"\">";p+=this._renderControl("circle",{"class":"sapSuiteUiCommonsNetworkNodeInfoBox",cx:x,cy:y,r:i||g.Title.INFO_BOX_SIZE/2},false);p+="<title>"+r.getText("NETWORK_GRAPH_COLLAPSED")+"</title>";p+="</circle>";p+=this._renderIcon({attributes:{id:this.getId()+"-statusicon","class":"sapSuiteUiCommonsNetworkNodeInfoIcon sapSuiteUiCommonsNetworkGraphIcon",x:x+g.Title.INFO_BOX_SIZE/2-10,y:y,style:F?("font-size:"+F):""},icon:e||"sap-icon://notification",height:g.Title.INFO_BOX_SIZE/2+2.5});p+="</g>";return p;};n.prototype._getNodeClass=function(){var e=this.getSelected()?this.SELECT_CLASS:"",i=this._hasCustomStatus()?" sapSuiteUiCommonsNetworkNodeCustomStatus ":"",o="";if(this.aCustomStyleClasses){o=this.aCustomStyleClasses.join(" ");}return(this.getParent()._isUseNodeHtml()?"sapSuiteUiCommonsNetworkGraphDivNode ":"sapSuiteUiCommonsNetworkNode ")+e+i+(this._isBox()?" sapSuiteUiCommonsNetworkBox ":" sapSuiteUiCommonsNetworkNodeCircle ")+this._getStatusClass()+o;};n.prototype._renderAttributesForSize=function(){var L="",v="";this.getVisibleAttributes().forEach(function(i){L+=this._renderText({attributes:{"class":"sapSuiteUiCommonsNetworkGraphAttribute",x:this.getX(),y:this.getY()},text:i.getLabel()});v+=this._renderText({attributes:{"class":"sapSuiteUiCommonsNetworkGraphAttribute",x:this.getX(),y:this.getY()},text:i.getValue()});},this);L="<g id=\""+this.getId()+"-attrLabel\">"+L+"</g>";v="<g id=\""+this.getId()+"-attrValue\">"+v+"</g>";return L+v;};n.prototype._getAttributeColor=function(i,e,t){var o=e+"Status",p=i["get"+o]()||this.getStatus();return this._getColor(t,p);};n.prototype._getAttributeColorString=function(i,e,t){var o=this._getAttributeColor(i,e,t);return o?"fill:"+o:"";};n.prototype._renderAttributes=function(p){p=p||{};var P=2,B=6,e=12;var o=this.getParent()._bIsRtl,L=o?this.getX()+this._iWidth-B:this.getX()+B,t=this._iLabelAttrWidth?this._iLabelAttrWidth:this._iWidth/2-e,v=o?L-t-e:L+t+e,V=o?v-this.getX()-B:(this.getX()+this._iWidth)-v-B;var u=this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-clip-attr-value)",id:this.getId()+"-attrValue"},false),w=this._renderControl("g",{"clip-path":"url(#"+this.getId()+"-clip-attr-label)",id:this.getId()+"-attrLabel"},false),x=p.y,y=this._renderClipPath({id:this.getId()+"-clip-attr-label",x:o?L-t-B+P:L-P,y:x,width:P*2+(o?t+B:t)});y+=this._renderClipPath({id:this.getId()+"-clip-attr-value",x:o?this.getX()+B+P:v-P,y:x,width:P*2+(o?V+B:V)});this.getVisibleAttributes().forEach(function(z,i){var Y=x+g.Attributes.LINE*(i+1);w+=this._renderText({attributes:{style:this._getAttributeColorString(z,a.Type.Label,E.ColorType.Content),"class":"sapSuiteUiCommonsNetworkGraphAttribute sapSuiteUiCommonsNetworkStatusText",x:L,id:z.getId()+"-label",y:Y},text:z.getLabel()});u+=this._renderText({attributes:{style:this._getAttributeColorString(z,a.Type.Value,E.ColorType.Content),"class":"sapSuiteUiCommonsNetworkGraphAttribute sapSuiteUiCommonsNetworkGraphAttributeValue sapSuiteUiCommonsNetworkStatusText",x:v,y:Y,id:z.getId()+"-value"},text:z.getValue()});},this);u+="</g>";w+="</g>";return y+w+u;};n.prototype._detailClick=function(o){o=o||this;this.getParent()._tooltip.openDetail({item:this,opener:o});};n.prototype._linksClick=function(o){o=o||this;this.getParent()._tooltip.openLink({item:this,opener:o});};n.prototype._expandClick=function(){var e=this.fireEvent("collapseExpand",{},true);if(e){this.setCollapsed(this._oExpandState!==h.COLLAPSED);}};n.prototype._setupMaxWidth=function(){var i=this.getMaxWidth();if(i){this._iWidth=i;}};n.prototype._setTextHeight=function($,i){if($[0]&&i>0){var e=this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeIcon.sapSuiteUiCommonsNetworkGraphDivNodeIconTitle");e.hide();var o=$.height();$.css("white-space","nowrap");var p=$.height();$.height(Math.min(o,i*p));$.css("white-space","");e.show();}};n.prototype._applyMaxWidth=function(){var O=30,d=10;var i,$,e,v=0,L=0,o=0,p,t=this.getMaxWidth();if(this._oGroup&&this._oGroup.getCollapsed()){return;}if(!this.getWidth()&&this.getMaxWidth()){$=this.$("attrLabel");e=this.$("attrValue");if($[0]){L=$[0].getBBox().width;}if(e[0]){v=e[0].getBBox().width;}o=v+L+O;i=Math.max(this.$()[0].getBBox().width+d,o);this._iWidth=Math.max(Math.min(i,t),80);if((v&&L)){p=Math.max(L,v);if(p*2+O/2<this._iWidth){return;}if(o>this._iWidth){if(v<t/2){this._iLabelAttrWidth=this._iWidth-v-O;}if(L<this._iWidth/2){this._iLabelAttrWidth=L+O/4;}}else{this._iLabelAttrWidth=this._iWidth-v-O;}}}};n.prototype._resetDimensions=function(){this._iWidth=0;this._iHeight=0;this._iCircleSize=0;this._iTitleHeight=0;};n.prototype._setupDivDimensions=function(){var $=this.$();this._iWidth=$.width();this._iHeight=$.height();};n.prototype._setupWidthAndHeight=function(R){var t=this._isBox()?"Box":"Circle",i=this._getTitleHeight(),e=this.getTitle()||this._hasDetailData()?g.Title.LINESIZE:0,o=this._getDescriptionHeight();o=o?o+5:0;var G=function(){var u=this._iHeight||this.getHeight();if(this._isBox()&&!u){u=o+(this._hasMultiLineTitle()?i+g.Title.OFFSET:Math.max(i+e,g.Box.HEIGHT));if(this._displayAttributes()){u+=this.getVisibleAttributes().length*g.Attributes.LINE+g.Attributes.OFFSET;}}if(this._isCircle()&&!this._iHeight){u=u?u:g[t].HEIGHT;this._iCircleSize=u;u+=i+o;}return Math.max(u,30);}.bind(this);var p=function(){var w=Math.max(this._iWidth||this.getWidth()||g[t].WIDTH,30);if(this._isCircle()&&w<this._iCircleSize){w=this._iCircleSize;}return w;}.bind(this);this._iHeight=G();this._iWidth=p();};n.prototype._getTitleHeight=function(){var i=0,o=this._getImageSize();if(this._hasMultiLineTitle()){i=(((this.getTitleLineSize()>0)?Math.min(this._aTitleLines.length,this.getTitleLineSize()):this._aTitleLines.length))*g.Title.LINESIZE;}else{i=(this._isBox()||this.getTitle())?g.Title.LINESIZE:0;}return Math.max(o.height,i);};n.prototype._getDescriptionHeight=function(){var i=this.getDescriptionLineSize();if(i===-1||!this._aDescriptionLines||!this.getDescription()){return 0;}return(i>0?Math.min(i,this._aDescriptionLines.length):this._aDescriptionLines.length)*g.Description.LINESIZE;};n.prototype._setupEvents=function(){var $=this.$("wrapper");$.unbind("mousedown");$.unbind("mouseover");$.unbind("mouseout");$.mousedown(function(e){this._mouseDown(e.ctrlKey);e.preventDefault();}.bind(this));$.mouseover(function(e){this._mouseOver();}.bind(this));$.mouseout(function(e){this._mouseOut();}.bind(this));};n.prototype._mouseOut=function(){this.$().removeClass(this.HIGHLIGHT_CLASS);if(!this.getSelected()){this._setStatusColors("");}};n.prototype._mouseOver=function(){var e=this.fireEvent("hover",{},true);if(e){if(!this.getSelected()){this._setStatusColors("Hover");}this.$().addClass(this.HIGHLIGHT_CLASS);}};n.prototype._mouseDown=function(i){var e=this.fireEvent("press",{},true);this.getParent()._selectNode({element:this,forceFocus:true,renderActionButtons:e&&!this.getSelected(),preventDeselect:i});if(!this.getSelected()){this.$().addClass(this.HIGHLIGHT_CLASS);this._setStatusColors("Hover");}};n.prototype._deselect=function(){var $=this.$("innerBox");$.css("stroke",this._getColor(E.ColorType.Border));$.css("fill",this._getColor(E.ColorType.Background));};n.prototype._getExpandIcon=function(R){switch(this._oExpandState){case h.PARTIAL:return R?j.PARTIAL:m;case h.EXPANDED:return R?j.COLLAPSE:k;case h.COLLAPSED:return R?j.EXPAND:s;default:return R?j.EXPAND:s;}};n.prototype._createLineText=function(t,w,o,i){var L=[[]],e=0,R,W,p,u,v,x,y=this._createElement("tspan");if(!t||w<0){return L;}u=t.split(/\s+/).reverse();o.appendChild(y);while(u.length>0){W=u.pop();if(W){p=L[e];p.push(W);y.textContent=L[e].join(" ");if(y.getComputedTextLength()>w){if(p.length>1&&i!==1){u.push(p.pop());}if(p.length===1){x=this._createText(o,{text:p[0],width:w,dots:false});if(x){v=y.textContent;p.pop();p.push(v);R=W.substring(v.length);u.push(R);}}e++;if(i>0&&e>=i){break;}L[e]=[];}}}if(i>0&&u.length>0){L[L.length-1].push("...");}if(L.length>0){x=this._createText(o,{text:L[L.length-1].join(" "),width:w,dots:true});if(x){L[i-1]=[y.textContent];}}return L;};n.prototype._createDescription=function(){var t,w=this._iWidth-g.Title.OFFSET,$=this.$();if(this._displayDescription()&&$[0]){t=this._createElement("text");t.setAttribute("class","sapSuiteUiCommonsNetworkNodeDescription");$[0].appendChild(t);this._aDescriptionLines=this._createLineText(this.getDescription(),w,t,this.getDescriptionLineSize());}};n.prototype._createMultilineTitle=function(){var G=function(){if(this._isBox()){if(this._displayImage()){return this._iWidth-this._getImageSize().width-g.Title.ICON_X_OFFSET*2;}if(this.getIcon()){return this._iWidth-g.Title.ICON_SIZE-g.Title.ICON_X_OFFSET*2;}return this._iWidth-g.Title.OFFSET*2;}return this._iWidth;}.bind(this);var t,w=G(),$=this.$();if(this.getTitleLineSize()!==1&&$[0]&&w>0){t=this._createElement("text");t.setAttribute("class","sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeMultipleLineTitle");$[0].appendChild(t);this._aTitleLines=this._createLineText(this.getTitle(),w,t,this.getTitleLineSize());}};n.prototype.getFocusDomRef=function(){return this.getDomRef("wrapper");};n.prototype._renderMultilineText=function(e){var o="",u=this._isBox()&&e.useCustomstyle;if(!e.lines){return"";}for(var i=0;i<e.lines.length;i++){o+=this._renderText({attributes:{style:u?this._getStatusStyle({fill:E.ColorType.Content}):"","class":e.class+(u?" sapSuiteUiCommonsNetworkStatusText ":""),x:e.x,y:e.y+(i*e.lineSize)},close:false});o+=e.lines[i].join(" ");o+="</text>";}return o;};n.prototype._renderDescription=function(e){e.class=" sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeMultipleLineTitle";return this._renderMultilineText({lines:this._aDescriptionLines,maxLineSize:this.getDescriptionLineSize(),lineSize:g.Description.LINESIZE,"class":" sapSuiteUiCommonsNetworkNodeDescription ",x:e.x,y:e.y});};n.prototype._renderMultilineTitle=function(e){return this._renderMultilineText({useCustomStyle:true,lines:this._aTitleLines,maxLineSize:this.getTitleLineSize(),lineSize:g.Title.LINESIZE,"class":" sapSuiteUiCommonsNetworkNodeTitle sapSuiteUiCommonsNetworkNodeMultipleLineTitle",x:e.x,y:e.y,trim:this._aTitleLines.length>this.getTitleLineSize()&&this.getTitleLineSize()!==0});};n.prototype._processHideShowParents=function(e,R,o){var i=this._oGroup&&this._oGroup.getCollapsed();var p=function(t){if(t._bIsHidden){return;}var u=false,v;if(t.getKey()!==R){if(t.aChildren.length>0){v=t.aChildren[0]._bIsHidden;t.aChildren.forEach(function(w){if(v!==w._bIsHidden){u=true;}});t._oExpandState=u?h.PARTIAL:v?h.COLLAPSED:h.EXPANDED;if(t._oExpandState===h.COLLAPSED){t.$().addClass("sapSuiteUiCommonsNetworkNodeCollapsed");}else{t.$().removeClass("sapSuiteUiCommonsNetworkNodeCollapsed");}if(t._oExpandState===h.PARTIAL){t.$().addClass("sapSuiteUiCommonsNetworkNodePartialCollapsed");}else{t.$().removeClass("sapSuiteUiCommonsNetworkNodePartialCollapsed");}}}};p(this);this.aParents.forEach(function(t){if(!o[t.getKey()]){p(t);}});if(i){if(this._oGroup._bNeedParentProcessing){this._oGroup.aNodes.forEach(function(G){G.aParents.forEach(function(P){if(!o[P.getKey()]){p(P);}});});this._oGroup._bNeedParentProcessing=false;}}};n.prototype._getAllChildren=function(e,R,o){var i=function(K){if(!o[K]){o[K]=this;return true;}return false;}.bind(this);if(R===this.getKey()){return;}if(this._bIsHidden===e){return;}if(!i(this.getKey())){return;}if(this._oGroup&&this._oGroup.getCollapsed()){this._oGroup.aNodes.forEach(function(p){p._getAllChildren(e,R,o);});}if(this._oExpandState!==h.COLLAPSED){this.aChildren.forEach(function(p){p._getAllChildren(e,R,o);});}};n.prototype._hideShow=function(e){var F=e?"hide":"show",i;this._bIsHidden=e;this.aLines.forEach(function(L){L._hideShow(e);});this.aParentLines.forEach(function(L){L._hideShow(e);});if(this._oGroup&&!this._oGroup._bIsSwimLane){if(this._oGroup.getCollapsed()){this._oGroup._hideShow(e);}else{i=this._oGroup._hasVisibleNodes();if((i&&!e)||(!i&&e)){this._oGroup._hideShow(e);}}}if(this._isInCollapsedGroup()&&this._isHtml()){return;}if(this.$()){this.$()[F]();}};n.prototype._setActionButtonFocus=function(i,F){this.$().removeClass(this.FOCUS_CLASS);this.$().find("."+this.FOCUS_CLASS).removeClass(this.FOCUS_CLASS);var e=F?"addClass":"removeClass";q(i)[e](this.FOCUS_CLASS);};n.prototype._getActionButtonTitle=function(i){var F=q(i).find("title")[0];return r.getText("NETWORK_GRAPH_ACCESSIBILITY_ACTION_BUTTON")+(F?" "+F.textContent:"");};n.prototype._getAccessibilityLabel=function(){var L=r.getText("NETWORK_GRAPH_NODE")+" "+this.getTitle();if(this._isBox()){this.getVisibleAttributes().forEach(function(o){L+=" "+o.getLabel()+" "+o.getValue();});}return L;};n.prototype._setStatusColors=function(t){var e=function(z,F){if(F&&z){var G=this._getColor(E.ColorType[t+"Content"],F),J=u?"color":"fill";q(z).css(J,G||i);}}.bind(this);var u=this.getParent()._isUseNodeHtml();if(this._hasCustomStatus()){var i=this._getColor(E.ColorType[t+"Content"]),B=this._getColor(E.ColorType[t+"Background"]),o=this._getColor(E.ColorType[t+"Border"]);var p=(t==="Selected"||t==="Hover");if(!u){var $=this.$("innerBox"),v=w?this.$("statusCircle"):this.$("innerStatusBox"),w=this._isCircle();v.css(w?"stroke":"fill",p?"none":B);$.css("fill",p?B:"");$.css("stroke",o);this.$().find(".sapSuiteUiCommonsNetworkStatusText").css("fill",i);this.$("focusCircle").css("stroke",this._getColor(E.ColorType[t+"Focus"]));}else{var x=this.$("wrapper"),y=this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeTitleText");x.css("border-color",o);if(this._isBox()){this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeText").css("color",i);this.$("header").css("background-color",p&&!B?"":B);y.css("color",p?i:this._getColor(E.ColorType.HeaderContent));x.css("background-color",p&&B?B:"");}else{this.$("status").css("border-color",B);x.css("background-color",p&&B?B:"");this.$().find(".sapSuiteUiCommonsNetworkGraphDivNodeCircleIcon").css("color",i);}}}this.getAttributes().forEach(function(z){if(z&&z.getVisible()){var L=z.getLabelStatus(),V=z.getValueStatus();if(L){e(z.$("icon"),L);e(z.$("label"),L);}if(V){e(z.$("value"),V);}}});};n.prototype.getHeaderCheckbox=function(){return this._getHeaderCheckbox();};n.prototype.computeTextDimensions=function(i){var o=this.getDomRef(),t,p,u;if(o){t=this._createElement("text",i.attributes);o.appendChild(t);try{p=this._createLineText(i.text,i.width,t,i.maxLines);u=t.getBBox().height;}catch(e){}q(t).detach();return{text:p,lineHeight:u};}};n.prototype.renderText=function(e){var o=16;var p="",L=e.lines;if(!L){if(e.text){L=[e.text.split(" ")];}else{return"";}}for(var i=0;i<L.length;i++){p+=this._renderText({attributes:Object.assign({x:e.x+this.getX(),y:this.getY()+e.y+(i*(e.lineSize||o))},e.attributes),close:false});p+=L[i].join(" ");p+="</text>";}return p;};n.prototype.renderIcon=function(e){e.attributes=e.attributes||{};Object.assign(e.attributes,{"font-family":"SAP-icons"});e.attributes.x=this.getX()+(e.x||0);e.attributes.y=this.getY()+(e.y||0);return this._renderIcon({attributes:e.attributes,icon:e.icon});};n.prototype.renderHtmlIcon=function(i){return this._renderHtmlIcon(i,"sapSuiteUiCommonsNetworkGraphDivNodeIcon");};n.prototype.renderHtmlActionButtons=function(){var R=this.getId()+"-rightdivbuttons",L=this.getId()+"-leftdivbuttons";var e="<div id=\""+R+"\" class=\"sapSuiteUiCommonsNetworkGraphDivActionButtons sapSuiteUiCommonsNetworkGraphDivActionButtonsRight\"></div>",i="<div id=\""+L+"\" class=\"sapSuiteUiCommonsNetworkGraphDivActionButtons sapSuiteUiCommonsNetworkGraphDivActionButtonsLeft\"></div>";return i+e;};n.prototype.renderHtmlInfoIcon=function(o){return this._renderHtmlInfoIcon(o);};n.prototype.renderContent=function(o){return this._isHtml()?this._renderHtmlContent(o):this._renderSvgContent(o);};n.prototype.renderItemContent=function(o){if(this._isHtml()){return this._isBox()?this._renderHtmlBoxContent(o):this._renderHtmlCircleContent(o);}return this._isBox()?this._renderBoxContent(o):this._renderCircleContent(o);};n.prototype.calculateSizes=function(){this._setupMaxWidth();this._createMultilineTitle();this._createDescription();this._resetDimensions();this._applyMaxWidth();};n.prototype.renderElement=function(e,i,o){return this._renderControl(e,i,o);};n.prototype.renderStatusIcon=function(p){return this._renderInfoIcon(this.getX()+p.x,this.getY()+p.y,p.size,p.iconSize);};n.prototype.setSize=function(e){if(e){if(e.width){this._iWidth=e.width;}if(e.height){this._iHeight=e.height;}if(e.titleHeight){this._iTitleHeight=e.titleHeight;}}};n.prototype.hasVisibleActionButtons=function(){return this.$("actionButtons").hasClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS)||this.$().find(".sapSuiteUiCommonsNetworkGraphDivActionButtons").hasClass(this.VISIBLE_ACTIONS_BUTTONS_CLASS);};n.prototype.getEnabledActionButtons=function(){return this.$().find(".sapSuiteUiCommonsNetworkNodeActionButton, .sapSuiteUiCommonsNetworkGraphDivActionButton:not(.sapSuiteUiCommonsNetworkGraphDivActionButtonDisabled)").parent().toArray();};n.prototype.showActionButtons=function(e){var R,o,t=this,B=0,p=0,u=this.getParent()._bIsRtl,w,v,x,y,z,F,L;if(this._isHtml()){this._showDivActionButtons(e);return;}var G=function(){var x=this.getParent()._bIsRtl?-g.ActionButtons.RADIUS-g.ActionButtons.MARGIN:g.ActionButtons.RADIUS+g.ActionButtons.MARGIN,z=g.ActionButtons.RADIUS,P=[[x,z]];for(var i=1;i<R;i++){P.push([x,z+g.ActionButtons.RADIUS*2*i+g.ActionButtons.OFFSET*i]);}return P;}.bind(this);var J=function(){var P=this.getActionButtons().length;if(this.getShowExpandButton()){P++;}if(this.getShowDetailButton()){P++;}if(this.getShowActionLinksButton()){P++;}return P;}.bind(this);var K=function(P){var Q=13,U=2,V=P.position&&P.position===A.Left,W=(V&&!u)||(!V&&u);P.x=P.x+(W?y:x);var X={cx:P.x,cy:P.y,id:P.id+"-circle","class":"sapSuiteUiCommonsNetworkNodeActionButton",r:g.ActionButtons.RADIUS},Y={"class":"sapSuiteUiCommonsNetworkGraphIcon sapSuiteUiCommonsNetworkNodeActionIcon "+(P.class?P.class:""),x:P.x,y:P.y},Z,$,_,a1,b1,c1;if(!P.enable){X.class="sapSuiteUiCommonsNetworkNodeActionButtonDisabledBackground";w.appendChild(this._createElement("circle",X));X.class="sapSuiteUiCommonsNetworkNodeActionButtonDisabled";Y.class+=" sapSuiteUiCommonsNetworkNodeActionButtonDisabled";}b1=this._createElement("g",{id:P.id});Z=this._createElement("circle",{id:P.id+"-circle",cx:P.x,cy:P.y,r:g.ActionButtons.RADIUS-U,"class":"sapSuiteUiCommonsNetworkActionButtonFocusCircle"});_=this._createElement("circle",X);a1=this._createIcon(Y,P.icon,Q);if(P.title){$=this._createElement("title");$.textContent=P.title;_.appendChild($);}b1.appendChild(_);b1.appendChild(a1);b1.appendChild(Z);w.appendChild(b1);c1=q(_);if(P.enable){c1.click(function(){this._setActionButtonFocus(b1,true);this._setFocus(false);if(this.getParent()){this.getParent().setFocus({item:this,button:b1});}}.bind(this));q(_).click(P.click);}V?p++:B++;return{icon:a1,wrapper:_};}.bind(this);R=J();o=G();if(R===0){return;}if(e&&!this._bActionButtonsRendered){z=this.getY();if(this._isCircle()){x=this.getX()+(this._iWidth/2+this._iCircleSize/2);y=this.getX()+(this._iWidth/2-this._iCircleSize/2);}else{x=this.getX()+this._iWidth;y=this.getX();}var w=this.$("actionButtons")[0];if(!w){w=this._createElement("g",{"class":"sapSuiteUiCommonsNetworkNodeActionButtonWrapper",id:this._getDomId("actionButtons")});}else{q(w).children().remove();}if(this.getParent()._isUseNodeHtml()){this.getParent().$("actiionbuttons")[0].appendChild(w);}else{this.$()[0].appendChild(w);}if(this.getShowExpandButton()){v=K({x:o[B][0],y:z+o[B][1],icon:this._getExpandIcon(true),"class":"sapSuiteUiCommonsNetworkNodeActionCollapseIcon",enable:this._hasVisibleChildren(),title:r.getText("NETWORK_GRAPH_EXPAND_COLLAPSE"),id:this._getDomId("actionCollapse"),click:this._expandClick.bind(this)});this._expandIcon=v.icon;}if(this.getShowDetailButton()){F=K({x:o[B][0],y:z+o[B][1],icon:"sap-icon://menu",enable:this._hasDetailData()||this.getTitle(),id:this._getDomId("actionDetail"),title:r.getText("NETWORK_GRAPH_NODE_DETAILS"),click:function(){this._detailClick(F.wrapper);}.bind(this)});}if(this.getShowActionLinksButton()){L=K({x:o[B][0],y:z+o[B][1],icon:"sap-icon://chain-link",enable:this._hasActionLinks(),title:r.getText("NETWORK_GRAPH_NODE_LINKS"),id:this._getDomId("actionLinks"),click:function(){this._linksClick(L.wrapper);}.bind(this)});}for(var i=0;(B+p)<(f*2)&&i<this.getActionButtons().length;i++){(function(P){var Q=P.getPosition(),U=Q===A.Right?B:p;if(U>=f){Q=Q===A.Left?A.Right:A.Left;U=Q===A.Right?B:p;}var V=K({x:o[U][0],y:z+o[U][1],icon:P.getIcon(),title:P.getTitle(),id:P.getId(),click:function(W){P.firePress({buttonElement:V.wrapper});},enable:P.getEnabled(),position:Q});})(this.getActionButtons()[i]);}this._bActionButtonsRendered=true;}else if(this._expandIcon){this._expandIcon.textContent=t._getExpandIcon();this.$().find("."+this.FOCUS_CLASS).removeClass(this.FOCUS_CLASS);}var O=e?"addClass":"removeClass";this.$("actionButtons")[O](this.VISIBLE_ACTIONS_BUTTONS_CLASS);};n.prototype.getChildNodes=function(){this._checkForProcessData();return this.aChildren;};n.prototype.getChildLines=function(){this._checkForProcessData();return this.aLines;};n.prototype.getParentNodes=function(){this._checkForProcessData();return this.aParents;};n.prototype.getParentLines=function(){this._checkForProcessData();return this.aParentLines;};n.prototype.isHidden=function(){return this._bIsHidden;};n.prototype.setHidden=function(v){var t=this;var p=function(L){L.forEach(function(o){var e=o.getFromNode()===t?o.getToNode():o.getFromNode();o.setHidden(v||e.isHidden());});};p(this.getChildLines());p(this.getParentLines());this.$()[v?"hide":"show"]();this._bIsHidden=v;if(this._oGroup){this._oGroup.setHidden(!this._oGroup._hasVisibleNodes());}};n.prototype.getCenterPosition=function(){var o,e;if(this._isBox()){return{x:this.getX()+this._iWidth/2,y:this.getY()+this._iHeight/2};}o=this._getCirclePosition();e=this._getCircleSize()/2;return{x:o.x+e,y:o.y+e};};n.prototype.setHeaderCheckBoxState=function(v){this._setHeaderCheckBoxState(v);return this;};n.prototype.setX=function(x){this.setProperty("x",x,true);return this;};n.prototype.setY=function(y){this.setProperty("y",y,true);return this;};n.prototype.setSelected=function(e){var p=this.getParent(),F=e?"addClass":"removeClass",K=this.getKey();this.setProperty("selected",e,true);if(p){this._setStatusColors(e?"Selected":"");this.$()[F](this.SELECT_CLASS);if(e){p._mSelectedNodes[K]=this;}else{delete p._mSelectedNodes[K];}}return this;};n.prototype.setCollapsed=function(e){var o={},i,p,F=e?"addClass":"removeClass",$=this.$().find(".sapSuiteUiCommonsNetworkGraphDivActionButtons, .sapSuiteUiCommonsNetworkNodeActionButtonWrapper").find(".sapSuiteUiCommonsNetworkNodeActionCollapseIcon");this.setProperty("collapsed",e,true);this._oExpandState=e?h.COLLAPSED:h.EXPANDED;this.aChildren.forEach(function(t){t._getAllChildren(e,this.getKey(),o);},this);i=Object.keys(o);i.forEach(function(K){o[K]._hideShow(e,this.getKey());},this);i.forEach(function(K){o[K]._processHideShowParents(e,this.getKey(),o);},this);this.aLines.forEach(function(L){L._hideShow(e);});if($[0]){$[0].textContent=this._getExpandIcon();}this.$().removeClass("sapSuiteUiCommonsNetworkNodePartialCollapsed");this.$()[F]("sapSuiteUiCommonsNetworkNodeCollapsed");p=this.getParent();if(p){p._setupKeyboardNavigation();if(e&&!(p.getFocus()&&p.getFocus().item===this)){p.setFocus({item:this});}}return this;};n.prototype.setGroup=function(G){this.setProperty("group",G,true);this._invalidateParent();return this;};n.prototype.setShape=function(e){this.setProperty("shape",e,true);this._invalidateParent();return this;};n.prototype.setWidth=function(w){this.setProperty("width",w,true);this._iWidth=0;this._invalidateParent();return this;};n.prototype.setHeight=function(i){this.setProperty("height",i,true);this._iHeight=0;this._invalidateParent();return this;};n.prototype.setMaxWidth=function(i){this.setProperty("maxWidth",i,true);this._invalidateParent();return this;};n.prototype.setTitleLineSize=function(t){this.setProperty("titleLineSize",t,true);this._invalidateParent();return this;};n.prototype.addAttribute=function(){E.prototype.addAttribute.apply(this,arguments);this._invalidateParent();return this;};n.prototype.insertAttribute=function(){E.prototype.insertAttribute.apply(this,arguments);this._invalidateParent();return this;};n.prototype.removeAllAttributes=function(){E.prototype.removeAllAttributes.apply(this,arguments);this._invalidateParent();return this;};n.prototype.removeAttribute=function(){E.prototype.removeAttribute.apply(this,arguments);this._invalidateParent();return this;};n.prototype.addAttribute=function(){E.prototype.addAttribute.apply(this,arguments);this._invalidateParent();};n.prototype.insertAttribute=function(){E.prototype.insertAttribute.apply(this,arguments);this._invalidateParent();};n.prototype.removeAllAttributes=function(){E.prototype.removeAllAttributes.apply(this,arguments);this._invalidateParent();};n.prototype.removeAttribute=function(){E.prototype.removeAttribute.apply(this,arguments);this._invalidateParent();};n.prototype.getHeaderCheckBoxState=function(){if(this.getProperty("headerCheckBoxState")===H.Hidden){return H.Hidden;}return this.getHeaderCheckbox().getSelected()?H.Checked:H.Unchecked;};n.prototype._processRenderManager=function(R,e){if(R&&e){R.write(e);}return"";};n.prototype._hasAdditionalContent=function(){return this._displayAttributes()||this._displayDescription()||this.getContent();};n.hasNativeLineClamp=typeof document.documentElement.style.webkitLineClamp!="undefined"&&D.browser.chrome;n.prototype._invalidateParent=function(){var p=this.getParent();if(p){p.invalidate();}};n.prototype._isIgnored=function(){var p=this.getParent(),e=p&&p._isSwimLane(),i=this._isInCollapsedGroup();if(e&&this._isHtml()){i=false;}return i||this._isInIgnoredGroup()||!this._useInLayout();};n.prototype._getImageSize=function(){var R=function(w,e){return{width:w?parseInt(w,10):0,height:e?parseInt(e,10):0};};var t=this._isBox()?"Box":"Circle",i=this.getImage();if(!this._displayImage(i)){return R();}return R(i.getWidth()?i.getWidth():g.Image[t],i.getHeight()?i.getHeight():g.Image[t]);};n.prototype._displayImage=function(i){i=i||this.getImage();return i&&i.getSrc();};n.prototype._isHtml=function(){return this.getParent()&&this.getParent()._isUseNodeHtml();};n.prototype._isInCollapsedGroup=function(){return this._oGroup&&this._oGroup._isCollapsed();};n.prototype._isInIgnoredGroup=function(){return this._oGroup&&this._oGroup._isIgnored();};n.prototype._displayAttributes=function(){return this.getVisibleAttributes().length!==0&&this._isBox();};n.prototype._displayDescription=function(){return this.getDescriptionLineSize()!==-1&&this.getDescription();};n.prototype._hasTitle=function(){return this.getTitle()||this.getIcon();};n.prototype._isBox=function(){return this.getShape()===S.Box&&this.getParent()._isLayered();};n.prototype._isCircle=function(){return this.getShape()===S.Circle;};n.prototype._isCustom=function(){return this.getShape()===S.Custom;};n.prototype._hasChildren=function(){return this.aChildren.length>0;};n.prototype._showHeaderCheckBox=function(){return this.getHeaderCheckBoxState()!==H.Hidden&&this._isBox();};n.prototype._hasVisibleChildren=function(){return this.aChildren.some(function(o){return!(o._oGroup&&!o._oGroup.getVisible())&&o.getVisible();});};n.prototype._hasDetailData=function(){return this.getDescription()||this.getAttributes().length>0;};n.prototype._hasActionLinks=function(){return this.getActionLinks().some(function(L){return L.getVisible();});};n.prototype._useAutomaticSize=function(){return!this.getWidth()&&this.getMaxWidth()>0;};n.prototype._getShapeSize=function(e){if(this._isCircle()){return this._getCircleSize();}var i=this._isCustom()?this.getCoreNodeSize():0;return i||(e?this._iWidth:this._iHeight);};n.prototype._getCircleSize=function(){return this._isBox()?undefined:this._iCircleSize;};n.prototype._hasMultiLineTitle=function(){return this._aTitleLines&&this._aTitleLines.length>1;};n.prototype._getCirclePosition=function(){return this._isBox()?undefined:{x:this.getX()+(this._iWidth-this._getCircleSize())/2,y:this.getY()};};n.prototype.getFocusDomRef=function(){return this.getDomRef("wrapper");};n.prototype.setStatusIcon=function(i){var e=this.$("statusicon")[0],o=I.getIconInfo(i),p=o&&o.content;this.$("statusiconwrapper")[i?"addClass":"removeClass"]("sapSuiteUiCommonsNetworkNodeInfoWrapperCustomIcon");e&&(e.textContent=p);this.setProperty("statusIcon",i,true);return this;};return n;});
