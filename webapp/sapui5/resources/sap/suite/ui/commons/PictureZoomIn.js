/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery",'sap/m/Image','sap/ui/core/Control','sap/m/Text','sap/ui/core/library','./PictureZoomInRenderer'],function(q,I,C,T,a,P){"use strict";var b=C.extend("sap.suite.ui.commons.PictureZoomIn",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{description:{type:"string",group:"Misc",defaultValue:null},imageSrc:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null}},aggregations:{busyIndicator:{type:"sap.ui.core.Control",multiple:false}}}});b.prototype.init=function(){var t=this;q(window).resize(function(e){t._calculateImg();});q(document).keyup(function(e){if(e.keyCode===27){t.exit();q(document.getElementById(t.getId())).remove();}});if(typeof q(document).tap==="function"){q(document).tap(function(){t.exit();q(document.getElementById(t.getId())).remove();});}this._oImage=new I(this.getId()+"-image",{}).addStyleClass("sapSuiteUiCommonsPictureZoomInImg");this._oDescription=new T(this.getId()+"-description",{textAlign:a.TextAlign.Center});this._oDescription.addStyleClass("sapSuiteUiCommonsPictureZoomInDesc");};b.prototype.onBeforeRendering=function(){this._oImage.setSrc(this.getImageSrc());this._oDescription.setText(this.getDescription());};b.prototype._calculateImg=function(){var i=this.getId()+"-image"?window.document.getElementById(this.getId()+"-image"):null;var d=q(document.getElementById(this.getId()+"-description"));if(!i){return;}var w=q(document.getElementById(this.getId()));if(i.naturalWidth<w.width()&&i.naturalHeight<w.height()-d.outerHeight(true)){i.style.width=i.naturalWidth+"px";i.style.height=i.naturalHeight+"px";}else if(i.naturalHeight/(w.height()-d.outerHeight(true))>i.naturalWidth/w.width()){i.style.height=""+(98-d.outerHeight(true)*100/w.height())+"%";i.style.width="auto";}else{i.style.width='96%';i.style.height='auto';}var o=q(document.getElementById(this.getId()+"-image"));var W=w.width();var c=o.width();var e=o.height();if(W>=c){o.css("left",(W-c)/2);}var f=(w.height()-e-d.outerHeight(true))/2;o.css("top",f);d.css("top",f+e);};b.prototype.onAfterRendering=function(){var t=this;var i=q(document.getElementById(this.getId()+"-image"));var B=q(document.getElementById(this.getId()+"-busy"));i.hide();if(B.length){B.show();}else{this.setBusy(true);}i.load(function(){if(B.length){B.hide();}else{t.setBusy(false);}i.show();t._calculateImg();});};b.prototype.exit=function(){if(this._oImage){this._oImage.destroy();}if(this._oDescription){this._oDescription.destroy();}};return b;});
