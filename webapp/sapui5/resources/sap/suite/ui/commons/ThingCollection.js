/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/thirdparty/jquery",'./library','sap/ui/core/Control','sap/ui/commons/Link','sap/ui/commons/library',"sap/ui/events/jquery/EventSimulation","./ThingCollectionRenderer"],function(q,l,C,L,a,E,T){"use strict";var b=C.extend("sap.suite.ui.commons.ThingCollection",{metadata:{deprecated:true,library:"sap.suite.ui.commons",properties:{width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:'100%'},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:'100%'},minWidth:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},minHeight:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null}},aggregations:{content:{type:"sap.ui.ux3.ThingViewer",multiple:true,singularName:"content"}}}});b.prototype.init=function(){this._iCenterNum=0;this._bScrollDisabled=false;this._rb=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");this._oRemoveButton=new L({id:this.getId()+"-remove-button",tooltip:this._rb.getText("THINGCOLLECTION_BUTTON_REMOVE_TOOLTIP"),press:[this._removeCenterContent,this]});this._oRemoveButton.addStyleClass("sapUiUx3OverlayCloseButton");this._initTouchEvents();};b.prototype.exit=function(){this._oRemoveButton.destroy();};b.prototype.onBeforeRendering=function(){this._oCenterControl=this.getContent()[this._iCenterNum]||null;};b.prototype.onAfterRendering=function(){var t=this;q(document.getElementById(this.getId()+"-nav-prev")).bind("click",function(){t.shiftPrev();});q(document.getElementById(this.getId()+"-nav-next")).bind("click",function(){t.shiftNext();});this._updateArrows();if(this.getContent().length<=1){this._hideRemoveButton();}q(document.getElementById(this._oRemoveButton.getId())).attr("role","button");q(document.getElementById(this._oRemoveButton.getId())).attr("aria-disabled","false");};b.prototype.addContent=function(c){this.addAggregation("content",c,true);this._updateArrows();this._showRemoveButton();return this;};b.prototype.addNextContent=function(c){this.insertAggregation("content",c,this._iCenterNum+1,true);this._updateArrows();this._showRemoveButton();return this;};b.prototype.shiftPrev=function(){if(this._isShiftPrevForbidden()){return;}var t=this;this._hideRemoveButton();this._bScrollDisabled=true;var c="#"+this.getId()+"-container";var p=q(c+">.sapSuiteTcPrev");var o=q(c+">.sapSuiteTcCenter");var n=q(c+">.sapSuiteTcNext");var r=sap.ui.getCore().createRenderManager();var d=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";this._iCenterNum--;var D={};D[d]="+=110%";this._renderPrevPanel(r,this.getContent()[this._iCenterNum]);o.animate(D,800);p.animate(D,800,function(){n.css(d,"-110%");t._renderNextPanel(r);r.destroy();t._bScrollDisabled=false;t._updateArrows();t._showRemoveButton();q(c).focus();o.show();});p.removeClass("sapSuiteTcPrev").addClass("sapSuiteTcCenter").attr("aria-hidden","false");o.removeClass("sapSuiteTcCenter").addClass("sapSuiteTcNext").attr("aria-hidden","true");n.removeClass("sapSuiteTcNext").addClass("sapSuiteTcPrev");};b.prototype.shiftNext=function(){if(this._isShiftNextForbidden()){return;}var t=this;this._hideRemoveButton();this._bScrollDisabled=true;var c="#"+this.getId()+"-container";var p=q(c+">.sapSuiteTcPrev");var o=q(c+">.sapSuiteTcCenter");var n=q(c+">.sapSuiteTcNext");var r=sap.ui.getCore().createRenderManager();var d=sap.ui.getCore().getConfiguration().getRTL()?"right":"left";this._iCenterNum++;var D={};D[d]="-=110%";this._renderNextPanel(r,this.getContent()[this._iCenterNum]);o.animate(D,800);n.animate(D,800,function(){p.css(d,"110%");t._renderPrevPanel(r);r.destroy();t._bScrollDisabled=false;t._updateArrows();t._showRemoveButton();q(c).focus();o.show();});p.removeClass("sapSuiteTcPrev").addClass("sapSuiteTcNext");o.removeClass("sapSuiteTcCenter").addClass("sapSuiteTcPrev").attr("aria-hidden","true");n.removeClass("sapSuiteTcNext").addClass("sapSuiteTcCenter").attr("aria-hidden","false");};b.prototype.onsapprevious=function(e){this.shiftPrev();e.preventDefault();};b.prototype.onsapnext=function(e){this.shiftNext();e.preventDefault();};b.prototype._initTouchEvents=function(){if(E.touchEventMode!=="OFF"){var t=this;this.onswipeleft=function(e){e.preventDefault();t.shiftNext();};this.onswiperight=function(e){e.preventDefault();t.shiftPrev();};}};b.prototype._removeCenterContent=function(){this._hideRemoveButton();this.removeAggregation("content",this.getContent()[this._iCenterNum],true);var t=this;var c=this.getContent().length;var o=q("#"+this.getId()+"-container>.sapSuiteTcCenter");o.hide(600);if(t._iCenterNum>=c){t._iCenterNum=c;t.shiftPrev();}else{t._iCenterNum-=1;t.shiftNext();}};b.prototype._showRemoveButton=function(){if(this.getContent().length>1){q(document.getElementById(this.getId()+"-remove-button")).show();}};b.prototype._hideRemoveButton=function(){q(document.getElementById(this.getId()+"-remove-button")).hide();};b.prototype._updateArrows=function(){var n=q(document.getElementById(this.getId()+"-nav-prev"));var N=q(document.getElementById(this.getId()+"-nav-next"));var p="";var s="";if(this._isShiftPrevForbidden()){n.removeClass("sapSuiteTcNavPrevArrow");}else{n.addClass("sapSuiteTcNavPrevArrow");p=this._rb.getText("THINGCOLLECTION_BUTTON_PREVIOUS_TOOLTIP");}n.attr("title",p);if(this._isShiftNextForbidden()){N.removeClass("sapSuiteTcNavNextArrow");}else{N.addClass("sapSuiteTcNavNextArrow");s=this._rb.getText("THINGCOLLECTION_BUTTON_NEXT_TOOLTIP");}N.attr("title",s);};b.prototype._isShiftPrevForbidden=function(){return this._bScrollDisabled||(this._iCenterNum<=0);};b.prototype._isShiftNextForbidden=function(){return this._bScrollDisabled||(this._iCenterNum>=this.getContent().length-1);};b.prototype._renderPrevPanel=function(r,c){this._renderPanel(r,c,true);};b.prototype._renderNextPanel=function(r,c){this._renderPanel(r,c,false);};b.prototype._renderPanel=function(r,c,d){var p="#"+this.getId()+"-container>"+(d?".sapSuiteTcPrev":".sapSuiteTcNext");var P=q(p);if(P.length>0){if(c){r.renderControl(c);}else{r.write("");}r.flush(P[0]);}};return b;});
